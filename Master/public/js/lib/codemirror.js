(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?module.exports=a():typeof define==="function"&&define.amd?define(a):(b.CodeMirror=a())}(this,(function(){var eh=navigator.userAgent;var es=navigator.platform;var cB=/gecko\/\d/i.test(eh);var fa=/MSIE \d/.test(eh);var bS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(eh);var cP=/Edge\/(\d+)/.exec(eh);var dY=fa||bS||cP;var l=dY&&(fa?document.documentMode||6:+(cP||bS)[1]);var dd=!cP&&/WebKit\//.test(eh);var d1=dd&&/Qt\/\d+\.\d+/.test(eh);var ds=!cP&&/Chrome\//.test(eh);var ej=/Opera\//.test(eh);var aE=/Apple Computer/.test(navigator.vendor);var dk=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(eh);var fU=/PhantomJS/.test(eh);var fs=!cP&&/AppleWebKit/.test(eh)&&/Mobile\/\w+/.test(eh);var aP=/Android/.test(eh);var ey=fs||aP||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(eh);var ch=fs||/Mac/.test(es);var gd=/\bCrOS\b/.test(eh);var aS=/win/i.test(es);var a2=ej&&eh.match(/Version\/(\d*\.\d*)/);if(a2){a2=Number(a2[1])}if(a2&&a2>=15){ej=false;dd=true}var bZ=ch&&(d1||ej&&(a2==null||a2<12.11));var gK=cB||(dY&&l>=9);function T(i){return new RegExp("(^|\\s)"+i+"(?:$|\\s)\\s*")}var h=function(gV,i){var gW=gV.className;var gU=T(i).exec(gW);if(gU){var gX=gW.slice(gU.index+gU[0].length);gV.className=gW.slice(0,gU.index)+(gX?gU[1]+gX:"")}};function ei(gU){for(var i=gU.childNodes.length;i>0;--i){gU.removeChild(gU.firstChild)}return gU}function b1(i,gU){return ei(i).appendChild(gU)}function gC(gU,gY,gX,gW){var gZ=document.createElement(gU);if(gX){gZ.className=gX}if(gW){gZ.style.cssText=gW}if(typeof gY=="string"){gZ.appendChild(document.createTextNode(gY))}else{if(gY){for(var gV=0;gV<gY.length;++gV){gZ.appendChild(gY[gV])}}}return gZ}var cy;if(document.createRange){cy=function(gW,gX,gU,i){var gV=document.createRange();gV.setEnd(i||gW,gU);gV.setStart(gW,gX);return gV}}else{cy=function(gV,gX,i){var gU=document.body.createTextRange();try{gU.moveToElementText(gV.parentNode)}catch(gW){return gU}gU.collapse(true);gU.moveEnd("character",i);gU.moveStart("character",gX);return gU}}function gL(i,gU){if(gU.nodeType==3){gU=gU.parentNode}if(i.contains){return i.contains(gU)}do{if(gU.nodeType==11){gU=gU.host}if(gU==i){return true}}while(gU=gU.parentNode)}function d2(){var i;try{i=document.activeElement}catch(gU){i=document.body||null}while(i&&i.shadowRoot&&i.shadowRoot.activeElement){i=i.shadowRoot.activeElement}return i}function f3(gU,i){var gV=gU.className;if(!T(i).test(gV)){gU.className+=(gV?" ":"")+i}}function gs(gW,gU){var gV=gW.split(" ");for(var gX=0;gX<gV.length;gX++){if(gV[gX]&&!T(gV[gX]).test(gU)){gU+=" "+gV[gX]}}return gU}var dZ=function(i){i.select()};if(fs){dZ=function(i){i.selectionStart=0;i.selectionEnd=i.value.length}}else{if(dY){dZ=function(gU){try{gU.select()}catch(i){}}}}function cI(gU){var i=Array.prototype.slice.call(arguments,1);return function(){return gU.apply(null,i)}}function aQ(gV,gU,i){if(!gU){gU={}}for(var gW in gV){if(gV.hasOwnProperty(gW)&&(i!==false||!gU.hasOwnProperty(gW))){gU[gW]=gV[gW]}}return gU}function b0(gX,gV,gZ,g0,gW){if(gV==null){gV=gX.search(/[^\s\u00a0]/);if(gV==-1){gV=gX.length}}for(var gY=g0||0,g1=gW||0;;){var gU=gX.indexOf("\t",gY);if(gU<0||gU>=gV){return g1+(gV-gY)}g1+=gU-gY;g1+=gZ-(g1%gZ);gY=gU+1}}var gT=function(){this.id=null};gT.prototype.set=function(i,gU){clearTimeout(this.id);this.id=setTimeout(gU,i)};function dy(gW,gU){for(var gV=0;gV<gW.length;++gV){if(gW[gV]==gU){return gV}}return -1}var dX=30;var cm={toString:function(){return"CodeMirror.Pass"}};var ab={scroll:false};var N={origin:"*mouse"};var c9={origin:"+move"};function eK(gX,gW,gY){for(var gZ=0,gV=0;;){var gU=gX.indexOf("\t",gZ);if(gU==-1){gU=gX.length}var i=gU-gZ;if(gU==gX.length||gV+i>=gW){return gZ+Math.min(i,gW-gV)}gV+=gU-gZ;gV+=gY-(gV%gY);gZ=gU+1;if(gV>=gW){return gZ}}}var a3=[""];function cC(i){while(a3.length<=i){a3.push(f9(a3)+" ")}return a3[i]}function f9(i){return i[i.length-1]}function b2(gX,gW){var gU=[];for(var gV=0;gV<gX.length;gV++){gU[gV]=gW(gX[gV],gV)}return gU}function ck(gX,gU,gV){var gW=0,i=gV(gU);while(gW<gX.length&&gV(gX[gW])<=i){gW++}gX.splice(gW,0,gU)}function gt(){}function cw(gV,i){var gU;if(Object.create){gU=Object.create(gV)}else{gt.prototype=gV;gU=new gt()}if(i){aQ(i,gU)}return gU}var bf=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function f6(i){return/\w/.test(i)||i>"\x80"&&(i.toUpperCase()!=i.toLowerCase()||bf.test(i))}function cN(i,gU){if(!gU){return f6(i)}if(gU.source.indexOf("\\w")>-1&&f6(i)){return true}return gU.test(i)}function fl(i){for(var gU in i){if(i.hasOwnProperty(gU)&&i[gU]){return false}}return true}var e9=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function fP(i){return i.charCodeAt(0)>=768&&e9.test(i)}function eC(gU,gV,i){while((i<0?gV>0:gV<gU.length)&&fP(gU.charAt(gV))){gV+=i}return gV}function cz(i,gW,gV){for(;;){if(Math.abs(gW-gV)<=1){return i(gW)?gW:gV}var gU=Math.floor((gW+gV)/2);if(i(gU)){gV=gU}else{gW=gU}}}function e7(i,gV,gU){var gW=this;this.input=gU;gW.scrollbarFiller=gC("div",null,"CodeMirror-scrollbar-filler");gW.scrollbarFiller.setAttribute("cm-not-content","true");gW.gutterFiller=gC("div",null,"CodeMirror-gutter-filler");gW.gutterFiller.setAttribute("cm-not-content","true");gW.lineDiv=gC("div",null,"CodeMirror-code");gW.selectionDiv=gC("div",null,null,"position: relative; z-index: 1");gW.cursorDiv=gC("div",null,"CodeMirror-cursors");gW.measure=gC("div",null,"CodeMirror-measure");gW.lineMeasure=gC("div",null,"CodeMirror-measure");gW.lineSpace=gC("div",[gW.measure,gW.lineMeasure,gW.selectionDiv,gW.cursorDiv,gW.lineDiv],null,"position: relative; outline: none");gW.mover=gC("div",[gC("div",[gW.lineSpace],"CodeMirror-lines")],null,"position: relative");gW.sizer=gC("div",[gW.mover],"CodeMirror-sizer");gW.sizerWidth=null;gW.heightForcer=gC("div",null,null,"position: absolute; height: "+dX+"px; width: 1px;");gW.gutters=gC("div",null,"CodeMirror-gutters");gW.lineGutter=null;gW.scroller=gC("div",[gW.sizer,gW.heightForcer,gW.gutters],"CodeMirror-scroll");gW.scroller.setAttribute("tabIndex","-1");gW.wrapper=gC("div",[gW.scrollbarFiller,gW.gutterFiller,gW.scroller],"CodeMirror");if(dY&&l<8){gW.gutters.style.zIndex=-1;gW.scroller.style.paddingRight=0}if(!dd&&!(cB&&ey)){gW.scroller.draggable=true}if(i){if(i.appendChild){i.appendChild(gW.wrapper)}else{i(gW.wrapper)}}gW.viewFrom=gW.viewTo=gV.first;gW.reportedViewFrom=gW.reportedViewTo=gV.first;gW.view=[];gW.renderedView=null;gW.externalMeasured=null;gW.viewOffset=0;gW.lastWrapHeight=gW.lastWrapWidth=0;gW.updateLineNumbers=null;gW.nativeBarWidth=gW.barHeight=gW.barWidth=0;gW.scrollbarsClipped=false;gW.lineNumWidth=gW.lineNumInnerWidth=gW.lineNumChars=null;gW.alignWidgets=false;gW.cachedCharWidth=gW.cachedTextHeight=gW.cachedPaddingH=null;gW.maxLine=null;gW.maxLineLength=0;gW.maxLineChanged=false;gW.wheelDX=gW.wheelDY=gW.wheelStartX=gW.wheelStartY=null;gW.shift=false;gW.selForContextMenu=null;gW.activeTouch=null;gU.init(gW)}function fG(gX,gZ){gZ-=gX.first;if(gZ<0||gZ>=gX.size){throw new Error("There is no line "+(gZ+gX.first)+" in the document.")}var gU=gX;while(!gU.lines){for(var gV=0;;++gV){var gY=gU.children[gV],gW=gY.chunkSize();if(gZ<gW){gU=gY;break}gZ-=gW}}return gU.lines[gZ]}function gE(gV,gX,i){var gU=[],gW=gX.line;gV.iter(gX.line,i.line+1,function(gY){var gZ=gY.text;if(gW==i.line){gZ=gZ.slice(0,i.ch)}if(gW==gX.line){gZ=gZ.slice(gX.ch)}gU.push(gZ);++gW});return gU}function a5(gU,gW,gV){var i=[];gU.iter(gW,gV,function(gX){i.push(gX.text)});return i}function gH(gU,i){var gV=i-gU.height;if(gV){for(var gW=gU;gW;gW=gW.parent){gW.height+=gV}}}function bW(gU){if(gU.parent==null){return null}var gY=gU.parent,gX=dy(gY.lines,gU);for(var gV=gY.parent;gV;gY=gV,gV=gV.parent){for(var gW=0;;++gW){if(gV.children[gW]==gY){break}gX+=gV.children[gW].chunkSize()}}return gX+gY.first}function bQ(g0,gZ){var gX=g0.first;outer:do{for(var gW=0;gW<g0.children.length;++gW){var gV=g0.children[gW],gU=gV.height;if(gZ<gU){g0=gV;continue outer}gZ-=gU;gX+=gV.chunkSize()}return gX}while(!g0.lines);var gY=0;for(;gY<g0.lines.length;++gY){var g2=g0.lines[gY],g1=g2.height;if(gZ<g1){break}gZ-=g1}return gX+gY}function cj(gU,i){return i>=gU.first&&i<gU.first+gU.size}function eN(gU,gV){return String(gU.lineNumberFormatter(gV+gU.firstLineNumber))}function X(i,gU,gV){if(gV===void 0){gV=null}if(!(this instanceof X)){return new X(i,gU,gV)}this.line=i;this.ch=gU;this.sticky=gV}function cq(gU,i){return gU.line-i.line||gU.ch-i.ch}function Y(gU,i){return gU.sticky==i.sticky&&cq(gU,i)==0}function ct(i){return X(i.line,i.ch)}function bG(gU,i){return cq(gU,i)<0?i:gU}function at(gU,i){return cq(gU,i)<0?gU:i}function di(i,gU){return Math.max(i.first,Math.min(gU,i.first+i.size-1))}function ge(gU,gV){if(gV.line<gU.first){return X(gU.first,0)}var i=gU.first+gU.size-1;if(gV.line>i){return X(i,fG(gU,i).text.length)}return fS(gV,fG(gU,gV.line).text.length)}function fS(gV,gU){var i=gV.ch;if(i==null||i>gU){return X(gV.line,gU)}else{if(i<0){return X(gV.line,0)}else{return gV}}}function eg(gW,gX){var gU=[];for(var gV=0;gV<gX.length;gV++){gU[gV]=ge(gW,gX[gV])}return gU}var gO=false;var ba=false;function f1(){gO=true}function bF(){ba=true}function eB(i,gV,gU){this.marker=i;this.from=gV;this.to=gU}function fB(gW,gU){if(gW){for(var gV=0;gV<gW.length;++gV){var gX=gW[gV];if(gX.marker==gU){return gX}}}}function e6(gV,gW){var gX;for(var gU=0;gU<gV.length;++gU){if(gV[gU]!=gW){(gX||(gX=[])).push(gV[gU])}}return gX}function co(i,gU){i.markedSpans=i.markedSpans?i.markedSpans.concat([gU]):[gU];gU.marker.attachLine(i)}function aT(gV,gW,g0){var g1;if(gV){for(var gY=0;gY<gV.length;++gY){var g2=gV[gY],gZ=g2.marker;var gU=g2.from==null||(gZ.inclusiveLeft?g2.from<=gW:g2.from<gW);if(gU||g2.from==gW&&gZ.type=="bookmark"&&(!g0||!g2.marker.insertLeft)){var gX=g2.to==null||(gZ.inclusiveRight?g2.to>=gW:g2.to>gW);(g1||(g1=[])).push(new eB(gZ,g2.from,gX?null:g2.to))}}}return g1}function aD(gV,gX,g0){var g1;if(gV){for(var gY=0;gY<gV.length;++gY){var g2=gV[gY],gZ=g2.marker;var gW=g2.to==null||(gZ.inclusiveRight?g2.to>=gX:g2.to>gX);if(gW||g2.from==gX&&gZ.type=="bookmark"&&(!g0||g2.marker.insertLeft)){var gU=g2.from==null||(gZ.inclusiveLeft?g2.from<=gX:g2.from<gX);(g1||(g1=[])).push(new eB(gZ,gU?null:g2.from-gX,g2.to==null?null:g2.to-gX))}}}return g1}function eD(hf,g5){if(g5.full){return null}var gW=cj(hf,g5.from.line)&&fG(hf,g5.from.line).markedSpans;var g3=cj(hf,g5.to.line)&&fG(hf,g5.to.line).markedSpans;if(!gW&&!g3){return null}var g2=g5.from.ch,ha=g5.to.ch,g7=cq(g5.from,g5.to)==0;var g1=aT(gW,g2,g7);var g4=aD(g3,ha,g7);var g8=g5.text.length==1,gZ=f9(g5.text).length+(g8?g2:0);if(g1){for(var hd=0;hd<g1.length;++hd){var hc=g1[hd];if(hc.to==null){var g6=fB(g4,hc.marker);if(!g6){hc.to=g2}else{if(g8){hc.to=g6.to==null?null:g6.to+gZ}}}}}if(g4){for(var g0=0;g0<g4.length;++g0){var hb=g4[g0];if(hb.to!=null){hb.to+=gZ}if(hb.from==null){var gV=fB(g1,hb.marker);if(!gV){hb.from=gZ;if(g8){(g1||(g1=[])).push(hb)}}}else{hb.from+=gZ;if(g8){(g1||(g1=[])).push(hb)}}}}if(g1){g1=r(g1)}if(g4&&g4!=g1){g4=r(g4)}var he=[g1];if(!g8){var g9=g5.text.length-2,gU;if(g9>0&&g1){for(var gY=0;gY<g1.length;++gY){if(g1[gY].to==null){(gU||(gU=[])).push(new eB(g1[gY].marker,null,null))}}}for(var gX=0;gX<g9;++gX){he.push(gU)}he.push(g4)}return he}function r(gV){for(var gU=0;gU<gV.length;++gU){var gW=gV[gU];if(gW.from!=null&&gW.from==gW.to&&gW.marker.clearWhenEmpty!==false){gV.splice(gU--,1)}}if(!gV.length){return null}return gV}function cV(g6,g4,g5){var gY=null;g6.iter(g4.line,g5.line+1,function(g7){if(g7.markedSpans){for(var g8=0;g8<g7.markedSpans.length;++g8){var g9=g7.markedSpans[g8].marker;if(g9.readOnly&&(!gY||dy(gY,g9)==-1)){(gY||(gY=[])).push(g9)}}}});if(!gY){return null}var gZ=[{from:g4,to:g5}];for(var g0=0;g0<gY.length;++g0){var g1=gY[g0],gW=g1.find(0);for(var gX=0;gX<gZ.length;++gX){var gV=gZ[gX];if(cq(gV.to,gW.from)<0||cq(gV.from,gW.to)>0){continue}var g3=[gX,1],gU=cq(gV.from,gW.from),g2=cq(gV.to,gW.to);if(gU<0||!g1.inclusiveLeft&&!gU){g3.push({from:gV.from,to:gW.from})}if(g2>0||!g1.inclusiveRight&&!g2){g3.push({from:gW.to,to:gV.to})}gZ.splice.apply(gZ,g3);gX+=g3.length-3}}return gZ}function gJ(gU){var gW=gU.markedSpans;if(!gW){return}for(var gV=0;gV<gW.length;++gV){gW[gV].marker.detachLine(gU)}gU.markedSpans=null}function dg(gU,gW){if(!gW){return}for(var gV=0;gV<gW.length;++gV){gW[gV].marker.attachLine(gU)}gU.markedSpans=gW}function v(i){return i.inclusiveLeft?-1:0}function b5(i){return i.inclusiveRight?1:0}function d6(gW,gU){var gY=gW.lines.length-gU.lines.length;if(gY!=0){return gY}var gV=gW.find(),gZ=gU.find();var i=cq(gV.from,gZ.from)||v(gW)-v(gU);if(i){return -i}var gX=cq(gV.to,gZ.to)||b5(gW)-b5(gU);if(gX){return gX}return gU.id-gW.id}function a9(gV,gZ){var gU=ba&&gV.markedSpans,gY;if(gU){for(var gX=(void 0),gW=0;gW<gU.length;++gW){gX=gU[gW];if(gX.marker.collapsed&&(gZ?gX.from:gX.to)==null&&(!gY||d6(gY,gX.marker)<0)){gY=gX.marker}}}return gY}function ff(i){return a9(i,true)}function eR(i){return a9(i,false)}function z(g2,gW,g0,g1,gY){var g5=fG(g2,gW);var gU=ba&&g5.markedSpans;if(gU){for(var gX=0;gX<gU.length;++gX){var gV=gU[gX];if(!gV.marker.collapsed){continue}var g4=gV.marker.find(0);var g3=cq(g4.from,g0)||v(gV.marker)-v(gY);var gZ=cq(g4.to,g1)||b5(gV.marker)-b5(gY);if(g3>=0&&gZ<=0||g3<=0&&gZ>=0){continue}if(g3<=0&&(gV.marker.inclusiveRight&&gY.inclusiveLeft?cq(g4.to,g0)>=0:cq(g4.to,g0)>0)||g3>=0&&(gV.marker.inclusiveRight&&gY.inclusiveLeft?cq(g4.from,g1)<=0:cq(g4.from,g1)<0)){return true}}}}function y(gU){var i;while(i=ff(gU)){gU=i.find(-1,true).line}return gU}function cv(gU){var i;while(i=eR(gU)){gU=i.find(1,true).line}return gU}function g(gV){var i,gU;while(i=eR(gV)){gV=i.find(1,true).line;(gU||(gU=[])).push(gV)}return gU}function aZ(gW,gU){var i=fG(gW,gU),gV=y(i);if(i==gV){return gU}return bW(gV)}function ek(gW,gV){if(gV>gW.lastLine()){return gV}var gU=fG(gW,gV),i;if(!fW(gW,gU)){return gV}while(i=eR(gU)){gU=i.find(1,true).line}return bW(gU)+1}function fW(gY,gV){var gU=ba&&gV.markedSpans;if(gU){for(var gX=(void 0),gW=0;gW<gU.length;++gW){gX=gU[gW];if(!gX.marker.collapsed){continue}if(gX.from==null){return true}if(gX.marker.widgetNode){continue}if(gX.from==0&&gX.marker.inclusiveLeft&&U(gY,gV,gX)){return true}}}}function U(gZ,gV,gX){if(gX.to==null){var gU=gX.marker.find(1,true);return U(gZ,gU.line,fB(gU.line.markedSpans,gX.marker))}if(gX.marker.inclusiveRight&&gX.to==gV.text.length){return true}for(var gY=(void 0),gW=0;gW<gV.markedSpans.length;++gW){gY=gV.markedSpans[gW];if(gY.marker.collapsed&&!gY.marker.widgetNode&&gY.from==gX.to&&(gY.to==null||gY.to!=gX.from)&&(gY.marker.inclusiveLeft||gX.marker.inclusiveRight)&&U(gZ,gV,gY)){return true}}}function bV(gW){gW=y(gW);var gY=0,gV=gW.parent;for(var gX=0;gX<gV.lines.length;++gX){var gU=gV.lines[gX];if(gU==gW){break}else{gY+=gU.height}}for(var gZ=gV.parent;gZ;gV=gZ,gZ=gV.parent){for(var g1=0;g1<gZ.children.length;++g1){var g0=gZ.children[g1];if(g0==gV){break}else{gY+=g0.height}}}return gY}function eG(gV){if(gV.height==0){return 0}var gU=gV.text.length,i,gY=gV;while(i=ff(gY)){var gW=i.find(0,true);gY=gW.from.line;gU+=gW.from.ch-gW.to.ch}gY=gV;while(i=eR(gY)){var gX=i.find(0,true);gU-=gY.text.length-gX.from.ch;gY=gX.to.line;gU+=gY.text.length-gX.to.ch}return gU}function f(i){var gV=i.display,gU=i.doc;gV.maxLine=fG(gU,gU.first);gV.maxLineLength=eG(gV.maxLine);gV.maxLineChanged=true;gU.iter(function(gX){var gW=eG(gX);if(gW>gV.maxLineLength){gV.maxLineLength=gW;gV.maxLine=gX}})}function el(gU,g0,gZ,gY){if(!gU){return gY(g0,gZ,"ltr")}var gX=false;for(var gW=0;gW<gU.length;++gW){var gV=gU[gW];if(gV.from<gZ&&gV.to>g0||g0==gZ&&gV.to==g0){gY(Math.max(gV.from,g0),Math.min(gV.to,gZ),gV.level==1?"rtl":"ltr");gX=true}}if(!gX){gY(g0,gZ,"ltr")}}var fu=null;function aJ(gU,gW,gY){var gX;fu=null;for(var gV=0;gV<gU.length;++gV){var gZ=gU[gV];if(gZ.from<gW&&gZ.to>gW){return gV}if(gZ.to==gW){if(gZ.from!=gZ.to&&gY=="before"){gX=gV}else{fu=gV}}if(gZ.from==gW){if(gZ.from!=gZ.to&&gY!="before"){gX=gV}else{fu=gV}}}return gX!=null?gX:fu}var bl=(function(){var gZ="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN";var gX="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";function gW(g2){if(g2<=247){return gZ.charAt(g2)}else{if(1424<=g2&&g2<=1524){return"R"}else{if(1536<=g2&&g2<=1785){return gX.charAt(g2-1536)}else{if(1774<=g2&&g2<=2220){return"r"}else{if(8192<=g2&&g2<=8203){return"w"}else{if(g2==8204){return"b"}else{return"L"}}}}}}}var i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var g1=/[stwN]/,gV=/[LRr]/,gU=/[Lb1n]/,gY=/[1n]/;function g0(g4,g3,g2){this.level=g4;this.from=g3;this.to=g2}return function(hp,g5){var he=g5=="ltr"?"L":"R";if(hp.length==0||g5=="ltr"&&!i.test(hp)){return false}var g8=hp.length,hy=[];for(var hB=0;hB<g8;++hB){hy.push(gW(hp.charCodeAt(hB)))}for(var hm=0,hl=he;hm<g8;++hm){var hC=hy[hm];if(hC=="m"){hy[hm]=hl}else{hl=hC}}for(var hk=0,g4=he;hk<g8;++hk){var hx=hy[hk];if(hx=="1"&&g4=="r"){hy[hk]="n"}else{if(gV.test(hx)){g4=hx;if(hx=="r"){hy[hk]="R"}}}}for(var hj=1,g3=hy[0];hj<g8-1;++hj){var hw=hy[hj];if(hw=="+"&&g3=="1"&&hy[hj+1]=="1"){hy[hj]="1"}else{if(hw==","&&g3==hy[hj+1]&&(g3=="1"||g3=="n")){hy[hj]=g3}}g3=hw}for(var hi=0;hi<g8;++hi){var hv=hy[hi];if(hv==","){hy[hi]="N"}else{if(hv=="%"){var g7=(void 0);for(g7=hi+1;g7<g8&&hy[g7]=="%";++g7){}var hc=(hi&&hy[hi-1]=="!")||(g7<g8&&hy[g7]=="1")?"1":"N";for(var hA=hi;hA<g7;++hA){hy[hA]=hc}hi=g7-1}}}for(var hh=0,hb=he;hh<g8;++hh){var ht=hy[hh];if(hb=="L"&&ht=="1"){hy[hh]="L"}else{if(gV.test(ht)){hb=ht}}}for(var hg=0;hg<g8;++hg){if(g1.test(hy[hg])){var hq=(void 0);for(hq=hg+1;hq<g8&&g1.test(hy[hq]);++hq){}var hs=(hg?hy[hg-1]:he)=="L";var hu=(hq<g8?hy[hq]:he)=="L";var ho=hs==hu?(hs?"L":"R"):he;for(var ha=hg;ha<hq;++ha){hy[ha]=ho}hg=hq-1}}var hr=[],hz;for(var hf=0;hf<g8;){if(gU.test(hy[hf])){var hd=hf;for(++hf;hf<g8&&gU.test(hy[hf]);++hf){}hr.push(new g0(0,hd,hf))}else{var hn=hf,g2=hr.length;for(++hf;hf<g8&&hy[hf]!="L";++hf){}for(var g9=hn;g9<hf;){if(gY.test(hy[g9])){if(hn<g9){hr.splice(g2,0,new g0(1,hn,g9))}var g6=g9;for(++g9;g9<hf&&gY.test(hy[g9]);++g9){}hr.splice(g2,0,new g0(2,g6,g9));hn=g9}else{++g9}}if(hn<hf){hr.splice(g2,0,new g0(1,hn,hf))}}}if(hr[0].level==1&&(hz=hp.match(/^\s+/))){hr[0].from=hz[0].length;hr.unshift(new g0(0,0,hz[0].length))}if(f9(hr).level==1&&(hz=hp.match(/\s+$/))){f9(hr).to-=hz[0].length;hr.push(new g0(0,g8-hz[0].length,g8))}return g5=="rtl"?hr.reverse():hr}})();function a(gU,gV){var i=gU.order;if(i==null){i=gU.order=bl(gU.text,gV)}return i}function bx(i,gV,gU){var gW=eC(i.text,gV+gU,gU);return gW<0||gW>i.text.length?null:gW}function ak(i,gW,gU){var gV=bx(i,gW.ch,gU);return gV==null?null:new X(gW.line,gV,gU<0?"after":"before")}function eW(gU,g2,gZ,gY,gW){if(gU){var gX=a(gZ,g2.doc.direction);if(gX){var gV=gW<0?f9(gX):gX[0];var g4=(gW<0)==(gV.level==1);var g1=g4?"after":"before";var i;if(gV.level>0){var g0=a8(g2,gZ);i=gW<0?gZ.text.length-1:0;var g3=D(g2,g0,i).top;i=cz(function(g5){return D(g2,g0,g5).top==g3},(gW<0)==(gV.level==1)?gV.from:gV.to-1,i);if(g1=="before"){i=bx(gZ,i,1,true)}}else{i=gW<0?gV.to:gV.from}return new X(gY,i,g1)}}return new X(gY,gW<0?gZ.text.length:0,gW<0?"before":"after")}function u(g4,g9,gX,g0){var g6=a(g9,g4.doc.direction);if(!g6){return ak(g9,gX,g0)}if(gX.ch>=g9.text.length){gX.ch=g9.text.length;gX.sticky="before"}else{if(gX.ch<=0){gX.ch=0;gX.sticky="after"}}var gW=aJ(g6,gX.ch,gX.sticky),gY=g6[gW];if(g4.doc.direction=="ltr"&&gY.level%2==0&&(g0>0?gY.to>gX.ch:gY.from<gX.ch)){return ak(g9,gX,g0)}var g7=function(hb,ha){return bx(g9,hb instanceof X?hb.ch:hb,ha)};var g1;var g5=function(ha){if(!g4.options.lineWrapping){return{begin:0,end:g9.text.length}}g1=g1||a8(g4,g9);return br(g4,g9,g1,ha)};var gZ=g5(gX.sticky=="before"?g7(gX,-1):gX.ch);if(g4.doc.direction=="rtl"||gY.level==1){var g8=(gY.level==1)==(g0<0);var gU=g7(gX,g8?1:-1);if(gU!=null&&(!g8?gU>=gY.from&&gU>=gZ.begin:gU<=gY.to&&gU<=gZ.end)){var g3=g8?"before":"after";return new X(gX.line,gU,g3)}}var gV=function(ha,hd,hg){var hc=function(hi,hh){return hh?new X(gX.line,g7(hi,1),"before"):new X(gX.line,hi,"after")};for(;ha>=0&&ha<g6.length;ha+=hd){var hb=g6[ha];var he=(hd>0)==(hb.level!=1);var hf=he?hg.begin:g7(hg.end,-1);if(hb.from<=hf&&hf<hb.to){return hc(hf,he)}hf=he?hb.from:g7(hb.to,-1);if(hg.begin<=hf&&hf<hg.end){return hc(hf,he)}}};var g2=gV(gW+g0,g0,gZ);if(g2){return g2}var i=g0>0?gZ.end:g7(gZ.begin,-1);if(i!=null&&!(g0>0&&i==g9.text.length)){g2=gV(g0>0?0:g6.length-1,g0,g5(i));if(g2){return g2}}return null}var fx=[];var b6=function(gV,i,gU){if(gV.addEventListener){gV.addEventListener(i,gU,false)}else{if(gV.attachEvent){gV.attachEvent("on"+i,gU)}else{var gW=gV._handlers||(gV._handlers={});gW[i]=(gW[i]||fx).concat(gU)}}};function eE(gU,i){return gU._handlers&&gU._handlers[i]||fx}function ex(gX,gV,gW){if(gX.removeEventListener){gX.removeEventListener(gV,gW,false)}else{if(gX.detachEvent){gX.detachEvent("on"+gV,gW)}else{var gY=gX._handlers,i=gY&&gY[gV];if(i){var gU=dy(i,gW);if(gU>-1){gY[gV]=i.slice(0,gU).concat(i.slice(gU+1))}}}}}function aG(gY,gX){var gU=eE(gY,gX);if(!gU.length){return}var gV=Array.prototype.slice.call(arguments,2);for(var gW=0;gW<gU.length;++gW){gU[gW].apply(null,gV)}}function aU(i,gV,gU){if(typeof gV=="string"){gV={type:gV,preventDefault:function(){this.defaultPrevented=true}}}aG(i,gU||gV.type,i,gV);return bU(gV)||gV.codemirrorIgnore}function W(gV){var gU=gV._handlers&&gV._handlers.cursorActivity;if(!gU){return}var gX=gV.curOp.cursorActivityHandlers||(gV.curOp.cursorActivityHandlers=[]);for(var gW=0;gW<gU.length;++gW){if(dy(gX,gU[gW])==-1){gX.push(gU[gW])}}}function fL(gU,i){return eE(gU,i).length>0}function bI(i){i.prototype.on=function(gU,gV){b6(this,gU,gV)};i.prototype.off=function(gU,gV){ex(this,gU,gV)}}function cT(i){if(i.preventDefault){i.preventDefault()}else{i.returnValue=false}}function dF(i){if(i.stopPropagation){i.stopPropagation()}else{i.cancelBubble=true}}function bU(i){return i.defaultPrevented!=null?i.defaultPrevented:i.returnValue==false}function eL(i){cT(i);dF(i)}function M(i){return i.target||i.srcElement}function gj(gU){var i=gU.which;if(i==null){if(gU.button&1){i=1}else{if(gU.button&2){i=3}else{if(gU.button&4){i=2}}}}if(ch&&gU.ctrlKey&&i==1){i=3}return i}var fb=function(){if(dY&&l<9){return false}var i=gC("div");return"draggable" in i||"dragDrop" in i}();var gh;function bu(i){if(gh==null){var gV=gC("span","\u200b");b1(i,gC("span",[gV,document.createTextNode("x")]));if(i.firstChild.offsetHeight!=0){gh=gV.offsetWidth<=1&&gV.offsetHeight>2&&!(dY&&l<8)}}var gU=gh?gC("span","\u200b"):gC("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");gU.setAttribute("cm-text","");return gU}var gi;function bX(gW){if(gi!=null){return gi}var i=b1(gW,document.createTextNode("A\u062eA"));var gV=cy(i,0,1).getBoundingClientRect();var gU=cy(i,1,2).getBoundingClientRect();ei(gW);if(!gV||gV.left==gV.right){return false}return gi=(gU.right-gV.right<3)}var go="\n\nb".split(/\n/).length!=3?function(gY){var gZ=0,i=[],gX=gY.length;while(gZ<=gX){var gW=gY.indexOf("\n",gZ);if(gW==-1){gW=gY.length}var gV=gY.slice(gZ,gY.charAt(gW-1)=="\r"?gW-1:gW);var gU=gV.indexOf("\r");if(gU!=-1){i.push(gV.slice(0,gU));gZ+=gU+1}else{i.push(gV);gZ=gW+1}}return i}:function(i){return i.split(/\r\n?|\n/)};var bA=window.getSelection?function(gU){try{return gU.selectionStart!=gU.selectionEnd}catch(i){return false}}:function(gV){var i;try{i=gV.ownerDocument.selection.createRange()}catch(gU){}if(!i||i.parentElement()!=gV){return false}return i.compareEndPoints("StartToEnd",i)!=0};var dp=(function(){var i=gC("div");if("oncopy" in i){return true}i.setAttribute("oncopy","return;");return typeof i.oncopy=="function"})();var fy=null;function aN(gU){if(fy!=null){return fy}var gV=b1(gU,gC("span","x"));var gW=gV.getBoundingClientRect();var i=cy(gV,0,1).getBoundingClientRect();return fy=Math.abs(gW.left-i.left)>1}var dH={};var aV={};function eO(i,gU){if(arguments.length>2){gU.dependencies=Array.prototype.slice.call(arguments,2)}dH[i]=gU}function bt(gU,i){aV[gU]=i}function gM(i){if(typeof i=="string"&&aV.hasOwnProperty(i)){i=aV[i]}else{if(i&&typeof i.name=="string"&&aV.hasOwnProperty(i.name)){var gU=aV[i.name];if(typeof gU=="string"){gU={name:gU}}i=cw(gU,i);i.name=gU.name}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(i)){return gM("application/xml")}else{if(typeof i=="string"&&/^[\w\-]+\/[\w\-]+\+json$/.test(i)){return gM("application/json")}}}}if(typeof i=="string"){return{name:i}}else{return i||{name:"null"}}}function f2(gV,gU){gU=gM(gU);var gX=dH[gU.name];if(!gX){return f2(gV,"text/plain")}var gY=gX(gV,gU);if(dE.hasOwnProperty(gU.name)){var gW=dE[gU.name];for(var gZ in gW){if(!gW.hasOwnProperty(gZ)){continue}if(gY.hasOwnProperty(gZ)){gY["_"+gZ]=gY[gZ]}gY[gZ]=gW[gZ]}}gY.name=gU.name;if(gU.helperType){gY.helperType=gU.helperType}if(gU.modeProps){for(var i in gU.modeProps){gY[i]=gU.modeProps[i]}}return gY}var dE={};function e1(gV,gU){var i=dE.hasOwnProperty(gV)?dE[gV]:(dE[gV]={});aQ(gU,i)}function cd(gW,i){if(i===true){return i}if(gW.copyState){return gW.copyState(i)}var gV={};for(var gX in i){var gU=i[gX];if(gU instanceof Array){gU=gU.concat([])}gV[gX]=gU}return gV}function gI(gV,i){var gU;while(gV.innerMode){gU=gV.innerMode(i);if(!gU||gU.mode==gV){break}i=gU.state;gV=gU.mode}return gU||{mode:gV,state:i}}function ca(gV,gU,i){return gV.startState?gV.startState(gU,i):true}var fk=function(i,gU){this.pos=this.start=0;this.string=i;this.tabSize=gU||8;this.lastColumnPos=this.lastColumnValue=0;this.lineStart=0};fk.prototype.eol=function(){return this.pos>=this.string.length};fk.prototype.sol=function(){return this.pos==this.lineStart};fk.prototype.peek=function(){return this.string.charAt(this.pos)||undefined};fk.prototype.next=function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++)}};fk.prototype.eat=function(i){var gV=this.string.charAt(this.pos);var gU;if(typeof i=="string"){gU=gV==i}else{gU=gV&&(i.test?i.test(gV):i(gV))}if(gU){++this.pos;return gV}};fk.prototype.eatWhile=function(i){var gU=this.pos;while(this.eat(i)){}return this.pos>gU};fk.prototype.eatSpace=function(){var gU=this;var i=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++gU.pos}return this.pos>i};fk.prototype.skipToEnd=function(){this.pos=this.string.length};fk.prototype.skipTo=function(i){var gU=this.string.indexOf(i,this.pos);if(gU>-1){this.pos=gU;return true}};fk.prototype.backUp=function(i){this.pos-=i};fk.prototype.column=function(){if(this.lastColumnPos<this.start){this.lastColumnValue=b0(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue);this.lastColumnPos=this.start}return this.lastColumnValue-(this.lineStart?b0(this.string,this.lineStart,this.tabSize):0)};fk.prototype.indentation=function(){return b0(this.string,null,this.tabSize)-(this.lineStart?b0(this.string,this.lineStart,this.tabSize):0)};fk.prototype.match=function(gX,gU,i){if(typeof gX=="string"){var gY=function(gZ){return i?gZ.toLowerCase():gZ};var gW=this.string.substr(this.pos,gX.length);if(gY(gW)==gY(gX)){if(gU!==false){this.pos+=gX.length}return true}}else{var gV=this.string.slice(this.pos).match(gX);if(gV&&gV.index>0){return null}if(gV&&gU!==false){this.pos+=gV[0].length}return gV}};fk.prototype.current=function(){return this.string.slice(this.start,this.pos)};fk.prototype.hideFirstChars=function(gU,i){this.lineStart+=gU;try{return i()}finally{this.lineStart-=gU}};function f0(i,gV,gZ,gY){var gX=[i.state.modeGen],gW={};w(i,gV.text,i.doc.mode,gZ,function(g1,g2){return gX.push(g1,g2)},gW,gY);var gU=function(g4){var g2=i.state.overlays[g4],g3=1,g1=0;w(i,gV.text,g2.mode,true,function(g5,g7){var g9=g3;while(g1<g5){var g6=gX[g3];if(g6>g5){gX.splice(g3,1,g5,gX[g3+1],g6)}g3+=2;g1=Math.min(g5,g6)}if(!g7){return}if(g2.opaque){gX.splice(g9,g3-g9,g5,"overlay "+g7);g3=g9+2}else{for(;g9<g3;g9+=2){var g8=gX[g9+1];gX[g9+1]=(g8?g8+" ":"")+"overlay "+g7}}},gW)};for(var g0=0;g0<i.state.overlays.length;++g0){gU(g0)}return{styles:gX,classes:gW.bgClass||gW.textClass?gW:null}}function dl(gU,gV,gX){if(!gV.styles||gV.styles[0]!=gU.state.modeGen){var gW=dQ(gU,bW(gV));var i=f0(gU,gV,gV.text.length>gU.options.maxHighlightLength?cd(gU.doc.mode,gW):gW);gV.stateAfter=gW;gV.styles=i.styles;if(i.classes){gV.styleClasses=i.classes}else{if(gV.styleClasses){gV.styleClasses=null}}if(gX===gU.doc.frontier){gU.doc.frontier++}}return gV.styles}function dQ(i,gZ,gU){var gX=i.doc,gW=i.display;if(!gX.mode.startState){return true}var gY=cL(i,gZ,gU),gV=gY>gX.first&&fG(gX,gY-1).stateAfter;if(!gV){gV=ca(gX.mode)}else{gV=cd(gX.mode,gV)}gX.iter(gY,gZ,function(g0){dM(i,g0.text,gV);var g1=gY==gZ-1||gY%5==0||gY>=gW.viewFrom&&gY<gW.viewTo;g0.stateAfter=g1?cd(gX.mode,gV):null;++gY});if(gU){gX.frontier=gY}return gV}function dM(i,gY,gV,gU){var gX=i.doc.mode;var gW=new fk(gY,i.options.tabSize);gW.start=gW.pos=gU||0;if(gY==""){fQ(gX,gV)}while(!gW.eol()){eZ(gX,gW,gV);gW.start=gW.pos}}function fQ(gV,gU){if(gV.blankLine){return gV.blankLine(gU)}if(!gV.innerMode){return}var i=gI(gV,gU);if(i.mode.blankLine){return i.mode.blankLine(i.state)}}function eZ(gZ,gY,gX,gU){for(var gV=0;gV<10;gV++){if(gU){gU[0]=gI(gZ,gX).mode}var gW=gZ.token(gY,gX);if(gY.pos>gY.start){return gW}}throw new Error("Mode "+gZ.name+" failed to advance stream.")}function cD(g2,g0,gX,gW){var i=function(g5){return({start:g3.start,end:g3.pos,string:g3.current(),type:gV||null,state:g5?cd(g1.mode,gU):gU})};var g1=g2.doc,gY=g1.mode,gV;g0=ge(g1,g0);var g4=fG(g1,g0.line),gU=dQ(g2,g0.line,gX);var g3=new fk(g4.text,g2.options.tabSize),gZ;if(gW){gZ=[]}while((gW||g3.pos<g0.ch)&&!g3.eol()){g3.start=g3.pos;gV=eZ(gY,g3,gU);if(gW){gZ.push(i(true))}}return gW?gZ:i()}function dz(gV,gU){if(gV){for(;;){var i=gV.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!i){break}gV=gV.slice(0,i.index)+gV.slice(i.index+i[0].length);var gW=i[1]?"bgClass":"textClass";if(gU[gW]==null){gU[gW]=i[2]}else{if(!(new RegExp("(?:^|s)"+i[2]+"(?:$|s)")).test(gU[gW])){gU[gW]+=" "+i[2]}}}}return gV}function w(g3,g5,gY,gU,gZ,gW,gX){var gV=gY.flattenSpans;if(gV==null){gV=g3.options.flattenSpans}var g1=0,g0=null;var g4=new fk(g5,g3.options.tabSize),i;var g7=g3.options.addModeClass&&[null];if(g5==""){dz(fQ(gY,gU),gW)}while(!g4.eol()){if(g4.pos>g3.options.maxHighlightLength){gV=false;if(gX){dM(g3,g5,gU,g4.pos)}g4.pos=g5.length;i=null}else{i=dz(eZ(gY,g4,gU,g7),gW)}if(g7){var g6=g7[0].name;if(g6){i="m-"+(i?g6+" "+i:g6)}}if(!gV||g0!=i){while(g1<g4.start){g1=Math.min(g4.start,g1+5000);gZ(g1,g0)}g0=i}g4.start=g4.pos}while(g1<g4.pos){var g2=Math.min(g4.pos,g1+5000);gZ(g2,g0);g1=g2}}function cL(gZ,i,gW){var gU,gX,gY=gZ.doc;var gV=gW?-1:i-(gZ.doc.mode.innerMode?1000:100);for(var g2=i;g2>gV;--g2){if(g2<=gY.first){return gY.first}var g1=fG(gY,g2-1);if(g1.stateAfter&&(!gW||g2<=gY.frontier)){return g2}var g0=b0(g1.text,null,gZ.options.tabSize);if(gX==null||gU>g0){gX=g2-1;gU=g0}}return gX}var gG=function(gV,gU,i){this.text=gV;dg(this,gU);this.height=i?i(this):1};gG.prototype.lineNo=function(){return bW(this)};bI(gG);function eH(gU,gX,gV,i){gU.text=gX;if(gU.stateAfter){gU.stateAfter=null}if(gU.styles){gU.styles=null}if(gU.order!=null){gU.order=null}gJ(gU);dg(gU,gV);var gW=i?i(gU):1;if(gW!=gU.height){gH(gU,gW)}}function bK(i){i.parent=null;gJ(i)}var eb={};var cc={};function fn(gV,gU){if(!gV||/^\s*$/.test(gV)){return null}var i=gU.addModeClass?cc:eb;return i[gV]||(i[gV]=gV.replace(/\S+/g,"cm-$&"))}function fi(g0,gZ){var gY=gC("span",null,null,dd?"padding-right: .1px":null);var gX={pre:gC("pre",[gY],"CodeMirror-line"),content:gY,col:0,pos:0,cm:g0,trailingSpace:false,splitSpaces:(dY||dd)&&g0.getOption("lineWrapping")};gY.setAttribute("role","presentation");gX.pre.setAttribute("role","presentation");gZ.measure={};for(var gW=0;gW<=(gZ.rest?gZ.rest.length:0);gW++){var g2=gW?gZ.rest[gW-1]:gZ.line,gV=(void 0);gX.pos=0;gX.addToken=t;if(bX(g0.display.measure)&&(gV=a(g2,g0.doc.direction))){gX.addToken=V(gX.addToken,gV)}gX.map=[];var gU=gZ!=g0.display.externalMeasured&&bW(g2);bv(g2,gX,dl(g0,g2,gU));if(g2.styleClasses){if(g2.styleClasses.bgClass){gX.bgClass=gs(g2.styleClasses.bgClass,gX.bgClass||"")}if(g2.styleClasses.textClass){gX.textClass=gs(g2.styleClasses.textClass,gX.textClass||"")}}if(gX.map.length==0){gX.map.push(0,0,gX.content.appendChild(bu(g0.display.measure)))}if(gW==0){gZ.measure.map=gX.map;gZ.measure.cache={}}else{(gZ.measure.maps||(gZ.measure.maps=[])).push(gX.map);(gZ.measure.caches||(gZ.measure.caches=[])).push({})}}if(dd){var g1=gX.content.lastChild;if(/\bcm-tab\b/.test(g1.className)||(g1.querySelector&&g1.querySelector(".cm-tab"))){gX.content.className="cm-tab-wrap-hack"}}aG(g0,"renderLine",g0,gZ.line,gX.pre);if(gX.pre.className){gX.textClass=gs(gX.pre.className,gX.textClass||"")}return gX}function fF(gU){var i=gC("span","\u2022","cm-invalidchar");i.title="\\u"+gU.charCodeAt(0).toString(16);i.setAttribute("aria-label",i.title);return i}function t(g4,gZ,g9,g6,g2,hc,gY){if(!gZ){return}var g8=g4.splitSpaces?cS(gZ,g4.trailingSpace):gZ;var i=g4.cm.state.specialChars,gU=false;var g7;if(!i.test(gZ)){g4.col+=gZ.length;g7=document.createTextNode(g8);g4.map.push(g4.pos,g4.pos+gZ.length,g7);if(dY&&l<9){gU=true}g4.pos+=gZ.length}else{g7=document.createDocumentFragment();var gW=0;while(true){i.lastIndex=gW;var g5=i.exec(gZ);var hb=g5?g5.index-gW:gZ.length-gW;if(hb){var g1=document.createTextNode(g8.slice(gW,gW+hb));if(dY&&l<9){g7.appendChild(gC("span",[g1]))}else{g7.appendChild(g1)}g4.map.push(g4.pos,g4.pos+hb,g1);g4.col+=hb;g4.pos+=hb}if(!g5){break}gW+=hb+1;var ha=(void 0);if(g5[0]=="\t"){var g3=g4.cm.options.tabSize,g0=g3-g4.col%g3;ha=g7.appendChild(gC("span",cC(g0),"cm-tab"));ha.setAttribute("role","presentation");ha.setAttribute("cm-text","\t");g4.col+=g0}else{if(g5[0]=="\r"||g5[0]=="\n"){ha=g7.appendChild(gC("span",g5[0]=="\r"?"\u240d":"\u2424","cm-invalidchar"));ha.setAttribute("cm-text",g5[0]);g4.col+=1}else{ha=g4.cm.options.specialCharPlaceholder(g5[0]);ha.setAttribute("cm-text",g5[0]);if(dY&&l<9){g7.appendChild(gC("span",[ha]))}else{g7.appendChild(ha)}g4.col+=1}}g4.map.push(g4.pos,g4.pos+1,ha);g4.pos++}}g4.trailingSpace=g8.charCodeAt(gZ.length-1)==32;if(g9||g6||g2||gU||gY){var gV=g9||"";if(g6){gV+=g6}if(g2){gV+=g2}var gX=gC("span",[g7],gV,gY);if(hc){gX.title=hc}return g4.content.appendChild(gX)}g4.content.appendChild(g7)}function cS(gZ,gY){if(gZ.length>1&&!/  /.test(gZ)){return gZ}var gV=gY,gU="";for(var gW=0;gW<gZ.length;gW++){var gX=gZ.charAt(gW);if(gX==" "&&gV&&(gW==gZ.length-1||gZ.charCodeAt(gW+1)==32)){gX="\u00a0"}gU+=gX;gV=gX==" "}return gU}function V(gU,i){return function(g2,g4,gV,gZ,g5,g3,g1){gV=gV?gV+" cm-force-border":"cm-force-border";var gW=g2.pos,gY=gW+g4.length;for(;;){var gX=(void 0);for(var g0=0;g0<i.length;g0++){gX=i[g0];if(gX.to>gW&&gX.from<=gW){break}}if(gX.to>=gY){return gU(g2,g4,gV,gZ,g5,g3,g1)}gU(g2,g4.slice(0,gX.to-gW),gV,gZ,null,g3,g1);gZ=null;g4=g4.slice(gX.to-gW);gW=gX.to}}}function af(gU,gW,i,gV){var gX=!gV&&i.widgetNode;if(gX){gU.map.push(gU.pos,gU.pos+gW,gX)}if(!gV&&gU.cm.display.input.needsContentAttribute){if(!gX){gX=gU.content.appendChild(document.createElement("span"))}gX.setAttribute("cm-marker",i.id)}if(gX){gU.cm.display.input.setUneditable(gX);gU.content.appendChild(gX)}gU.pos+=gW;gU.trailingSpace=false}function bv(g5,hc,g4){var gZ=g5.markedSpans,g2=g5.text,ha=0;if(!gZ){for(var g0=1;g0<g4.length;g0+=2){hc.addToken(hc,g2.slice(ha,ha=g4[g0]),fn(g4[g0+1],hc.cm.options))}return}var hg=g2.length,gY=0,hf=1,g8="",hh,g6;var hl=0,gU,hk,g9,hm,gW;for(;;){if(hl==gY){gU=hk=g9=hm=g6="";gW=null;hl=Infinity;var g1=[],g3=(void 0);for(var hd=0;hd<gZ.length;++hd){var he=gZ[hd],hb=he.marker;if(hb.type=="bookmark"&&he.from==gY&&hb.widgetNode){g1.push(hb)}else{if(he.from<=gY&&(he.to==null||he.to>gY||hb.collapsed&&he.to==gY&&he.from==gY)){if(he.to!=null&&he.to!=gY&&hl>he.to){hl=he.to;hk=""}if(hb.className){gU+=" "+hb.className}if(hb.css){g6=(g6?g6+";":"")+hb.css}if(hb.startStyle&&he.from==gY){g9+=" "+hb.startStyle}if(hb.endStyle&&he.to==hl){(g3||(g3=[])).push(hb.endStyle,he.to)}if(hb.title&&!hm){hm=hb.title}if(hb.collapsed&&(!gW||d6(gW.marker,hb)<0)){gW=he}}else{if(he.from>gY&&hl>he.from){hl=he.from}}}}if(g3){for(var hj=0;hj<g3.length;hj+=2){if(g3[hj+1]==hl){hk+=" "+g3[hj]}}}if(!gW||gW.from==gY){for(var hi=0;hi<g1.length;++hi){af(hc,0,g1[hi])}}if(gW&&(gW.from||0)==gY){af(hc,(gW.to==null?hg+1:gW.to)-gY,gW.marker,gW.from==null);if(gW.to==null){return}if(gW.to==gY){gW=false}}}if(gY>=hg){break}var g7=Math.min(hg,hl);while(true){if(g8){var gV=gY+g8.length;if(!gW){var gX=gV>g7?g8.slice(0,g7-gY):g8;hc.addToken(hc,gX,hh?hh+gU:gU,g9,gY+gX.length==hl?hk:"",hm,g6)}if(gV>=g7){g8=g8.slice(g7-gY);gY=g7;break}gY=gV;g9=""}g8=g2.slice(ha,ha=g4[hf++]);hh=fn(g4[hf++],hc.cm.options)}}}function bD(gV,i,gU){this.line=i;this.rest=g(i);this.size=this.rest?bW(f9(this.rest))-gU+1:1;this.node=this.text=null;this.hidden=fW(gV,i)}function fm(i,gZ,gY){var gX=[],gV;for(var gW=gZ;gW<gY;gW=gV){var gU=new bD(i.doc,fG(i.doc,gW),gW);gV=gW+gU.size;gX.push(gU)}return gX}var bw=null;function eU(i){if(bw){bw.ops.push(i)}else{i.ownsGroup=bw={ops:[i],delayedCallbacks:[]}}}function c7(gX){var gW=gX.delayedCallbacks,gV=0;do{for(;gV<gW.length;gV++){gW[gV].call(null)}for(var gU=0;gU<gX.ops.length;gU++){var gY=gX.ops[gU];if(gY.cursorActivityHandlers){while(gY.cursorActivityCalled<gY.cursorActivityHandlers.length){gY.cursorActivityHandlers[gY.cursorActivityCalled++].call(null,gY.cm)}}}}while(gV<gW.length)}function b7(gV,gU){var i=gV.ownsGroup;if(!i){return}try{c7(i)}finally{bw=null;gU(i)}}var bH=null;function ag(g0,gY){var gU=eE(g0,gY);if(!gU.length){return}var gW=Array.prototype.slice.call(arguments,2),gZ;if(bw){gZ=bw.delayedCallbacks}else{if(bH){gZ=bH}else{gZ=bH=[];setTimeout(aO,0)}}var gV=function(g1){gZ.push(function(){return gU[g1].apply(null,gW)})};for(var gX=0;gX<gU.length;++gX){gV(gX)}}function aO(){var gU=bH;bH=null;for(var gV=0;gV<gU.length;++gV){gU[gV]()}}function ad(i,gV,gX,gY){for(var gU=0;gU<gV.changes.length;gU++){var gW=gV.changes[gU];if(gW=="text"){fM(i,gV)}else{if(gW=="gutter"){dv(i,gV,gX,gY)}else{if(gW=="class"){dU(i,gV)}else{if(gW=="widget"){ap(i,gV,gY)}}}}}gV.changes=null}function gb(i){if(i.node==i.text){i.node=gC("div",null,null,"position: relative");if(i.text.parentNode){i.text.parentNode.replaceChild(i.node,i.text)}i.node.appendChild(i.text);if(dY&&l<8){i.node.style.zIndex=2}}return i.node}function eQ(i,gV){var gU=gV.bgClass?gV.bgClass+" "+(gV.line.bgClass||""):gV.line.bgClass;if(gU){gU+=" CodeMirror-linebackground"}if(gV.background){if(gU){gV.background.className=gU}else{gV.background.parentNode.removeChild(gV.background);gV.background=null}}else{if(gU){var gW=gb(gV);gV.background=gW.insertBefore(gC("div",null,gU),gW.firstChild);i.display.input.setUneditable(gV.background)}}}function ea(i,gU){var gV=i.display.externalMeasured;if(gV&&gV.line==gU.line){i.display.externalMeasured=null;gU.measure=gV.measure;return gV.built}return fi(i,gU)}function fM(i,gW){var gU=gW.text.className;var gV=ea(i,gW);if(gW.text==gW.node){gW.node=gV.pre}gW.text.parentNode.replaceChild(gV.pre,gW.text);gW.text=gV.pre;if(gV.bgClass!=gW.bgClass||gV.textClass!=gW.textClass){gW.bgClass=gV.bgClass;gW.textClass=gV.textClass;dU(i,gW)}else{if(gU){gW.text.className=gU}}}function dU(gU,gV){eQ(gU,gV);if(gV.line.wrapClass){gb(gV).className=gV.line.wrapClass}else{if(gV.node!=gV.text){gV.node.className=""}}var i=gV.textClass?gV.textClass+" "+(gV.line.textClass||""):gV.line.textClass;gV.text.className=i||""}function dv(g1,gZ,gY,g0){if(gZ.gutter){gZ.node.removeChild(gZ.gutter);gZ.gutter=null}if(gZ.gutterBackground){gZ.node.removeChild(gZ.gutterBackground);gZ.gutterBackground=null}if(gZ.line.gutterClass){var gU=gb(gZ);gZ.gutterBackground=gC("div",null,"CodeMirror-gutter-background "+gZ.line.gutterClass,("left: "+(g1.options.fixedGutter?g0.fixedPos:-g0.gutterTotalWidth)+"px; width: "+(g0.gutterTotalWidth)+"px"));g1.display.input.setUneditable(gZ.gutterBackground);gU.insertBefore(gZ.gutterBackground,gZ.text)}var gW=gZ.line.gutterMarkers;if(g1.options.lineNumbers||gW){var g2=gb(gZ);var gX=gZ.gutter=gC("div",null,"CodeMirror-gutter-wrapper",("left: "+(g1.options.fixedGutter?g0.fixedPos:-g0.gutterTotalWidth)+"px"));g1.display.input.setUneditable(gX);g2.insertBefore(gX,gZ.text);if(gZ.line.gutterClass){gX.className+=" "+gZ.line.gutterClass}if(g1.options.lineNumbers&&(!gW||!gW["CodeMirror-linenumbers"])){gZ.lineNumber=gX.appendChild(gC("div",eN(g1.options,gY),"CodeMirror-linenumber CodeMirror-gutter-elt",("left: "+(g0.gutterLeft["CodeMirror-linenumbers"])+"px; width: "+(g1.display.lineNumInnerWidth)+"px")))}if(gW){for(var gV=0;gV<g1.options.gutters.length;++gV){var i=g1.options.gutters[gV],g3=gW.hasOwnProperty(i)&&gW[i];if(g3){gX.appendChild(gC("div",[g3],"CodeMirror-gutter-elt",("left: "+(g0.gutterLeft[i])+"px; width: "+(g0.gutterWidth[i])+"px")))}}}}}function ap(i,gU,gX){if(gU.alignable){gU.alignable=null}for(var gW=gU.node.firstChild,gV=(void 0);gW;gW=gV){gV=gW.nextSibling;if(gW.className=="CodeMirror-linewidget"){gU.node.removeChild(gW)}}fT(i,gU,gX)}function aH(i,gV,gW,gX){var gU=ea(i,gV);gV.text=gV.node=gU.pre;if(gU.bgClass){gV.bgClass=gU.bgClass}if(gU.textClass){gV.textClass=gU.textClass}dU(i,gV);dv(i,gV,gW,gX);fT(i,gV,gX);return gV.node}function fT(gU,gW,gX){gF(gU,gW.line,gW,gX,true);if(gW.rest){for(var gV=0;gV<gW.rest.length;gV++){gF(gU,gW.rest[gV],gW,gX,false)}}}function gF(g2,g3,gZ,g1,gX){if(!g3.widgets){return}var gU=gb(gZ);for(var gW=0,g0=g3.widgets;gW<g0.length;++gW){var gY=g0[gW],gV=gC("div",[gY.node],"CodeMirror-linewidget");if(!gY.handleMouseEvents){gV.setAttribute("cm-ignore-events","true")}bO(gY,gV,gZ,g1);g2.display.input.setUneditable(gV);if(gX&&gY.above){gU.insertBefore(gV,gZ.gutter||gZ.text)}else{gU.appendChild(gV)}ag(gY,"redraw")}}function bO(gW,gV,i,gX){if(gW.noHScroll){(i.alignable||(i.alignable=[])).push(gV);var gU=gX.wrapperWidth;gV.style.left=gX.fixedPos+"px";if(!gW.coverGutter){gU-=gX.gutterTotalWidth;gV.style.paddingLeft=gX.gutterTotalWidth+"px"}gV.style.width=gU+"px"}if(gW.coverGutter){gV.style.zIndex=5;gV.style.position="relative";if(!gW.noHScroll){gV.style.marginLeft=-gX.gutterTotalWidth+"px"}}}function db(gV){if(gV.height!=null){return gV.height}var i=gV.doc.cm;if(!i){return 0}if(!gL(document.body,gV.node)){var gU="position: relative;";if(gV.coverGutter){gU+="margin-left: -"+i.display.gutters.offsetWidth+"px;"}if(gV.noHScroll){gU+="width: "+i.display.wrapper.clientWidth+"px;"}b1(i.display.measure,gC("div",[gV.node],null,gU))}return gV.height=gV.node.parentNode.offsetHeight}function be(gU,i){for(var gV=M(i);gV!=gU.wrapper;gV=gV.parentNode){if(!gV||(gV.nodeType==1&&gV.getAttribute("cm-ignore-events")=="true")||(gV.parentNode==gU.sizer&&gV!=gU.mover)){return true}}}function fA(i){return i.lineSpace.offsetTop}function bR(i){return i.mover.offsetHeight-i.lineSpace.offsetHeight}function fw(gW){if(gW.cachedPaddingH){return gW.cachedPaddingH}var gV=b1(gW.measure,gC("pre","x"));var i=window.getComputedStyle?window.getComputedStyle(gV):gV.currentStyle;var gU={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};if(!isNaN(gU.left)&&!isNaN(gU.right)){gW.cachedPaddingH=gU}return gU}function c6(i){return dX-i.display.nativeBarWidth}function dB(i){return i.display.scroller.clientWidth-c6(i)-i.display.barWidth}function c8(i){return i.display.scroller.clientHeight-c6(i)-i.display.barHeight}function cs(g1,gX,g0){var gW=g1.options.lineWrapping;var gY=gW&&dB(g1);if(!gX.measure.heights||gW&&gX.measure.width!=gY){var gZ=gX.measure.heights=[];if(gW){gX.measure.width=gY;var g3=gX.text.firstChild.getClientRects();for(var gU=0;gU<g3.length-1;gU++){var g2=g3[gU],gV=g3[gU+1];if(Math.abs(g2.bottom-gV.bottom)>2){gZ.push((g2.bottom+gV.top)/2-g0.top)}}}gZ.push(g0.bottom-g0.top)}}function cG(gW,gU,gX){if(gW.line==gU){return{map:gW.measure.map,cache:gW.measure.cache}}for(var gV=0;gV<gW.rest.length;gV++){if(gW.rest[gV]==gU){return{map:gW.measure.maps[gV],cache:gW.measure.caches[gV]}}}for(var gY=0;gY<gW.rest.length;gY++){if(bW(gW.rest[gY])>gX){return{map:gW.measure.maps[gY],cache:gW.measure.caches[gY],before:true}}}}function df(i,gV){gV=y(gV);var gX=bW(gV);var gU=i.display.externalMeasured=new bD(i.doc,gV,gX);gU.lineN=gX;var gW=gU.built=fi(i,gU);gU.text=gW.pre;b1(i.display.lineMeasure,gW.pre);return gU}function ez(i,gU,gW,gV){return D(i,a8(i,gU),gW,gV)}function fD(i,gV){if(gV>=i.display.viewFrom&&gV<i.display.viewTo){return i.display.view[dG(i,gV)]}var gU=i.display.externalMeasured;if(gU&&gV>=gU.lineN&&gV<gU.lineN+gU.size){return gU}}function a8(i,gV){var gW=bW(gV);var gU=fD(i,gW);if(gU&&!gU.text){gU=null}else{if(gU&&gU.changes){ad(i,gU,gW,fE(i));i.curOp.forceUpdate=true}}if(!gU){gU=df(i,gV)}var gX=cG(gU,gV,gW);return{line:gV,view:gU,rect:null,map:gX.map,cache:gX.cache,before:gX.before,hasHeights:false}}function D(i,gZ,gX,gU,gW){if(gZ.before){gX=-1}var gV=gX+(gU||""),gY;if(gZ.cache.hasOwnProperty(gV)){gY=gZ.cache[gV]}else{if(!gZ.rect){gZ.rect=gZ.view.text.getBoundingClientRect()}if(!gZ.hasHeights){cs(i,gZ.view,gZ.rect);gZ.hasHeights=true}gY=k(i,gZ,gX,gU);if(!gY.bogus){gZ.cache[gV]=gY}}return{left:gY.left,right:gY.right,top:gW?gY.rtop:gY.top,bottom:gW?gY.rbottom:gY.bottom}}var eY={left:0,right:0,top:0,bottom:0};function aM(gV,gU,g1){var gX,gW,gZ,g2,gY,g3;for(var g0=0;g0<gV.length;g0+=3){gY=gV[g0];g3=gV[g0+1];if(gU<gY){gW=0;gZ=1;g2="left"}else{if(gU<g3){gW=gU-gY;gZ=gW+1}else{if(g0==gV.length-3||gU==g3&&gV[g0+3]>gU){gZ=g3-gY;gW=gZ-1;if(gU>=g3){g2="right"}}}}if(gW!=null){gX=gV[g0+2];if(gY==g3&&g1==(gX.insertLeft?"left":"right")){g2=g1}if(g1=="left"&&gW==0){while(g0&&gV[g0-2]==gV[g0-3]&&gV[g0-1].insertLeft){gX=gV[(g0-=3)+2];g2="left"}}if(g1=="right"&&gW==g3-gY){while(g0<gV.length-3&&gV[g0+3]==gV[g0+4]&&!gV[g0+5].insertLeft){gX=gV[(g0+=3)+2];g2="right"}}break}}return{node:gX,start:gW,end:gZ,collapse:g2,coverStart:gY,coverEnd:g3}}function fj(gV,gU){var gX=eY;if(gU=="left"){for(var gW=0;gW<gV.length;gW++){if((gX=gV[gW]).left!=gX.right){break}}}else{for(var gY=gV.length-1;gY>=0;gY--){if((gX=gV[gY]).left!=gX.right){break}}}return gX}function k(g2,hc,g5,gZ){var g3=aM(hc.map,g5,gZ);var ha=g3.node,gY=g3.start,gX=g3.end,gU=g3.collapse;var gV;if(ha.nodeType==3){for(var g0=0;g0<4;g0++){while(gY&&fP(hc.line.text.charAt(g3.coverStart+gY))){--gY}while(g3.coverStart+gX<g3.coverEnd&&fP(hc.line.text.charAt(g3.coverStart+gX))){++gX}if(dY&&l<9&&gY==0&&gX==g3.coverEnd-g3.coverStart){gV=ha.parentNode.getBoundingClientRect()}else{gV=fj(cy(ha,gY,gX).getClientRects(),gZ)}if(gV.left||gV.right||gY==0){break}gX=gY;gY=gY-1;gU="right"}if(dY&&l<11){gV=fd(g2.display.measure,gV)}}else{if(gY>0){gU=gZ="right"}var gW;if(g2.options.lineWrapping&&(gW=ha.getClientRects()).length>1){gV=gW[gZ=="right"?gW.length-1:0]}else{gV=ha.getBoundingClientRect()}}if(dY&&l<9&&!gY&&(!gV||!gV.left&&!gV.right)){var g1=ha.parentNode.getClientRects()[0];if(g1){gV={left:g1.left,right:g1.left+dR(g2.display),top:g1.top,bottom:g1.bottom}}else{gV=eY}}var g8=gV.top-hc.rect.top,g6=gV.bottom-hc.rect.top;var he=(g8+g6)/2;var hd=hc.view.measure.heights;var hb=0;for(;hb<hd.length-1;hb++){if(he<hd[hb]){break}}var g9=hb?hd[hb-1]:0,g7=hd[hb];var g4={left:(gU=="right"?gV.right:gV.left)-hc.rect.left,right:(gU=="left"?gV.left:gV.right)-hc.rect.left,top:g9,bottom:g7};if(!gV.left&&!gV.right){g4.bogus=true}if(!g2.options.singleCursorHeightPerLine){g4.rtop=g8;g4.rbottom=g6}return g4}function fd(gV,gW){if(!window.screen||screen.logicalXDPI==null||screen.logicalXDPI==screen.deviceXDPI||!aN(gV)){return gW}var gU=screen.logicalXDPI/screen.deviceXDPI;var i=screen.logicalYDPI/screen.deviceYDPI;return{left:gW.left*gU,right:gW.right*gU,top:gW.top*i,bottom:gW.bottom*i}}function aw(gV){if(gV.measure){gV.measure.cache={};gV.measure.heights=null;if(gV.rest){for(var gU=0;gU<gV.rest.length;gU++){gV.measure.caches[gU]={}}}}}function aR(gU){gU.display.externalMeasure=null;ei(gU.display.lineMeasure);for(var gV=0;gV<gU.display.view.length;gV++){aw(gU.display.view[gV])}}function al(i){aR(i);i.display.cachedCharWidth=i.display.cachedTextHeight=i.display.cachedPaddingH=null;if(!i.options.lineWrapping){i.display.maxLineChanged=true}i.display.lineNumChars=null}function cH(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function cF(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function fg(g1,gY,g0,gV,gX){if(!gX&&gY.widgets){for(var gW=0;gW<gY.widgets.length;++gW){if(gY.widgets[gW].above){var g3=db(gY.widgets[gW]);g0.top+=g3;g0.bottom+=g3}}}if(gV=="line"){return g0}if(!gV){gV="local"}var gZ=bV(gY);if(gV=="local"){gZ+=fA(g1.display)}else{gZ-=g1.display.viewOffset}if(gV=="page"||gV=="window"){var gU=g1.display.lineSpace.getBoundingClientRect();gZ+=gU.top+(gV=="window"?0:cF());var g2=gU.left+(gV=="window"?0:cH());g0.left+=g2;g0.right+=g2}g0.top+=gZ;g0.bottom+=gZ;return g0}function gP(gU,gX,gV){if(gV=="div"){return gX}var gZ=gX.left,gY=gX.top;if(gV=="page"){gZ-=cH();gY-=cF()}else{if(gV=="local"||!gV){var gW=gU.display.sizer.getBoundingClientRect();gZ+=gW.left;gY+=gW.top}}var i=gU.display.lineSpace.getBoundingClientRect();return{left:gZ-i.left,top:gY-i.top}}function cX(i,gX,gW,gV,gU){if(!gV){gV=fG(i.doc,gX.line)}return fg(i,gV,ez(i,gV,gX.ch,gU),gW)}function d9(g4,g2,gV,gZ,g6,g0){gZ=gZ||fG(g4.doc,g2.line);if(!g6){g6=a8(g4,gZ)}function gX(g9,g8){var g7=D(g4,g6,g9,g8?"right":"left",g0);if(g8){g7.left=g7.right}else{g7.right=g7.left}return fg(g4,gZ,g7,gV)}var gY=a(gZ,g4.doc.direction),i=g2.ch,g3=g2.sticky;if(i>=gZ.text.length){i=gZ.text.length;g3="before"}else{if(i<=0){i=0;g3="after"}}if(!gY){return gX(g3=="before"?i-1:i,g3=="before")}function g5(ha,g7,hb){var g8=gY[g7],g9=(g8.level%2)!=0;return gX(hb?ha-1:ha,g9!=hb)}var gU=aJ(gY,i,g3);var g1=fu;var gW=g5(i,gU,g3=="before");if(g1!=null){gW.other=g5(i,g1,g3!="before")}return gW}function dV(i,gX){var gW=0;gX=ge(i.doc,gX);if(!i.options.lineWrapping){gW=dR(i.display)*gX.ch}var gU=fG(i.doc,gX.line);var gV=bV(gU)+fA(i.display);return{left:gW,right:gW,top:gV,bottom:gV+gU.height}}function gA(i,gU,gW,gV,gY){var gX=X(i,gU,gW);gX.xRel=gY;if(gV){gX.outside=true}return gX}function gl(g0,gX,gW){var gZ=g0.doc;gW+=g0.display.viewOffset;if(gW<0){return gA(gZ.first,0,null,true,-1)}var gV=bQ(gZ,gW),g1=gZ.first+gZ.size-1;if(gV>g1){return gA(gZ.first+gZ.size-1,fG(gZ,g1).text.length,null,true,1)}if(gX<0){gX=0}var gU=fG(gZ,gV);for(;;){var g2=dc(g0,gU,gV,gX,gW);var gY=eR(gU);var i=gY&&gY.find(0,true);if(gY&&(g2.ch>i.from.ch||g2.ch==i.from.ch&&g2.xRel>0)){gV=bW(gU=i.to.line)}else{return g2}}}function bs(i,gV,gY,gZ){var gX=function(g0){return fg(i,gV,D(i,gY,g0),"line")};var gU=gV.text.length;var gW=cz(function(g0){return gX(g0-1).bottom<=gZ},gU,0);gU=cz(function(g0){return gX(g0).top>gZ},gW,gU);return{begin:gW,end:gU}}function br(i,gU,gW,gX){var gV=fg(i,gU,D(i,gW,gX),"line").top;return bs(i,gU,gW,gV)}function dc(gX,i,g0,gZ,gY){gY-=bV(i);var ha=0,gU=i.text.length;var g3=a8(gX,i);var gW;var g8=a(i,gX.doc.direction);if(g8){if(gX.options.lineWrapping){var g7;((g7=bs(gX,i,g3,gY),ha=g7.begin,gU=g7.end,g7))}gW=new X(g0,ha);var g5=d9(gX,gW,"line",i,g3).left;var g6=g5<gZ?1:-1;var g1,g4=g5-gZ,gV;do{g1=g4;gV=gW;gW=u(gX,i,gW,g6);if(gW==null||gW.ch<ha||gU<=(gW.sticky=="before"?gW.ch-1:gW.ch)){gW=gV;break}g4=d9(gX,gW,"line",i,g3).left-gZ}while((g6<0)!=(g4<0)&&(Math.abs(g4)<=Math.abs(g1)));if(Math.abs(g4)>Math.abs(g1)){if((g4<0)==(g1<0)){throw new Error("Broke out of infinite loop in coordsCharInner")}gW=gV}}else{var g2=cz(function(hb){var hc=fg(gX,i,D(gX,g3,hb),"line");if(hc.top>gY){gU=Math.min(hb,gU);return true}else{if(hc.bottom<=gY){return false}else{if(hc.left>gZ){return true}else{if(hc.right<gZ){return false}else{return(gZ-hc.left<hc.right-gZ)}}}}},ha,gU);g2=eC(i.text,g2,1);gW=new X(g0,g2,g2==gU?"before":"after")}var g9=d9(gX,gW,"line",i,g3);if(gY<g9.top||g9.bottom<gY){gW.outside=true}gW.xRel=gZ<g9.left?-1:(gZ>g9.right?1:0);return gW}var aI;function a1(gW){if(gW.cachedTextHeight!=null){return gW.cachedTextHeight}if(aI==null){aI=gC("pre");for(var gV=0;gV<49;++gV){aI.appendChild(document.createTextNode("x"));aI.appendChild(gC("br"))}aI.appendChild(document.createTextNode("x"))}b1(gW.measure,aI);var gU=aI.offsetHeight/50;if(gU>3){gW.cachedTextHeight=gU}ei(gW.measure);return gU||1}function dR(gX){if(gX.cachedCharWidth!=null){return gX.cachedCharWidth}var i=gC("span","xxxxxxxxxx");var gW=gC("pre",[i]);b1(gX.measure,gW);var gV=i.getBoundingClientRect(),gU=(gV.right-gV.left)/10;if(gU>2){gX.cachedCharWidth=gU}return gU||10}function fE(gU){var gZ=gU.display,gX={},gW={};var gY=gZ.gutters.clientLeft;for(var g0=gZ.gutters.firstChild,gV=0;g0;g0=g0.nextSibling,++gV){gX[gU.options.gutters[gV]]=g0.offsetLeft+g0.clientLeft+gY;gW[gU.options.gutters[gV]]=g0.clientWidth}return{fixedPos:ed(gZ),gutterTotalWidth:gZ.gutters.offsetWidth,gutterLeft:gX,gutterWidth:gW,wrapperWidth:gZ.wrapper.clientWidth}}function ed(i){return i.scroller.getBoundingClientRect().left-i.sizer.getBoundingClientRect().left}function bh(i){var gV=a1(i.display),gU=i.options.lineWrapping;var gW=gU&&Math.max(5,i.display.scroller.clientWidth/dR(i.display)-3);return function(gY){if(fW(i.doc,gY)){return 0}var gX=0;if(gY.widgets){for(var gZ=0;gZ<gY.widgets.length;gZ++){if(gY.widgets[gZ].height){gX+=gY.widgets[gZ].height}}}if(gU){return gX+(Math.ceil(gY.text.length/gW)||1)*gV}else{return gX+gV}}}function aa(i){var gV=i.doc,gU=bh(i);gV.iter(function(gW){var gX=gU(gW);if(gX!=gW.height){gH(gW,gX)}})}function cA(g2,gX,gU,gV){var gY=g2.display;if(!gU&&M(gX).getAttribute("cm-not-content")=="true"){return null}var g1,gZ,i=gY.lineSpace.getBoundingClientRect();try{g1=gX.clientX-i.left;gZ=gX.clientY-i.top}catch(gX){return null}var g0=gl(g2,g1,gZ),g3;if(gV&&g0.xRel==1&&(g3=fG(g2.doc,g0.line).text).length==g0.ch){var gW=b0(g3,g3.length,g2.options.tabSize)-g3.length;g0=X(g0.line,Math.max(0,Math.round((g1-fw(g2.display).left)/dR(g2.display))-gW))}return g0}function dG(gU,gX){if(gX>=gU.display.viewTo){return null}gX-=gU.display.viewFrom;if(gX<0){return null}var gV=gU.display.view;for(var gW=0;gW<gV.length;gW++){gX-=gV[gW].size;if(gX<0){return gW}}}function bL(i){i.display.input.showSelection(i.display.input.prepareSelection())}function gc(g1,gU){var g0=g1.doc,g2={};var gZ=g2.cursors=document.createDocumentFragment();var gV=g2.selection=document.createDocumentFragment();for(var gX=0;gX<g0.sel.ranges.length;gX++){if(gU===false&&gX==g0.sel.primIndex){continue}var gY=g0.sel.ranges[gX];if(gY.from().line>=g1.display.viewTo||gY.to().line<g1.display.viewFrom){continue}var gW=gY.empty();if(gW||g1.options.showCursorWhenSelecting){A(g1,gY.head,gZ)}if(!gW){bM(g1,gY,gV)}}return g2}function A(i,gW,gV){var gY=d9(i,gW,"div",null,null,!i.options.singleCursorHeightPerLine);var gX=gV.appendChild(gC("div","\u00a0","CodeMirror-cursor"));gX.style.left=gY.left+"px";gX.style.top=gY.top+"px";gX.style.height=Math.max(0,gY.bottom-gY.top)*i.options.cursorHeight+"px";if(gY.other){var gU=gV.appendChild(gC("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor"));gU.style.display="";gU.style.left=gY.other.left+"px";gU.style.top=gY.other.top+"px";gU.style.height=(gY.other.bottom-gY.other.top)*0.85+"px"}}function bM(gX,g3,gY){var g6=gX.display,ha=gX.doc;var i=document.createDocumentFragment();var g2=fw(gX.display),gW=g2.left;var g7=Math.max(g6.sizerWidth,dB(gX)-g6.sizer.offsetLeft)-g2.right;function g4(he,hd,hc,hb){if(hd<0){hd=0}hd=Math.round(hd);hb=Math.round(hb);i.appendChild(gC("div",null,"CodeMirror-selected",("position: absolute; left: "+he+"px;\n                             top: "+hd+"px; width: "+(hc==null?g7-he:hc)+"px;\n                             height: "+(hb-hd)+"px")))}function gU(hc,he,hh){var hd=fG(ha,hc);var hf=hd.text.length;var hi,hb;function hg(hk,hj){return cX(gX,X(hc,hk),"div",hd,hj)}el(a(hd,ha.direction),he||0,hh==null?hf:hh,function(hq,hp,hj){var hm=hg(hq,"left"),hn,ho,hl;if(hq==hp){hn=hm;ho=hl=hm.left}else{hn=hg(hp-1,"right");if(hj=="rtl"){var hk=hm;hm=hn;hn=hk}ho=hm.left;hl=hn.right}if(he==null&&hq==0){ho=gW}if(hn.top-hm.top>3){g4(ho,hm.top,null,hm.bottom);ho=gW;if(hm.bottom<hn.top){g4(ho,hm.bottom,null,hn.top)}}if(hh==null&&hp==hf){hl=g7}if(!hi||hm.top<hi.top||hm.top==hi.top&&hm.left<hi.left){hi=hm}if(!hb||hn.bottom>hb.bottom||hn.bottom==hb.bottom&&hn.right>hb.right){hb=hn}if(ho<gW+1){ho=gW}g4(ho,hn.top,hl-ho,hn.bottom)});return{start:hi,end:hb}}var g9=g3.from(),g8=g3.to();if(g9.line==g8.line){gU(g9.line,g9.ch,g8.ch)}else{var gV=fG(ha,g9.line),g0=fG(ha,g8.line);var gZ=y(gV)==y(g0);var g1=gU(g9.line,g9.ch,gZ?gV.text.length+1:null).end;var g5=gU(g8.line,gZ?0:null,g8.ch).start;if(gZ){if(g1.top<g5.top-2){g4(g1.right,g1.top,null,g1.bottom);g4(gW,g5.top,g5.left,g5.bottom)}else{g4(g1.right,g1.top,g5.left-g1.right,g1.bottom)}}if(g1.bottom<g5.top){g4(gW,g1.bottom,null,g5.top)}}gY.appendChild(i)}function p(i){if(!i.state.focused){return}var gV=i.display;clearInterval(gV.blinker);var gU=true;gV.cursorDiv.style.visibility="";if(i.options.cursorBlinkRate>0){gV.blinker=setInterval(function(){return gV.cursorDiv.style.visibility=(gU=!gU)?"":"hidden"},i.options.cursorBlinkRate)}else{if(i.options.cursorBlinkRate<0){gV.cursorDiv.style.visibility="hidden"}}}function s(i){if(!i.state.focused){i.display.input.focus();cO(i)}}function am(i){i.state.delayingBlurEvent=true;setTimeout(function(){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false;aY(i)}},100)}function cO(i,gU){if(i.state.delayingBlurEvent){i.state.delayingBlurEvent=false}if(i.options.readOnly=="nocursor"){return}if(!i.state.focused){aG(i,"focus",i,gU);i.state.focused=true;f3(i.display.wrapper,"CodeMirror-focused");if(!i.curOp&&i.display.selForContextMenu!=i.doc.sel){i.display.input.reset();if(dd){setTimeout(function(){return i.display.input.reset(true)},20)}}i.display.input.receivedFocus()}p(i)}function aY(i,gU){if(i.state.delayingBlurEvent){return}if(i.state.focused){aG(i,"blur",i,gU);i.state.focused=false;h(i.display.wrapper,"CodeMirror-focused")}clearInterval(i.display.blinker);setTimeout(function(){if(!i.state.focused){i.display.shift=false}},150)}function e2(g2){var g0=g2.display,g1=g0.view;if(!g0.alignWidgets&&(!g0.gutters.firstChild||!g2.options.fixedGutter)){return}var gY=ed(g0)-g0.scroller.scrollLeft+g2.doc.scrollLeft;var gU=g0.gutters.offsetWidth,gV=gY+"px";for(var gX=0;gX<g1.length;gX++){if(!g1[gX].hidden){if(g2.options.fixedGutter){if(g1[gX].gutter){g1[gX].gutter.style.left=gV}if(g1[gX].gutterBackground){g1[gX].gutterBackground.style.left=gV}}var gZ=g1[gX].alignable;if(gZ){for(var gW=0;gW<gZ.length;gW++){gZ[gW].style.left=gV}}}}if(g2.options.fixedGutter){g0.gutters.style.left=(gY+gU)+"px"}}function em(i){if(!i.options.lineNumbers){return false}var gY=i.doc,gU=eN(i.options,gY.first+gY.size-1),gX=i.display;if(gU.length!=gX.lineNumChars){var gZ=gX.measure.appendChild(gC("div",[gC("div",gU)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var gV=gZ.firstChild.offsetWidth,gW=gZ.offsetWidth-gV;gX.lineGutter.style.width="";gX.lineNumInnerWidth=Math.max(gV,gX.lineGutter.offsetWidth-gW)+1;gX.lineNumWidth=gX.lineNumInnerWidth+gW;gX.lineNumChars=gX.lineNumInnerWidth?gU.length:-1;gX.lineGutter.style.width=gX.lineNumWidth+"px";dh(i);return true}return false}function bc(g1){var gZ=g1.display;var gV=gZ.lineDiv.offsetTop;for(var gW=0;gW<gZ.view.length;gW++){var g2=gZ.view[gW],g3=(void 0);if(g2.hidden){continue}if(dY&&l<8){var gY=g2.node.offsetTop+g2.node.offsetHeight;g3=gY-gV;gV=gY}else{var gX=g2.node.getBoundingClientRect();g3=gX.bottom-gX.top}var g0=g2.line.height-g3;if(g3<2){g3=a1(gZ)}if(g0>0.001||g0<-0.001){gH(g2.line,g3);cl(g2.line);if(g2.rest){for(var gU=0;gU<g2.rest.length;gU++){cl(g2.rest[gU])}}}}}function cl(gU){if(gU.widgets){for(var gV=0;gV<gU.widgets.length;++gV){gU.widgets[gV].height=gU.widgets[gV].node.parentNode.offsetHeight}}}function cg(gW,g0,gV){var gX=gV&&gV.top!=null?Math.max(0,gV.top):gW.scroller.scrollTop;gX=Math.floor(gX-fA(gW));var i=gV&&gV.bottom!=null?gV.bottom:gX+gW.wrapper.clientHeight;var gY=bQ(g0,gX),gZ=bQ(g0,i);if(gV&&gV.ensure){var gU=gV.ensure.from.line,g1=gV.ensure.to.line;if(gU<gY){gY=gU;gZ=bQ(g0,bV(fG(g0,gU))+gW.wrapper.clientHeight)}else{if(Math.min(g1,g0.lastLine())>=gZ){gY=bQ(g0,bV(fG(g0,g1))-gW.wrapper.clientHeight);gZ=g1}}}return{from:gY,to:Math.max(gZ,gY+1)}}function P(i,gU){if(Math.abs(i.doc.scrollTop-gU)<2){return}i.doc.scrollTop=gU;if(!cB){d8(i,{top:gU})}if(i.display.scroller.scrollTop!=gU){i.display.scroller.scrollTop=gU}i.display.scrollbars.setScrollTop(gU);if(cB){d8(i)}ew(i,100)}function bN(i,gV,gU){if(gU?gV==i.doc.scrollLeft:Math.abs(i.doc.scrollLeft-gV)<2){return}gV=Math.min(gV,i.display.scroller.scrollWidth-i.display.scroller.clientWidth);i.doc.scrollLeft=gV;e2(i);if(i.display.scroller.scrollLeft!=gV){i.display.scroller.scrollLeft=gV}i.display.scrollbars.setScrollLeft(gV)}var fN=0;var cr=null;if(dY){cr=-0.53}else{if(cB){cr=15}else{if(ds){cr=-0.7}else{if(aE){cr=-1/3}}}}function c4(gV){var gU=gV.wheelDeltaX,i=gV.wheelDeltaY;if(gU==null&&gV.detail&&gV.axis==gV.HORIZONTAL_AXIS){gU=gV.detail}if(i==null&&gV.detail&&gV.axis==gV.VERTICAL_AXIS){i=gV.detail}else{if(i==null){i=gV.wheelDelta}}return{x:gU,y:i}}function aB(i){var gU=c4(i);gU.x*=cr;gU.y*=cr;return gU}function c(g4,gY){var g6=c4(gY),g8=g6.x,g7=g6.y;var g0=g4.display,g3=g0.scroller;var gX=g3.scrollWidth>g3.clientWidth;var gW=g3.scrollHeight>g3.clientHeight;if(!(g8&&gX||g7&&gW)){return}if(g7&&ch&&dd){outer:for(var g5=gY.target,g2=g0.view;g5!=g3;g5=g5.parentNode){for(var gV=0;gV<g2.length;gV++){if(g2[gV].node==g5){g4.display.currentWheelTarget=g5;break outer}}}}if(g8&&!cB&&!ej&&cr!=null){if(g7&&gW){P(g4,Math.max(0,Math.min(g3.scrollTop+g7*cr,g3.scrollHeight-g3.clientHeight)))}bN(g4,Math.max(0,Math.min(g3.scrollLeft+g8*cr,g3.scrollWidth-g3.clientWidth)));if(!g7||(g7&&gW)){cT(gY)}g0.wheelStartX=null;return}if(g7&&cr!=null){var gU=g7*cr;var g1=g4.doc.scrollTop,gZ=g1+g0.wrapper.clientHeight;if(gU<0){g1=Math.max(0,g1+gU-50)}else{gZ=Math.min(g4.doc.height,gZ+gU+50)}d8(g4,{top:g1,bottom:gZ})}if(fN<20){if(g0.wheelStartX==null){g0.wheelStartX=g3.scrollLeft;g0.wheelStartY=g3.scrollTop;g0.wheelDX=g8;g0.wheelDY=g7;setTimeout(function(){if(g0.wheelStartX==null){return}var i=g3.scrollLeft-g0.wheelStartX;var ha=g3.scrollTop-g0.wheelStartY;var g9=(ha&&g0.wheelDY&&ha/g0.wheelDY)||(i&&g0.wheelDX&&i/g0.wheelDX);g0.wheelStartX=g0.wheelStartY=null;if(!g9){return}cr=(cr*fN+g9)/(fN+1);++fN},200)}else{g0.wheelDX+=g8;g0.wheelDY+=g7}}}function dO(i){var gW=i.display,gV=gW.gutters.offsetWidth;var gU=Math.round(i.doc.height+bR(i.display));return{clientHeight:gW.scroller.clientHeight,viewHeight:gW.wrapper.clientHeight,scrollWidth:gW.scroller.scrollWidth,clientWidth:gW.scroller.clientWidth,viewWidth:gW.wrapper.clientWidth,barLeft:i.options.fixedGutter?gV:0,docHeight:gU,scrollHeight:gU+c6(i)+gW.barHeight,nativeBarWidth:gW.nativeBarWidth,gutterWidth:gV}}var dA=function(gV,gU,i){this.cm=i;var gW=this.vert=gC("div",[gC("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar");var gX=this.horiz=gC("div",[gC("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");gV(gW);gV(gX);b6(gW,"scroll",function(){if(gW.clientHeight){gU(gW.scrollTop,"vertical")}});b6(gX,"scroll",function(){if(gX.clientWidth){gU(gX.scrollLeft,"horizontal")}});this.checkedZeroWidth=false;if(dY&&l<8){this.horiz.style.minHeight=this.vert.style.minWidth="18px"}};dA.prototype.update=function(gW){var gX=gW.scrollWidth>gW.clientWidth+1;var gV=gW.scrollHeight>gW.clientHeight+1;var gY=gW.nativeBarWidth;if(gV){this.vert.style.display="block";this.vert.style.bottom=gX?gY+"px":"0";var gU=gW.viewHeight-(gX?gY:0);this.vert.firstChild.style.height=Math.max(0,gW.scrollHeight-gW.clientHeight+gU)+"px"}else{this.vert.style.display="";this.vert.firstChild.style.height="0"}if(gX){this.horiz.style.display="block";this.horiz.style.right=gV?gY+"px":"0";this.horiz.style.left=gW.barLeft+"px";var i=gW.viewWidth-gW.barLeft-(gV?gY:0);this.horiz.firstChild.style.width=Math.max(0,gW.scrollWidth-gW.clientWidth+i)+"px"}else{this.horiz.style.display="";this.horiz.firstChild.style.width="0"}if(!this.checkedZeroWidth&&gW.clientHeight>0){if(gY==0){this.zeroWidthHack()}this.checkedZeroWidth=true}return{right:gV?gY:0,bottom:gX?gY:0}};dA.prototype.setScrollLeft=function(i){if(this.horiz.scrollLeft!=i){this.horiz.scrollLeft=i}if(this.disableHoriz){this.enableZeroWidthBar(this.horiz,this.disableHoriz)}};dA.prototype.setScrollTop=function(i){if(this.vert.scrollTop!=i){this.vert.scrollTop=i}if(this.disableVert){this.enableZeroWidthBar(this.vert,this.disableVert)}};dA.prototype.zeroWidthHack=function(){var i=ch&&!dk?"12px":"18px";this.horiz.style.height=this.vert.style.width=i;this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none";this.disableHoriz=new gT;this.disableVert=new gT};dA.prototype.enableZeroWidthBar=function(gU,i){gU.style.pointerEvents="auto";function gV(){var gX=gU.getBoundingClientRect();var gW=document.elementFromPoint(gX.left+1,gX.bottom-1);if(gW!=gU){gU.style.pointerEvents="none"}else{i.set(1000,gV)}}i.set(1000,gV)};dA.prototype.clear=function(){var i=this.horiz.parentNode;i.removeChild(this.horiz);i.removeChild(this.vert)};var fv=function(){};fv.prototype.update=function(){return{bottom:0,right:0}};fv.prototype.setScrollLeft=function(){};fv.prototype.setScrollTop=function(){};fv.prototype.clear=function(){};function fp(gW,gY){if(!gY){gY=dO(gW)}var gV=gW.display.barWidth,gU=gW.display.barHeight;aX(gW,gY);for(var gX=0;gX<4&&gV!=gW.display.barWidth||gU!=gW.display.barHeight;gX++){if(gV!=gW.display.barWidth&&gW.options.lineWrapping){bc(gW)}aX(gW,dO(gW));gV=gW.display.barWidth;gU=gW.display.barHeight}}function aX(i,gU){var gW=i.display;var gV=gW.scrollbars.update(gU);gW.sizer.style.paddingRight=(gW.barWidth=gV.right)+"px";gW.sizer.style.paddingBottom=(gW.barHeight=gV.bottom)+"px";gW.heightForcer.style.borderBottom=gV.bottom+"px solid transparent";if(gV.right&&gV.bottom){gW.scrollbarFiller.style.display="block";gW.scrollbarFiller.style.height=gV.bottom+"px";gW.scrollbarFiller.style.width=gV.right+"px"}else{gW.scrollbarFiller.style.display=""}if(gV.bottom&&i.options.coverGutterNextToScrollbar&&i.options.fixedGutter){gW.gutterFiller.style.display="block";gW.gutterFiller.style.height=gV.bottom+"px";gW.gutterFiller.style.width=gU.gutterWidth+"px"}else{gW.gutterFiller.style.display=""}}var bq={"native":dA,"null":fv};function aF(i){if(i.display.scrollbars){i.display.scrollbars.clear();if(i.display.scrollbars.addClass){h(i.display.wrapper,i.display.scrollbars.addClass)}}i.display.scrollbars=new bq[i.options.scrollbarStyle](function(gU){i.display.wrapper.insertBefore(gU,i.display.scrollbarFiller);b6(gU,"mousedown",function(){if(i.state.focused){setTimeout(function(){return i.display.input.focus()},0)}});gU.setAttribute("cm-not-content","true")},function(gV,gU){if(gU=="horizontal"){bN(i,gV)}else{P(i,gV)}},i);if(i.display.scrollbars.addClass){f3(i.display.wrapper,i.display.scrollbars.addClass)}}function en(gU,gW){if(aU(gU,"scrollCursorIntoView")){return}var gY=gU.display,gV=gY.sizer.getBoundingClientRect(),i=null;if(gW.top+gV.top<0){i=true}else{if(gW.bottom+gV.top>(window.innerHeight||document.documentElement.clientHeight)){i=false}}if(i!=null&&!fU){var gX=gC("div","\u200b",null,("position: absolute;\n                         top: "+(gW.top-gY.viewOffset-fA(gU.display))+"px;\n                         height: "+(gW.bottom-gW.top+c6(gU)+gY.barHeight)+"px;\n                         left: "+(gW.left)+"px; width: "+(Math.max(2,gW.right-gW.left))+"px;"));gU.display.lineSpace.appendChild(gX);gX.scrollIntoView(i);gU.display.lineSpace.removeChild(gX)}}function E(g4,g1,gX,gW){if(gW==null){gW=0}var g2;for(var gY=0;gY<5;gY++){var gZ=false;var g3=d9(g4,g1);var i=!gX||gX==g1?g3:d9(g4,gX);g2={left:Math.min(g3.left,i.left),top:Math.min(g3.top,i.top)-gW,right:Math.max(g3.left,i.left),bottom:Math.max(g3.bottom,i.bottom)+gW};var gV=I(g4,g2);var g0=g4.doc.scrollTop,gU=g4.doc.scrollLeft;if(gV.scrollTop!=null){P(g4,gV.scrollTop);if(Math.abs(g4.doc.scrollTop-g0)>1){gZ=true}}if(gV.scrollLeft!=null){bN(g4,gV.scrollLeft);if(Math.abs(g4.doc.scrollLeft-gU)>1){gZ=true}}if(!gZ){break}}return g2}function F(i,gU){var gV=I(i,gU);if(gV.scrollTop!=null){P(i,gV.scrollTop)}if(gV.scrollLeft!=null){bN(i,gV.scrollLeft)}}function I(g2,g1){var gZ=g2.display,gX=a1(g2.display);if(g1.top<0){g1.top=0}var gV=g2.curOp&&g2.curOp.scrollTop!=null?g2.curOp.scrollTop:gZ.scroller.scrollTop;var g4=c8(g2),g6={};if(g1.bottom-g1.top>g4){g1.bottom=g1.top+g4}var gU=g2.doc.height+bR(gZ);var i=g1.top<gX,gY=g1.bottom>gU-gX;if(g1.top<gV){g6.scrollTop=i?0:g1.top}else{if(g1.bottom>gV+g4){var g0=Math.min(g1.top,(gY?gU:g1.bottom)-g4);if(g0!=gV){g6.scrollTop=g0}}}var g5=g2.curOp&&g2.curOp.scrollLeft!=null?g2.curOp.scrollLeft:gZ.scroller.scrollLeft;var g3=dB(g2)-(g2.options.fixedGutter?gZ.gutters.offsetWidth:0);var gW=g1.right-g1.left>g3;if(gW){g1.right=g1.left+g3}if(g1.left<10){g6.scrollLeft=0}else{if(g1.left<g5){g6.scrollLeft=Math.max(0,g1.left-(gW?0:10))}else{if(g1.right>g3+g5-3){g6.scrollLeft=g1.right+(gW?0:10)-g3}}}return g6}function cZ(i,gV,gU){if(gV!=null||gU!=null){f5(i)}if(gV!=null){i.curOp.scrollLeft=(i.curOp.scrollLeft==null?i.doc.scrollLeft:i.curOp.scrollLeft)+gV}if(gU!=null){i.curOp.scrollTop=(i.curOp.scrollTop==null?i.doc.scrollTop:i.curOp.scrollTop)+gU}}function f8(i){f5(i);var gU=i.getCursor(),gW=gU,gV=gU;if(!i.options.lineWrapping){gW=gU.ch?X(gU.line,gU.ch-1):gU;gV=X(gU.line,gU.ch+1)}i.curOp.scrollToPos={from:gW,to:gV,margin:i.options.cursorScrollMargin}}function f5(i){var gV=i.curOp.scrollToPos;if(gV){i.curOp.scrollToPos=null;var gX=dV(i,gV.from),gW=dV(i,gV.to);var gU=I(i,{left:Math.min(gX.left,gW.left),top:Math.min(gX.top,gW.top)-gV.margin,right:Math.max(gX.right,gW.right),bottom:Math.max(gX.bottom,gW.bottom)+gV.margin});i.scrollTo(gU.scrollLeft,gU.scrollTop)}}var er=0;function cW(i){i.curOp={cm:i,viewChanged:false,startHeight:i.doc.height,forceUpdate:false,updateInput:null,typing:false,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:false,updateMaxLine:false,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:false,id:++er};eU(i.curOp)}function ao(i){var gU=i.curOp;b7(gU,function(gW){for(var gV=0;gV<gW.ops.length;gV++){gW.ops[gV].cm.curOp=null}cY(gW)})}function cY(gZ){var gV=gZ.ops;for(var gU=0;gU<gV.length;gU++){cf(gV[gU])}for(var g0=0;g0<gV.length;g0++){ar(gV[g0])}for(var gY=0;gY<gV.length;gY++){cb(gV[gY])}for(var gX=0;gX<gV.length;gX++){aq(gV[gX])}for(var gW=0;gW<gV.length;gW++){fr(gV[gW])}}function cf(gV){var i=gV.cm,gU=i.display;K(i);if(gV.updateMaxLine){f(i)}gV.mustUpdate=gV.viewChanged||gV.forceUpdate||gV.scrollTop!=null||gV.scrollToPos&&(gV.scrollToPos.from.line<gU.viewFrom||gV.scrollToPos.to.line>=gU.viewTo)||gU.maxLineChanged&&i.options.lineWrapping;gV.update=gV.mustUpdate&&new aL(i,gV.mustUpdate&&{top:gV.scrollTop,ensure:gV.scrollToPos},gV.forceUpdate)}function ar(i){i.updatedDisplay=i.mustUpdate&&C(i.cm,i.update)}function cb(gV){var i=gV.cm,gU=i.display;if(gV.updatedDisplay){bc(i)}gV.barMeasure=dO(i);if(gU.maxLineChanged&&!i.options.lineWrapping){gV.adjustWidthTo=ez(i,gU.maxLine,gU.maxLine.text.length).left+3;i.display.sizerWidth=gV.adjustWidthTo;gV.barMeasure.scrollWidth=Math.max(gU.scroller.clientWidth,gU.sizer.offsetLeft+gV.adjustWidthTo+c6(i)+i.display.barWidth);gV.maxScrollLeft=Math.max(0,gU.sizer.offsetLeft+gV.adjustWidthTo-dB(i))}if(gV.updatedDisplay||gV.selectionChanged){gV.preparedSelection=gU.input.prepareSelection(gV.focus)}}function aq(gV){var i=gV.cm;if(gV.adjustWidthTo!=null){i.display.sizer.style.minWidth=gV.adjustWidthTo+"px";if(gV.maxScrollLeft<i.doc.scrollLeft){bN(i,Math.min(i.display.scroller.scrollLeft,gV.maxScrollLeft),true)}i.display.maxLineChanged=false}var gU=gV.focus&&gV.focus==d2()&&(!document.hasFocus||document.hasFocus());if(gV.preparedSelection){i.display.input.showSelection(gV.preparedSelection,gU)}if(gV.updatedDisplay||gV.startHeight!=i.doc.height){fp(i,gV.barMeasure)}if(gV.updatedDisplay){dN(i,gV.barMeasure)}if(gV.selectionChanged){p(i)}if(i.state.focused&&gV.updateInput){i.display.input.reset(gV.typing)}if(gU){s(gV.cm)}}function fr(gX){var g2=gX.cm,gZ=g2.display,g1=g2.doc;if(gX.updatedDisplay){cu(g2,gX.update)}if(gZ.wheelStartX!=null&&(gX.scrollTop!=null||gX.scrollLeft!=null||gX.scrollToPos)){gZ.wheelStartX=gZ.wheelStartY=null}if(gX.scrollTop!=null&&(gZ.scroller.scrollTop!=gX.scrollTop||gX.forceScroll)){g1.scrollTop=Math.max(0,Math.min(gZ.scroller.scrollHeight-gZ.scroller.clientHeight,gX.scrollTop));gZ.scrollbars.setScrollTop(g1.scrollTop);gZ.scroller.scrollTop=g1.scrollTop}if(gX.scrollLeft!=null&&(gZ.scroller.scrollLeft!=gX.scrollLeft||gX.forceScroll)){g1.scrollLeft=Math.max(0,Math.min(gZ.scroller.scrollWidth-gZ.scroller.clientWidth,gX.scrollLeft));gZ.scrollbars.setScrollLeft(g1.scrollLeft);gZ.scroller.scrollLeft=g1.scrollLeft;e2(g2)}if(gX.scrollToPos){var g0=E(g2,ge(g1,gX.scrollToPos.from),ge(g1,gX.scrollToPos.to),gX.scrollToPos.margin);en(g2,g0)}var gY=gX.maybeHiddenMarkers,gU=gX.maybeUnhiddenMarkers;if(gY){for(var gW=0;gW<gY.length;++gW){if(!gY[gW].lines.length){aG(gY[gW],"hide")}}}if(gU){for(var gV=0;gV<gU.length;++gV){if(gU[gV].lines.length){aG(gU[gV],"unhide")}}}if(gZ.wrapper.offsetHeight){g1.scrollTop=g2.display.scroller.scrollTop}if(gX.changeObjs){aG(g2,"changes",g2,gX.changeObjs)}if(gX.update){gX.update.finish()}}function c0(i,gU){if(i.curOp){return gU()}cW(i);try{return gU()}finally{ao(i)}}function de(i,gU){return function(){if(i.curOp){return gU.apply(i,arguments)}cW(i);try{return gU.apply(i,arguments)}finally{ao(i)}}}function dn(i){return function(){if(this.curOp){return i.apply(this,arguments)}cW(this);try{return i.apply(this,arguments)}finally{ao(this)}}}function cR(i){return function(){var gU=this.cm;if(!gU||gU.curOp){return i.apply(this,arguments)}cW(gU);try{return i.apply(this,arguments)}finally{ao(gU)}}}function aj(g1,gZ,g0,g2){if(gZ==null){gZ=g1.doc.first}if(g0==null){g0=g1.doc.first+g1.doc.size}if(!g2){g2=0}var gW=g1.display;if(g2&&g0<gW.viewTo&&(gW.updateLineNumbers==null||gW.updateLineNumbers>gZ)){gW.updateLineNumbers=gZ}g1.curOp.viewChanged=true;if(gZ>=gW.viewTo){if(ba&&aZ(g1.doc,gZ)<gW.viewTo){eS(g1)}}else{if(g0<=gW.viewFrom){if(ba&&ek(g1.doc,g0+g2)>gW.viewFrom){eS(g1)}else{gW.viewFrom+=g2;gW.viewTo+=g2}}else{if(gZ<=gW.viewFrom&&g0>=gW.viewTo){eS(g1)}else{if(gZ<=gW.viewFrom){var gY=du(g1,g0,g0+g2,1);if(gY){gW.view=gW.view.slice(gY.index);gW.viewFrom=gY.lineN;gW.viewTo+=g2}else{eS(g1)}}else{if(g0>=gW.viewTo){var gU=du(g1,gZ,gZ,-1);if(gU){gW.view=gW.view.slice(0,gU.index);gW.viewTo=gU.lineN}else{eS(g1)}}else{var gX=du(g1,gZ,gZ,-1);var gV=du(g1,g0,g0+g2,1);if(gX&&gV){gW.view=gW.view.slice(0,gX.index).concat(fm(g1,gX.lineN,gV.lineN)).concat(gW.view.slice(gV.index));gW.viewTo+=g2}else{eS(g1)}}}}}}var i=gW.externalMeasured;if(i){if(g0<i.lineN){i.lineN+=g2}else{if(gZ<i.lineN+i.size){gW.externalMeasured=null}}}}function S(gU,gV,gY){gU.curOp.viewChanged=true;var gZ=gU.display,gX=gU.display.externalMeasured;if(gX&&gV>=gX.lineN&&gV<gX.lineN+gX.size){gZ.externalMeasured=null}if(gV<gZ.viewFrom||gV>=gZ.viewTo){return}var gW=gZ.view[dG(gU,gV)];if(gW.node==null){return}var i=gW.changes||(gW.changes=[]);if(dy(i,gY)==-1){i.push(gY)}}function eS(i){i.display.viewFrom=i.display.viewTo=i.doc.first;i.display.view=[];i.display.viewOffset=0}function du(g2,gW,gY,gV){var gZ=dG(g2,gW),g1,g0=g2.display.view;if(!ba||gY==g2.doc.first+g2.doc.size){return{index:gZ,lineN:gY}}var gU=g2.display.viewFrom;for(var gX=0;gX<gZ;gX++){gU+=g0[gX].size}if(gU!=gW){if(gV>0){if(gZ==g0.length-1){return null}g1=(gU+g0[gZ].size)-gW;gZ++}else{g1=gU-gW}gW+=g1;gY+=g1}while(aZ(g2.doc,gY)!=gY){if(gZ==(gV<0?0:g0.length-1)){return null}gY+=gV*g0[gZ-(gV<0?1:0)].size;gZ+=gV}return{index:gZ,lineN:gY}}function c5(i,gX,gW){var gV=i.display,gU=gV.view;if(gU.length==0||gX>=gV.viewTo||gW<=gV.viewFrom){gV.view=fm(i,gX,gW);gV.viewFrom=gX}else{if(gV.viewFrom>gX){gV.view=fm(i,gX,gV.viewFrom).concat(gV.view)}else{if(gV.viewFrom<gX){gV.view=gV.view.slice(dG(i,gX))}}gV.viewFrom=gX;if(gV.viewTo<gW){gV.view=gV.view.concat(fm(i,gV.viewTo,gW))}else{if(gV.viewTo>gW){gV.view=gV.view.slice(0,dG(i,gW))}}}gV.viewTo=gW}function dr(gU){var gV=gU.display.view,gY=0;for(var gX=0;gX<gV.length;gX++){var gW=gV[gX];if(!gW.hidden&&(!gW.node||gW.changes)){++gY}}return gY}function ew(i,gU){if(i.doc.mode.startState&&i.doc.frontier<i.display.viewTo){i.state.highlight.set(gU,cI(c3,i))}}function c3(i){var gX=i.doc;if(gX.frontier<gX.first){gX.frontier=gX.first}if(gX.frontier>=i.display.viewTo){return}var gV=+new Date+i.options.workTime;var gW=cd(gX.mode,dQ(i,gX.frontier));var gU=[];gX.iter(gX.frontier,Math.min(gX.first+gX.size,i.display.viewTo+500),function(gY){if(gX.frontier>=i.display.viewFrom){var g1=gY.styles,g5=gY.text.length>i.options.maxHighlightLength;var g3=f0(i,gY,g5?cd(gX.mode,gW):gW,true);gY.styles=g3.styles;var g0=gY.styleClasses,g2=g3.classes;if(g2){gY.styleClasses=g2}else{if(g0){gY.styleClasses=null}}var g4=!g1||g1.length!=gY.styles.length||g0!=g2&&(!g0||!g2||g0.bgClass!=g2.bgClass||g0.textClass!=g2.textClass);for(var gZ=0;!g4&&gZ<g1.length;++gZ){g4=g1[gZ]!=gY.styles[gZ]}if(g4){gU.push(gX.frontier)}gY.stateAfter=g5?gW:cd(gX.mode,gW)}else{if(gY.text.length<=i.options.maxHighlightLength){dM(i,gY.text,gW)}gY.stateAfter=gX.frontier%5==0?cd(gX.mode,gW):null}++gX.frontier;if(+new Date>gV){ew(i,i.options.workDelay);return true}});if(gU.length){c0(i,function(){for(var gY=0;gY<gU.length;gY++){S(i,gU[gY],"text")}})}}var aL=function(gU,i,gV){var gW=gU.display;this.viewport=i;this.visible=cg(gW,gU.doc,i);this.editorIsHidden=!gW.wrapper.offsetWidth;this.wrapperHeight=gW.wrapper.clientHeight;this.wrapperWidth=gW.wrapper.clientWidth;this.oldDisplayWidth=dB(gU);this.force=gV;this.dims=fE(gU);this.events=[]};aL.prototype.signal=function(gU,i){if(fL(gU,i)){this.events.push(arguments)}};aL.prototype.finish=function(){var gV=this;for(var gU=0;gU<this.events.length;gU++){aG.apply(null,gV.events[gU])}};function K(i){var gU=i.display;if(!gU.scrollbarsClipped&&gU.scroller.offsetWidth){gU.nativeBarWidth=gU.scroller.offsetWidth-gU.scroller.clientWidth;gU.heightForcer.style.height=c6(i)+"px";gU.sizer.style.marginBottom=-gU.nativeBarWidth+"px";gU.sizer.style.borderRightWidth=c6(i)+"px";gU.scrollbarsClipped=true}}function C(g2,gW){var gX=g2.display,g1=g2.doc;if(gW.editorIsHidden){eS(g2);return false}if(!gW.force&&gW.visible.from>=gX.viewFrom&&gW.visible.to<=gX.viewTo&&(gX.updateLineNumbers==null||gX.updateLineNumbers>=gX.viewTo)&&gX.renderedView==gX.view&&dr(g2)==0){return false}if(em(g2)){eS(g2);gW.dims=fE(g2)}var gV=g1.first+g1.size;var gZ=Math.max(gW.visible.from-g2.options.viewportMargin,g1.first);var g0=Math.min(gV,gW.visible.to+g2.options.viewportMargin);if(gX.viewFrom<gZ&&gZ-gX.viewFrom<20){gZ=Math.max(g1.first,gX.viewFrom)}if(gX.viewTo>g0&&gX.viewTo-g0<20){g0=Math.min(gV,gX.viewTo)}if(ba){gZ=aZ(g2.doc,gZ);g0=ek(g2.doc,g0)}var gU=gZ!=gX.viewFrom||g0!=gX.viewTo||gX.lastWrapHeight!=gW.wrapperHeight||gX.lastWrapWidth!=gW.wrapperWidth;c5(g2,gZ,g0);gX.viewOffset=bV(fG(g2.doc,gX.viewFrom));g2.display.mover.style.top=gX.viewOffset+"px";var i=dr(g2);if(!gU&&i==0&&!gW.force&&gX.renderedView==gX.view&&(gX.updateLineNumbers==null||gX.updateLineNumbers>=gX.viewTo)){return false}var gY=d2();if(i>4){gX.lineDiv.style.display="none"}cx(g2,gX.updateLineNumbers,gW.dims);if(i>4){gX.lineDiv.style.display=""}gX.renderedView=gX.view;if(gY&&d2()!=gY&&gY.offsetHeight){gY.focus()}ei(gX.cursorDiv);ei(gX.selectionDiv);gX.gutters.style.height=gX.sizer.style.minHeight=0;if(gU){gX.lastWrapHeight=gW.wrapperHeight;gX.lastWrapWidth=gW.wrapperWidth;ew(g2,400)}gX.updateLineNumbers=null;return true}function cu(gU,gX){var i=gX.viewport;for(var gW=true;;gW=false){if(!gW||!gU.options.lineWrapping||gX.oldDisplayWidth==dB(gU)){if(i&&i.top!=null){i={top:Math.min(gU.doc.height+bR(gU.display)-c8(gU),i.top)}}gX.visible=cg(gU.display,gU.doc,i);if(gX.visible.from>=gU.display.viewFrom&&gX.visible.to<=gU.display.viewTo){break}}if(!C(gU,gX)){break}bc(gU);var gV=dO(gU);bL(gU);fp(gU,gV);dN(gU,gV)}gX.signal(gU,"update",gU);if(gU.display.viewFrom!=gU.display.reportedViewFrom||gU.display.viewTo!=gU.display.reportedViewTo){gX.signal(gU,"viewportChange",gU,gU.display.viewFrom,gU.display.viewTo);gU.display.reportedViewFrom=gU.display.viewFrom;gU.display.reportedViewTo=gU.display.viewTo}}function d8(gU,i){var gW=new aL(gU,i);if(C(gU,gW)){bc(gU);cu(gU,gW);var gV=dO(gU);bL(gU);fp(gU,gV);dN(gU,gV);gW.finish()}}function cx(g5,gW,g4){var g1=g5.display,g7=g5.options.lineNumbers;var gU=g1.lineDiv,g6=gU.firstChild;function g0(g8){var i=g8.nextSibling;if(dd&&ch&&g5.display.currentWheelTarget==g8){g8.style.display="none"}else{g8.parentNode.removeChild(g8)}return i}var g2=g1.view,gZ=g1.viewFrom;for(var gX=0;gX<g2.length;gX++){var gY=g2[gX];if(gY.hidden){}else{if(!gY.node||gY.node.parentNode!=gU){var gV=aH(g5,gY,gZ,g4);gU.insertBefore(gV,g6)}else{while(g6!=gY.node){g6=g0(g6)}var g3=g7&&gW!=null&&gW<=gZ&&gY.lineNumber;if(gY.changes){if(dy(gY.changes,"gutter")>-1){g3=false}ad(g5,gY,gZ,g4)}if(g3){ei(gY.lineNumber);gY.lineNumber.appendChild(document.createTextNode(eN(g5.options,gZ)))}g6=gY.node.nextSibling}}gZ+=gY.size}while(g6){g6=g0(g6)}}function dh(i){var gU=i.display.gutters.offsetWidth;i.display.sizer.style.marginLeft=gU+"px"}function dN(i,gU){i.display.sizer.style.minHeight=gU.docHeight+"px";i.display.heightForcer.style.top=gU.docHeight+"px";i.display.gutters.style.height=(gU.docHeight+i.display.barHeight+c6(i))+"px"}function eu(gU){var gV=gU.display.gutters,gZ=gU.options.gutters;ei(gV);var gW=0;for(;gW<gZ.length;++gW){var gX=gZ[gW];var gY=gV.appendChild(gC("div",null,"CodeMirror-gutter "+gX));if(gX=="CodeMirror-linenumbers"){gU.display.lineGutter=gY;gY.style.width=(gU.display.lineNumWidth||1)+"px"}}gV.style.display=gW?"":"none";dh(gU)}function cp(i){var gU=dy(i.gutters,"CodeMirror-linenumbers");if(gU==-1&&i.lineNumbers){i.gutters=i.gutters.concat(["CodeMirror-linenumbers"])}else{if(gU>-1&&!i.lineNumbers){i.gutters=i.gutters.slice(0);i.gutters.splice(gU,1)}}}var gB=function(i,gU){this.ranges=i;this.primIndex=gU};gB.prototype.primary=function(){return this.ranges[this.primIndex]};gB.prototype.equals=function(gU){var gY=this;if(gU==this){return true}if(gU.primIndex!=this.primIndex||gU.ranges.length!=this.ranges.length){return false}for(var gW=0;gW<this.ranges.length;gW++){var gV=gY.ranges[gW],gX=gU.ranges[gW];if(!Y(gV.anchor,gX.anchor)||!Y(gV.head,gX.head)){return false}}return true};gB.prototype.deepCopy=function(){var gW=this;var gU=[];for(var gV=0;gV<this.ranges.length;gV++){gU[gV]=new ec(ct(gW.ranges[gV].anchor),ct(gW.ranges[gV].head))}return new gB(gU,this.primIndex)};gB.prototype.somethingSelected=function(){var gV=this;for(var gU=0;gU<this.ranges.length;gU++){if(!gV.ranges[gU].empty()){return true}}return false};gB.prototype.contains=function(gY,gU){var gX=this;if(!gU){gU=gY}for(var gW=0;gW<this.ranges.length;gW++){var gV=gX.ranges[gW];if(cq(gU,gV.from())>=0&&cq(gY,gV.to())<=0){return gW}}return -1};var ec=function(i,gU){this.anchor=i;this.head=gU};ec.prototype.from=function(){return at(this.anchor,this.head)};ec.prototype.to=function(){return bG(this.anchor,this.head)};ec.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch};function cJ(gU,g1){var gW=gU[g1];gU.sort(function(g3,i){return cq(g3.from(),i.from())});g1=dy(gU,gW);for(var gY=1;gY<gU.length;gY++){var g2=gU[gY],gV=gU[gY-1];if(cq(gV.to(),g2.from())>=0){var gZ=at(gV.from(),g2.from()),g0=bG(gV.to(),g2.to());var gX=gV.empty()?g2.from()==g2.head:gV.from()==gV.head;if(gY<=g1){--g1}gU.splice(--gY,2,new ec(gX?g0:gZ,gX?gZ:g0))}}return new gB(gU,g1)}function fh(i,gU){return new gB([new ec(i,gU||i)],0)}function da(i){if(!i.text){return i.to}return X(i.from.line+i.text.length-1,f9(i.text).length+(i.text.length==1?i.from.ch:0))}function b9(gW,gV){if(cq(gW,gV.from)<0){return gW}if(cq(gW,gV.to)<=0){return da(gV)}var i=gW.line+gV.text.length-(gV.to.line-gV.from.line)-1,gU=gW.ch;if(gW.line==gV.to.line){gU+=da(gV).ch-gV.to.ch}return X(i,gU)}function fK(gX,gY){var gV=[];for(var gW=0;gW<gX.sel.ranges.length;gW++){var gU=gX.sel.ranges[gW];gV.push(new ec(b9(gU.anchor,gY),b9(gU.head,gY)))}return cJ(gV,gX.sel.primIndex)}function bC(gV,gU,i){if(gV.line==gU.line){return X(i.line,gV.ch-gU.ch+i.ch)}else{return X(i.line+(gV.line-gU.line),gV.ch)}}function ah(g4,g1,gV){var gW=[];var gU=X(g4.first,0),g5=gU;for(var gY=0;gY<g1.length;gY++){var g0=g1[gY];var g3=bC(g0.from,gU,g5);var g2=bC(da(g0),gU,g5);gU=g0.to;g5=g2;if(gV=="around"){var gZ=g4.sel.ranges[gY],gX=cq(gZ.head,gZ.anchor)<0;gW[gY]=new ec(gX?g2:g3,gX?g3:g2)}else{gW[gY]=new ec(g3,g3)}}return new gB(gW,g4.sel.primIndex)}function bz(i){i.doc.mode=f2(i.options,i.doc.modeOption);eF(i)}function eF(i){i.doc.iter(function(gU){if(gU.stateAfter){gU.stateAfter=null}if(gU.styles){gU.styles=null}});i.doc.frontier=i.doc.first;ew(i,100);i.state.modeGen++;if(i.curOp){aj(i)}}function d7(i,gU){return gU.from.ch==0&&gU.to.ch==0&&f9(gU.text)==""&&(!i.cm||i.cm.options.wholeLineUpdateBefore)}function fZ(ha,g3,gX,g1){function gW(hb){return gX?gX[hb]:null}function g2(hb,hd,hc){eH(hb,hd,hc,g1);ag(hb,"change",hb,g3)}function g7(he,hc){var hb=[];for(var hd=he;hd<hc;++hd){hb.push(new gG(g5[hd],gW(hd),g1))}return hb}var g8=g3.from,gU=g3.to,g5=g3.text;var g4=fG(ha,g8.line),i=fG(ha,gU.line);var gV=f9(g5),g9=gW(g5.length-1),g6=gU.line-g8.line;if(g3.full){ha.insert(0,g7(0,g5.length));ha.remove(g5.length,ha.size-g5.length)}else{if(d7(ha,g3)){var g0=g7(0,g5.length-1);g2(i,i.text,g9);if(g6){ha.remove(g8.line,g6)}if(g0.length){ha.insert(g8.line,g0)}}else{if(g4==i){if(g5.length==1){g2(g4,g4.text.slice(0,g8.ch)+gV+g4.text.slice(gU.ch),g9)}else{var gZ=g7(1,g5.length-1);gZ.push(new gG(gV+g4.text.slice(gU.ch),g9,g1));g2(g4,g4.text.slice(0,g8.ch)+g5[0],gW(0));ha.insert(g8.line+1,gZ)}}else{if(g5.length==1){g2(g4,g4.text.slice(0,g8.ch)+g5[0]+i.text.slice(gU.ch),gW(0));ha.remove(g8.line+1,g6)}else{g2(g4,g4.text.slice(0,g8.ch)+g5[0],gW(0));g2(i,gV+i.text.slice(gU.ch),g9);var gY=g7(1,g5.length-1);if(g6>1){ha.remove(g8.line+1,g6-1)}ha.insert(g8.line+1,gY)}}}}ag(ha,"change",ha,g3)}function eo(gW,gV,gU){function i(g2,g0,gY){if(g2.linked){for(var gZ=0;gZ<g2.linked.length;++gZ){var gX=g2.linked[gZ];if(gX.doc==g0){continue}var g1=gY&&gX.sharedHist;if(gU&&!g1){continue}gV(gX.doc,g1);i(gX.doc,g2,g1)}}}i(gW,null,true)}function et(i,gU){if(gU.cm){throw new Error("This document is already in use.")}i.doc=gU;gU.cm=i;aa(i);bz(i);B(i);if(!i.options.lineWrapping){f(i)}i.options.mode=gU.modeOption;aj(i)}function B(i){(i.doc.direction=="rtl"?f3:h)(i.display.lineDiv,"CodeMirror-rtl")}function ef(i){c0(i,function(){B(i);aj(i)})}function gr(i){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOp=this.lastSelOp=null;this.lastOrigin=this.lastSelOrigin=null;this.generation=this.maxGeneration=i||1}function dK(i,gV){var gU={from:ct(gV.from),to:da(gV),text:gE(i,gV.from,gV.to)};b8(i,gU,gV.from.line,gV.to.line+1);eo(i,function(gW){return b8(gW,gU,gV.from.line,gV.to.line+1)},true);return gU}function f4(gU){while(gU.length){var i=f9(gU);if(i.ranges){gU.pop()}else{break}}}function fc(gU,i){if(i){f4(gU.done);return f9(gU.done)}else{if(gU.done.length&&!f9(gU.done).ranges){return f9(gU.done)}else{if(gU.done.length>1&&!gU.done[gU.done.length-2].ranges){gU.done.pop();return f9(gU.done)}}}}function gg(gZ,gX,i,gW){var gV=gZ.history;gV.undone.length=0;var gU=+new Date,g0;var g1;if((gV.lastOp==gW||gV.lastOrigin==gX.origin&&gX.origin&&((gX.origin.charAt(0)=="+"&&gZ.cm&&gV.lastModTime>gU-gZ.cm.options.historyEventDelay)||gX.origin.charAt(0)=="*"))&&(g0=fc(gV,gV.lastOp==gW))){g1=f9(g0.changes);if(cq(gX.from,gX.to)==0&&cq(gX.from,g1.to)==0){g1.to=da(gX)}else{g0.changes.push(dK(gZ,gX))}}else{var gY=f9(gV.done);if(!gY||!gY.ranges){c2(gZ.sel,gV.done)}g0={changes:[dK(gZ,gX)],generation:gV.generation};gV.done.push(g0);while(gV.done.length>gV.undoDepth){gV.done.shift();if(!gV.done[0].ranges){gV.done.shift()}}}gV.done.push(i);gV.generation=++gV.maxGeneration;gV.lastModTime=gV.lastSelTime=gU;gV.lastOp=gV.lastSelOp=gW;gV.lastOrigin=gV.lastSelOrigin=gX.origin;if(!g1){aG(gZ,"historyAdded")}}function bJ(gX,i,gV,gW){var gU=i.charAt(0);return gU=="*"||gU=="+"&&gV.ranges.length==gW.ranges.length&&gV.somethingSelected()==gW.somethingSelected()&&new Date-gX.history.lastSelTime<=(gX.cm?gX.cm.options.historyEventDelay:500)}function gN(gY,gW,i,gV){var gX=gY.history,gU=gV&&gV.origin;if(i==gX.lastSelOp||(gU&&gX.lastSelOrigin==gU&&(gX.lastModTime==gX.lastSelTime&&gX.lastOrigin==gU||bJ(gY,gU,f9(gX.done),gW)))){gX.done[gX.done.length-1]=gW}else{c2(gW,gX.done)}gX.lastSelTime=+new Date;gX.lastSelOrigin=gU;gX.lastSelOp=i;if(gV&&gV.clearRedo!==false){f4(gX.undone)}}function c2(gU,i){var gV=f9(i);if(!(gV&&gV.ranges&&gV.equals(gU))){i.push(gU)}}function b8(gU,gY,gX,gW){var i=gY["spans_"+gU.id],gV=0;gU.iter(Math.max(gU.first,gX),Math.min(gU.first+gU.size,gW),function(gZ){if(gZ.markedSpans){(i||(i=gY["spans_"+gU.id]={}))[gV]=gZ.markedSpans}++gV})}function bo(gW){if(!gW){return null}var gU;for(var gV=0;gV<gW.length;++gV){if(gW[gV].marker.explicitlyCleared){if(!gU){gU=gW.slice(0,gV)}}else{if(gU){gU.push(gW[gV])}}}return !gU?gW:gU.length?gU:null}function ce(gX,gY){var gW=gY["spans_"+gX.id];if(!gW){return null}var gU=[];for(var gV=0;gV<gY.text.length;++gV){gU.push(bo(gW[gV]))}return gU}function eq(g2,g0){var gU=ce(g2,g0);var g3=eD(g2,g0);if(!gU){return g3}if(!g3){return gU}for(var gX=0;gX<gU.length;++gX){var gY=gU[gX],gZ=g3[gX];if(gY&&gZ){spans:for(var gW=0;gW<gZ.length;++gW){var g1=gZ[gW];for(var gV=0;gV<gY.length;++gV){if(gY[gV].marker==g1.marker){continue spans}}gY.push(g1)}}else{if(gZ){gU[gX]=gZ}}}return gU}function bY(g5,gX,g4){var gV=[];for(var g0=0;g0<g5.length;++g0){var gW=g5[g0];if(gW.ranges){gV.push(g4?gB.prototype.deepCopy.call(gW):gW);continue}var g2=gW.changes,g3=[];gV.push({changes:g3});for(var gZ=0;gZ<g2.length;++gZ){var g1=g2[gZ],gY=(void 0);g3.push({from:g1.from,to:g1.to,text:g1.text});if(gX){for(var gU in g1){if(gY=gU.match(/^spans_(\d+)$/)){if(dy(gX,Number(gY[1]))>-1){f9(g3)[gU]=g1[gU];delete g1[gU]}}}}}}return gV}function fV(gY,gU,gX,i){if(gY.cm&&gY.cm.display.shift||gY.extend){var gW=gU.anchor;if(i){var gV=cq(gX,gW)<0;if(gV!=(cq(i,gW)<0)){gW=gX;gX=i}else{if(gV!=(cq(gX,i)<0)){gX=i}}}return new ec(gW,gX)}else{return new ec(i||gX,gX)}}function gw(gW,gV,i,gU){b3(gW,new gB([fV(gW,gW.sel.primary(),gV,i)],0),gU)}function ax(gZ,gY,gW){var gV=[];for(var gX=0;gX<gZ.sel.ranges.length;gX++){gV[gX]=fV(gZ,gZ.sel.ranges[gX],gY[gX],null)}var gU=cJ(gV,gZ.sel.primIndex);b3(gZ,gU,gW)}function e(gY,gX,gV,gW){var gU=gY.sel.ranges.slice(0);gU[gX]=gV;b3(gY,cJ(gU,gY.sel.primIndex),gW)}function G(gW,gU,gV,i){b3(gW,fh(gU,gV),i)}function b(gW,gU,i){var gV={ranges:gU.ranges,update:function(gX){var gZ=this;this.ranges=[];for(var gY=0;gY<gX.length;gY++){gZ.ranges[gY]=new ec(ge(gW,gX[gY].anchor),ge(gW,gX[gY].head))}},origin:i&&i.origin};aG(gW,"beforeSelectionChange",gW,gV);if(gW.cm){aG(gW.cm,"beforeSelectionChange",gW.cm,gV)}if(gV.ranges!=gU.ranges){return cJ(gV.ranges,gV.ranges.length-1)}else{return gU}}function fz(gX,gW,gU){var i=gX.history.done,gV=f9(i);if(gV&&gV.ranges){i[i.length-1]=gW;eJ(gX,gW,gU)}else{b3(gX,gW,gU)}}function b3(gV,gU,i){eJ(gV,gU,i);gN(gV,gV.sel,gV.cm?gV.cm.curOp.id:NaN,i)}function eJ(gW,gV,gU){if(fL(gW,"beforeSelectionChange")||gW.cm&&fL(gW.cm,"beforeSelectionChange")){gV=b(gW,gV,gU)}var i=gU&&gU.bias||(cq(gV.primary().head,gW.sel.primary().head)<0?-1:1);dm(gW,o(gW,gV,i,true));if(!(gU&&gU.scroll===false)&&gW.cm){f8(gW.cm)}}function dm(gU,i){if(i.equals(gU.sel)){return}gU.sel=i;if(gU.cm){gU.cm.curOp.updateInput=gU.cm.curOp.selectionChanged=true;W(gU.cm)}ag(gU,"cursorActivity",gU)}function eT(i){dm(i,o(i,i.sel,null,false),ab)}function o(g3,gU,g0,g1){var gX;for(var gY=0;gY<gU.ranges.length;gY++){var gZ=gU.ranges[gY];var gV=gU.ranges.length==g3.sel.ranges.length&&g3.sel.ranges[gY];var g2=b4(g3,gZ.anchor,gV&&gV.anchor,g0,g1);var gW=b4(g3,gZ.head,gV&&gV.head,g0,g1);if(gX||g2!=gZ.anchor||gW!=gZ.head){if(!gX){gX=gU.ranges.slice(0,gY)}gX[gY]=new ec(g2,gW)}}return gX?cJ(gX,gU.primIndex):gU}function e8(g4,g2,gX,gW,g0){var g5=fG(g4,g2.line);if(g5.markedSpans){for(var gY=0;gY<g5.markedSpans.length;++gY){var gU=g5.markedSpans[gY],gV=gU.marker;if((gU.from==null||(gV.inclusiveLeft?gU.from<=g2.ch:gU.from<g2.ch))&&(gU.to==null||(gV.inclusiveRight?gU.to>=g2.ch:gU.to>g2.ch))){if(g0){aG(gV,"beforeCursorEnter");if(gV.explicitlyCleared){if(!g5.markedSpans){break}else{--gY;continue}}}if(!gV.atomic){continue}if(gX){var g1=gV.find(gW<0?1:-1),g3=(void 0);if(gW<0?gV.inclusiveRight:gV.inclusiveLeft){g1=gQ(g4,g1,-gW,g1&&g1.line==g2.line?g5:null)}if(g1&&g1.line==g2.line&&(g3=cq(g1,gX))&&(gW<0?g3<0:g3>0)){return e8(g4,g1,g2,gW,g0)}}var gZ=gV.find(gW<0?-1:1);if(gW<0?gV.inclusiveLeft:gV.inclusiveRight){gZ=gQ(g4,gZ,gW,gZ.line==g2.line?g5:null)}return gZ?e8(g4,gZ,g2,gW,g0):null}}}return g2}function b4(gY,gZ,gW,gU,i){var gV=gU||1;var gX=e8(gY,gZ,gW,gV,i)||(!i&&e8(gY,gZ,gW,gV,true))||e8(gY,gZ,gW,-gV,i)||(!i&&e8(gY,gZ,gW,-gV,true));if(!gX){gY.cantEdit=true;return X(gY.first,0)}return gX}function gQ(gV,gW,gU,i){if(gU<0&&gW.ch==0){if(gW.line>gV.first){return ge(gV,X(gW.line-1))}else{return null}}else{if(gU>0&&gW.ch==(i||fG(gV,gW.line)).text.length){if(gW.line<gV.first+gV.size-1){return X(gW.line+1,0)}else{return null}}else{return new X(gW.line,gW.ch+gU)}}}function an(i){i.setSelection(X(i.firstLine(),0),X(i.lastLine()),ab)}function d5(gU,gW,gV){var i={canceled:false,from:gW.from,to:gW.to,text:gW.text,origin:gW.origin,cancel:function(){return i.canceled=true}};if(gV){i.update=function(g0,gZ,gY,gX){if(g0){i.from=ge(gU,g0)}if(gZ){i.to=ge(gU,gZ)}if(gY){i.text=gY}if(gX!==undefined){i.origin=gX}}}aG(gU,"beforeChange",gU,i);if(gU.cm){aG(gU.cm,"beforeChange",gU.cm,i)}if(i.canceled){return null}return{from:i.from,to:i.to,text:i.text,origin:i.origin}}function bj(gX,gY,gW){if(gX.cm){if(!gX.cm.curOp){return de(gX.cm,bj)(gX,gY,gW)}if(gX.cm.state.suppressEdits){return}}if(fL(gX,"beforeChange")||gX.cm&&fL(gX.cm,"beforeChange")){gY=d5(gX,gY,true);if(!gY){return}}var gV=gO&&!gW&&cV(gX,gY.from,gY.to);if(gV){for(var gU=gV.length-1;gU>=0;--gU){L(gX,{from:gV[gU].from,to:gV[gU].to,text:gU?[""]:gY.text})}}else{L(gX,gY)}}function L(gV,gW){if(gW.text.length==1&&gW.text[0]==""&&cq(gW.from,gW.to)==0){return}var gU=fK(gV,gW);gg(gV,gW,gU,gV.cm?gV.cm.curOp.id:NaN);ev(gV,gW,gU,eD(gV,gW));var i=[];eo(gV,function(gY,gX){if(!gX&&dy(i,gY.history)==-1){dS(gY.history,gW);i.push(gY.history)}ev(gY,gW,null,eD(gY,gW))})}function ci(g5,g4,g7){if(g5.cm&&g5.cm.state.suppressEdits&&!g7){return}var g3=g5.history,gV,gX=g5.sel;var gU=g4=="undo"?g3.done:g3.undone,g6=g4=="undo"?g3.undone:g3.done;var g0=0;for(;g0<gU.length;g0++){gV=gU[g0];if(g7?gV.ranges&&!gV.equals(g5.sel):!gV.ranges){break}}if(g0==gU.length){return}g3.lastOrigin=g3.lastSelOrigin=null;for(;;){gV=gU.pop();if(gV.ranges){c2(gV,g6);if(g7&&!gV.equals(g5.sel)){b3(g5,gV,{clearRedo:false});return}gX=gV}else{break}}var g2=[];c2(gX,g6);g6.push({changes:g2,generation:g3.generation});g3.generation=gV.generation||++g3.maxGeneration;var gW=fL(g5,"beforeChange")||g5.cm&&fL(g5.cm,"beforeChange");var g1=function(g8){var hb=gV.changes[g8];hb.origin=g4;if(gW&&!d5(g5,hb,false)){gU.length=0;return{}}g2.push(dK(g5,hb));var ha=g8?fK(g5,hb):f9(gU);ev(g5,hb,ha,eq(g5,hb));if(!g8&&g5.cm){g5.cm.scrollIntoView({from:hb.from,to:da(hb)})}var g9=[];eo(g5,function(hc,i){if(!i&&dy(g9,hc.history)==-1){dS(hc.history,hb);g9.push(hc.history)}ev(hc,hb,null,eq(hc,hb))})};for(var gY=gV.changes.length-1;gY>=0;--gY){var gZ=g1(gY);if(gZ){return gZ.v}}}function fO(gU,gW){if(gW==0){return}gU.first+=gW;gU.sel=new gB(b2(gU.sel.ranges,function(gX){return new ec(X(gX.anchor.line+gW,gX.anchor.ch),X(gX.head.line+gW,gX.head.ch))}),gU.sel.primIndex);if(gU.cm){aj(gU.cm,gU.first,gU.first-gW,gW);for(var gV=gU.cm.display,i=gV.viewFrom;i<gV.viewTo;i++){S(gU.cm,i,"gutter")}}}function ev(gX,gY,gW,gU){if(gX.cm&&!gX.cm.curOp){return de(gX.cm,ev)(gX,gY,gW,gU)}if(gY.to.line<gX.first){fO(gX,gY.text.length-1-(gY.to.line-gY.from.line));return}if(gY.from.line>gX.lastLine()){return}if(gY.from.line<gX.first){var i=gY.text.length-1-(gX.first-gY.from.line);fO(gX,i);gY={from:X(gX.first,0),to:X(gY.to.line+i,gY.to.ch),text:[f9(gY.text)],origin:gY.origin}}var gV=gX.lastLine();if(gY.to.line>gV){gY={from:gY.from,to:X(gV,fG(gX,gV).text.length),text:[gY.text[0]],origin:gY.origin}}gY.removed=gE(gX,gY.from,gY.to);if(!gW){gW=fK(gX,gY)}if(gX.cm){aK(gX.cm,gY,gU)}else{fZ(gX,gY,gU)}eJ(gX,gW,ab)}function aK(g4,g0,gY){var g3=g4.doc,gZ=g4.display,g1=g0.from,g2=g0.to;var i=false,gX=g1.line;if(!g4.options.lineWrapping){gX=bW(y(fG(g3,g1.line)));g3.iter(gX,g2.line+1,function(g6){if(g6==gZ.maxLine){i=true;return true}})}if(g3.sel.contains(g0.from,g0.to)>-1){W(g4)}fZ(g3,g0,gY,bh(g4));if(!g4.options.lineWrapping){g3.iter(gX,g1.line+g0.text.length,function(g7){var g6=eG(g7);if(g6>gZ.maxLineLength){gZ.maxLine=g7;gZ.maxLineLength=g6;gZ.maxLineChanged=true;i=false}});if(i){g4.curOp.updateMaxLine=true}}g3.frontier=Math.min(g3.frontier,g1.line);ew(g4,400);var g5=g0.text.length-(g2.line-g1.line)-1;if(g0.full){aj(g4)}else{if(g1.line==g2.line&&g0.text.length==1&&!d7(g4.doc,g0)){S(g4,g1.line,"text")}else{aj(g4,g1.line,g2.line+1,g5)}}var gV=fL(g4,"changes"),gW=fL(g4,"change");if(gW||gV){var gU={from:g1,to:g2,text:g0.text,removed:g0.removed,origin:g0.origin};if(gW){ag(g4,"change",g4,gU)}if(gV){(g4.curOp.changeObjs||(g4.curOp.changeObjs=[])).push(gU)}}g4.display.selForContextMenu=null}function a4(gW,gV,gY,gX,i){if(!gX){gX=gY}if(cq(gX,gY)<0){var gU=gX;gX=gY;gY=gU}if(typeof gV=="string"){gV=gW.splitLines(gV)}bj(gW,{from:gY,to:gX,text:gV,origin:i})}function J(gW,gV,gU,i){if(gU<gW.line){gW.line+=i}else{if(gV<gW.line){gW.line=gV;gW.ch=0}}}function fI(gY,g0,g1,g2){for(var gX=0;gX<gY.length;++gX){var gU=gY[gX],gZ=true;if(gU.ranges){if(!gU.copied){gU=gY[gX]=gU.deepCopy();gU.copied=true}for(var gW=0;gW<gU.ranges.length;gW++){J(gU.ranges[gW].anchor,g0,g1,g2);J(gU.ranges[gW].head,g0,g1,g2)}continue}for(var gV=0;gV<gU.changes.length;++gV){var g3=gU.changes[gV];if(g1<g3.from.line){g3.from=X(g3.from.line+g2,g3.from.ch);g3.to=X(g3.to.line+g2,g3.to.ch)}else{if(g0<=g3.to.line){gZ=false;break}}}if(!gZ){gY.splice(0,gX+1);gX=0}}}function dS(gU,gX){var gW=gX.from.line,gV=gX.to.line,i=gX.text.length-(gV-gW)-1;fI(gU.done,gW,gV,i);fI(gU.undone,gW,gV,i)}function eV(gW,gV,i,gY){var gX=gV,gU=gV;if(typeof gV=="number"){gU=fG(gW,di(gW,gV))}else{gX=bW(gV)}if(gX==null){return null}if(gY(gU,gX)&&gW.cm){S(gW.cm,gX,i)}return gU}var fq=function(gV){var gX=this;this.lines=gV;this.parent=null;var gU=0;for(var gW=0;gW<gV.length;++gW){gV[gW].parent=gX;gU+=gV[gW].height}this.height=gU};fq.prototype.chunkSize=function(){return this.lines.length};fq.prototype.removeInner=function(gU,gZ){var gY=this;for(var gW=gU,gX=gU+gZ;gW<gX;++gW){var gV=gY.lines[gW];gY.height-=gV.height;bK(gV);ag(gV,"delete")}this.lines.splice(gU,gZ)};fq.prototype.collapse=function(i){i.push.apply(i,this.lines)};fq.prototype.insertInner=function(gV,gW,gU){var gY=this;this.height+=gU;this.lines=this.lines.slice(0,gV).concat(gW).concat(this.lines.slice(gV));for(var gX=0;gX<gW.length;++gX){gW[gX].parent=gY}};fq.prototype.iterN=function(i,gX,gW){var gV=this;for(var gU=i+gX;i<gU;++i){if(gW(gV.lines[i])){return true}}};var fY=function(gX){var gZ=this;this.children=gX;var gW=0,gU=0;for(var gV=0;gV<gX.length;++gV){var gY=gX[gV];gW+=gY.chunkSize();gU+=gY.height;gY.parent=gZ}this.size=gW;this.height=gU;this.parent=null};fY.prototype.chunkSize=function(){return this.size};fY.prototype.removeInner=function(gW,gV){var gY=this;this.size-=gV;for(var gX=0;gX<this.children.length;++gX){var gU=gY.children[gX],g0=gU.chunkSize();if(gW<g0){var gZ=Math.min(gV,g0-gW),g1=gU.height;gU.removeInner(gW,gZ);gY.height-=g1-gU.height;if(g0==gZ){gY.children.splice(gX--,1);gU.parent=null}if((gV-=gZ)==0){break}gW=0}else{gW-=g0}}if(this.size-gV<25&&(this.children.length>1||!(this.children[0] instanceof fq))){var g2=[];this.collapse(g2);this.children=[new fq(g2)];this.children[0].parent=this}};fY.prototype.collapse=function(gU){var gW=this;for(var gV=0;gV<this.children.length;++gV){gW.children[gV].collapse(gU)}};fY.prototype.insertInner=function(gV,g3,g2){var gY=this;this.size+=g3.length;this.height+=g2;for(var gX=0;gX<this.children.length;++gX){var gU=gY.children[gX],g0=gU.chunkSize();if(gV<=g0){gU.insertInner(gV,g3,g2);if(gU.lines&&gU.lines.length>50){var gW=gU.lines.length%25+25;for(var g1=gW;g1<gU.lines.length;){var gZ=new fq(gU.lines.slice(g1,g1+=25));gU.height-=gZ.height;gY.children.splice(++gX,0,gZ);gZ.parent=gY}gU.lines=gU.lines.slice(0,gW);gY.maybeSpill()}break}gV-=g0}};fY.prototype.maybeSpill=function(){if(this.children.length<=10){return}var gW=this;do{var gU=gW.children.splice(gW.children.length-5,5);var gV=new fY(gU);if(!gW.parent){var gX=new fY(gW.children);gX.parent=gW;gW.children=[gX,gV];gW=gX}else{gW.size-=gV.size;gW.height-=gV.height;var i=dy(gW.parent.children,gW);gW.parent.children.splice(i+1,0,gV)}gV.parent=gW.parent}while(gW.children.length>10);gW.parent.maybeSpill()};fY.prototype.iterN=function(gU,g1,g0){var gZ=this;for(var gV=0;gV<this.children.length;++gV){var gY=gZ.children[gV],gX=gY.chunkSize();if(gU<gX){var gW=Math.min(g1,gX-gU);if(gY.iterN(gU,gW,g0)){return true}if((g1-=gW)==0){break}gU=0}else{gU-=gX}}};var dP=function(gW,gV,i){var gX=this;if(i){for(var gU in i){if(i.hasOwnProperty(gU)){gX[gU]=i[gU]}}}this.doc=gW;this.node=gV};dP.prototype.clear=function(){var g0=this;var gV=this.doc.cm,gX=this.line.widgets,gW=this.line,gZ=bW(gW);if(gZ==null||!gX){return}for(var gY=0;gY<gX.length;++gY){if(gX[gY]==g0){gX.splice(gY--,1)}}if(!gX.length){gW.widgets=null}var gU=db(this);gH(gW,Math.max(0,gW.height-gU));if(gV){c0(gV,function(){ee(gV,gW,-gU);S(gV,gZ,"widget")});ag(gV,"lineWidgetCleared",gV,this,gZ)}};dP.prototype.changed=function(){var gX=this;var gU=this.height,i=this.doc.cm,gV=this.line;this.height=null;var gW=db(this)-gU;if(!gW){return}gH(gV,gV.height+gW);if(i){c0(i,function(){i.curOp.forceUpdate=true;ee(i,gV,gW);ag(i,"lineWidgetChanged",i,gX,bW(gV))})}};bI(dP);function ee(i,gU,gV){if(bV(gU)<((i.curOp&&i.curOp.scrollTop)||i.doc.scrollTop)){cZ(i,null,gV)}}function bP(gY,gX,gV,gU){var gW=new dP(gY,gV,gU);var i=gY.cm;if(i&&gW.noHScroll){i.display.alignWidgets=true}eV(gY,gX,"widget",function(g0){var g1=g0.widgets||(g0.widgets=[]);if(gW.insertAt==null){g1.push(gW)}else{g1.splice(Math.min(g1.length-1,Math.max(0,gW.insertAt)),0,gW)}gW.line=g0;if(i&&!fW(gY,g0)){var gZ=bV(g0)<gY.scrollTop;gH(g0,g0.height+db(gW));if(gZ){cZ(i,null,gW.height)}i.curOp.forceUpdate=true}return true});ag(i,"lineWidgetAdded",i,gW,typeof gX=="number"?gX:bW(gX));return gW}var a7=0;var R=function(gU,i){this.lines=[];this.type=i;this.doc=gU;this.id=++a7};R.prototype.clear=function(){var gZ=this;if(this.explicitlyCleared){return}var g3=this.doc.cm,gW=g3&&!g3.curOp;if(gW){cW(g3)}if(fL(this,"clear")){var g4=this.find();if(g4){ag(this,"clear",g4.from,g4.to)}}var gX=null,g1=null;for(var gY=0;gY<this.lines.length;++gY){var g5=gZ.lines[gY];var g2=fB(g5.markedSpans,gZ);if(g3&&!gZ.collapsed){S(g3,bW(g5),"text")}else{if(g3){if(g2.to!=null){g1=bW(g5)}if(g2.from!=null){gX=bW(g5)}}}g5.markedSpans=e6(g5.markedSpans,g2);if(g2.from==null&&gZ.collapsed&&!fW(gZ.doc,g5)&&g3){gH(g5,a1(g3.display))}}if(g3&&this.collapsed&&!g3.options.lineWrapping){for(var gV=0;gV<this.lines.length;++gV){var gU=y(gZ.lines[gV]),g0=eG(gU);if(g0>g3.display.maxLineLength){g3.display.maxLine=gU;g3.display.maxLineLength=g0;g3.display.maxLineChanged=true}}}if(gX!=null&&g3&&this.collapsed){aj(g3,gX,g1+1)}this.lines.length=0;this.explicitlyCleared=true;if(this.atomic&&this.doc.cantEdit){this.doc.cantEdit=false;if(g3){eT(g3.doc)}}if(g3){ag(g3,"markerCleared",g3,this,gX,g1)}if(gW){ao(g3)}if(this.parent){this.parent.clear()}};R.prototype.find=function(gX,gV){var g1=this;if(gX==null&&this.type=="bookmark"){gX=1}var g0,gZ;for(var gW=0;gW<this.lines.length;++gW){var gU=g1.lines[gW];var gY=fB(gU.markedSpans,g1);if(gY.from!=null){g0=X(gV?gU:bW(gU),gY.from);if(gX==-1){return g0}}if(gY.to!=null){gZ=X(gV?gU:bW(gU),gY.to);if(gX==1){return gZ}}}return g0&&{from:g0,to:gZ}};R.prototype.changed=function(){var gW=this;var gV=this.find(-1,true),gU=this,i=this.doc.cm;if(!gV||!i){return}c0(i,function(){var gY=gV.line,gZ=bW(gV.line);var gX=fD(i,gZ);if(gX){aw(gX);i.curOp.selectionChanged=i.curOp.forceUpdate=true}i.curOp.updateMaxLine=true;if(!fW(gU.doc,gY)&&gU.height!=null){var g1=gU.height;gU.height=null;var g0=db(gU)-g1;if(g0){gH(gY,gY.height+g0)}}ag(i,"markerChanged",i,gW)})};R.prototype.attachLine=function(i){if(!this.lines.length&&this.doc.cm){var gU=this.doc.cm.curOp;if(!gU.maybeHiddenMarkers||dy(gU.maybeHiddenMarkers,this)==-1){(gU.maybeUnhiddenMarkers||(gU.maybeUnhiddenMarkers=[])).push(this)}}this.lines.push(i)};R.prototype.detachLine=function(i){this.lines.splice(dy(this.lines,i),1);if(!this.lines.length&&this.doc.cm){var gU=this.doc.cm.curOp;(gU.maybeHiddenMarkers||(gU.maybeHiddenMarkers=[])).push(this)}};bI(R);function e3(g2,g0,g1,g4,gY){if(g4&&g4.shared){return O(g2,g0,g1,g4,gY)}if(g2.cm&&!g2.cm.curOp){return de(g2.cm,e3)(g2,g0,g1,g4,gY)}var gX=new R(g2,gY),g3=cq(g0,g1);if(g4){aQ(g4,gX,false)}if(g3>0||g3==0&&gX.clearWhenEmpty!==false){return gX}if(gX.replacedWith){gX.collapsed=true;gX.widgetNode=gC("span",[gX.replacedWith],"CodeMirror-widget");gX.widgetNode.setAttribute("role","presentation");if(!g4.handleMouseEvents){gX.widgetNode.setAttribute("cm-ignore-events","true")}if(g4.insertLeft){gX.widgetNode.insertLeft=true}}if(gX.collapsed){if(z(g2,g0.line,g0,g1,gX)||g0.line!=g1.line&&z(g2,g1.line,g0,g1,gX)){throw new Error("Inserting collapsed marker partially overlapping an existing one")}bF()}if(gX.addToHistory){gg(g2,{from:g0,to:g1,origin:"markText"},g2.sel,NaN)}var gV=g0.line,gZ=g2.cm,gU;g2.iter(gV,g1.line+1,function(i){if(gZ&&gX.collapsed&&!gZ.options.lineWrapping&&y(i)==gZ.display.maxLine){gU=true}if(gX.collapsed&&gV!=g0.line){gH(i,0)}co(i,new eB(gX,gV==g0.line?g0.ch:null,gV==g1.line?g1.ch:null));++gV});if(gX.collapsed){g2.iter(g0.line,g1.line+1,function(i){if(fW(g2,i)){gH(i,0)}})}if(gX.clearOnEnter){b6(gX,"beforeCursorEnter",function(){return gX.clear()})}if(gX.readOnly){f1();if(g2.history.done.length||g2.history.undone.length){g2.clearHistory()}}if(gX.collapsed){gX.id=++a7;gX.atomic=true}if(gZ){if(gU){gZ.curOp.updateMaxLine=true}if(gX.collapsed){aj(gZ,g0.line,g1.line+1)}else{if(gX.className||gX.title||gX.startStyle||gX.endStyle||gX.css){for(var gW=g0.line;gW<=g1.line;gW++){S(gZ,gW,"text")}}}if(gX.atomic){eT(gZ.doc)}ag(gZ,"markerAdded",gZ,gX)}return gX}var x=function(gW,gV){var gX=this;this.markers=gW;this.primary=gV;for(var gU=0;gU<gW.length;++gU){gW[gU].parent=gX}};x.prototype.clear=function(){var gV=this;if(this.explicitlyCleared){return}this.explicitlyCleared=true;for(var gU=0;gU<this.markers.length;++gU){gV.markers[gU].clear()}ag(this,"clear")};x.prototype.find=function(gU,i){return this.primary.find(gU,i)};bI(x);function O(gX,g0,gZ,i,gV){i=aQ(i);i.shared=false;var gY=[e3(gX,g0,gZ,i,gV)],gU=gY[0];var gW=i.widgetNode;eo(gX,function(g2){if(gW){i.widgetNode=gW.cloneNode(true)}gY.push(e3(g2,ge(g2,g0),ge(g2,gZ),i,gV));for(var g1=0;g1<g2.linked.length;++g1){if(g2.linked[g1].isParent){return}}gU=f9(gY)});return new x(gY,gU)}function fe(i){return i.findMarks(X(i.first,0),i.clipPos(X(i.lastLine())),function(gU){return gU.parent})}function dT(gZ,g0){for(var gX=0;gX<g0.length;gX++){var gV=g0[gX],g1=gV.find();var gU=gZ.clipPos(g1.from),gY=gZ.clipPos(g1.to);if(cq(gU,gY)){var gW=e3(gZ,gU,gY,gV.primary,gV.primary.type);gV.markers.push(gW);gW.parent=gV}}}function eI(gW){var gU=function(gZ){var gX=gW[gZ],g1=[gX.primary.doc];eo(gX.primary.doc,function(i){return g1.push(i)});for(var gY=0;gY<gX.markers.length;gY++){var g0=gX.markers[gY];if(dy(g1,g0.doc)==-1){g0.parent=null;gX.markers.splice(gY--,1)}}};for(var gV=0;gV<gW.length;gV++){gU(gV)}}var cE=0;var av=function(gX,gW,i,gV,gU){if(!(this instanceof av)){return new av(gX,gW,i,gV,gU)}if(i==null){i=0}fY.call(this,[new fq([new gG("",null)])]);this.first=i;this.scrollTop=this.scrollLeft=0;this.cantEdit=false;this.cleanGeneration=1;this.frontier=i;var gY=X(i,0);this.sel=fh(gY);this.history=new gr(null);this.id=++cE;this.modeOption=gW;this.lineSep=gV;this.direction=(gU=="rtl")?"rtl":"ltr";this.extend=false;if(typeof gX=="string"){gX=this.splitLines(gX)}fZ(this,{from:gY,to:gY,text:gX});b3(this,fh(gY),ab)};av.prototype=cw(fY.prototype,{constructor:av,iter:function(gV,gU,i){if(i){this.iterN(gV-this.first,gU-gV,i)}else{this.iterN(this.first,this.first+this.size,gV)}},insert:function(gV,gW){var gU=0;for(var gX=0;gX<gW.length;++gX){gU+=gW[gX].height}this.insertInner(gV-this.first,gW,gU)},remove:function(i,gU){this.removeInner(i-this.first,gU)},getValue:function(gU){var i=a5(this,this.first,this.first+this.size);if(gU===false){return i}return i.join(gU||this.lineSeparator())},setValue:cR(function(gU){var gV=X(this.first,0),i=this.first+this.size-1;bj(this,{from:gV,to:X(i,fG(this,i).text.length),text:this.splitLines(gU),origin:"setValue",full:true},true);b3(this,fh(gV))}),replaceRange:function(gU,gW,gV,i){gW=ge(this,gW);gV=gV?ge(this,gV):gW;a4(this,gU,gW,gV,i)},getRange:function(gW,gV,gU){var i=gE(this,ge(this,gW),ge(this,gV));if(gU===false){return i}return i.join(gU||this.lineSeparator())},getLine:function(gU){var i=this.getLineHandle(gU);return i&&i.text},getLineHandle:function(i){if(cj(this,i)){return fG(this,i)}},getLineNumber:function(i){return bW(i)},getLineHandleVisualStart:function(i){if(typeof i=="number"){i=fG(this,i)}return y(i)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(i){return ge(this,i)},getCursor:function(gV){var i=this.sel.primary(),gU;if(gV==null||gV=="head"){gU=i.head}else{if(gV=="anchor"){gU=i.anchor}else{if(gV=="end"||gV=="to"||gV===false){gU=i.to()}else{gU=i.from()}}}return gU},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:cR(function(i,gV,gU){G(this,ge(this,typeof i=="number"?X(i,gV||0):i),null,gU)}),setSelection:cR(function(gU,gV,i){G(this,ge(this,gU),ge(this,gV||gU),i)}),extendSelection:cR(function(gV,i,gU){gw(this,ge(this,gV),i&&ge(this,i),gU)}),extendSelections:cR(function(gU,i){ax(this,eg(this,gU),i)}),extendSelectionsBy:cR(function(gV,i){var gU=b2(this.sel.ranges,gV);ax(this,eg(this,gU),i)}),setSelections:cR(function(gU,gY,gW){var gZ=this;if(!gU.length){return}var gV=[];for(var gX=0;gX<gU.length;gX++){gV[gX]=new ec(ge(gZ,gU[gX].anchor),ge(gZ,gU[gX].head))}if(gY==null){gY=Math.min(gU.length-1,this.sel.primIndex)}b3(this,cJ(gV,gY),gW)}),addSelection:cR(function(gV,gW,gU){var i=this.sel.ranges.slice(0);i.push(new ec(ge(this,gV),ge(this,gW||gV)));b3(this,cJ(i,i.length-1),gU)}),getSelection:function(gY){var gZ=this;var gV=this.sel.ranges,gU;for(var gW=0;gW<gV.length;gW++){var gX=gE(gZ,gV[gW].from(),gV[gW].to());gU=gU?gU.concat(gX):gX}if(gY===false){return gU}else{return gU.join(gY||this.lineSeparator())}},getSelections:function(gY){var gZ=this;var gX=[],gU=this.sel.ranges;for(var gV=0;gV<gU.length;gV++){var gW=gE(gZ,gU[gV].from(),gU[gV].to());if(gY!==false){gW=gW.join(gY||gZ.lineSeparator())}gX[gV]=gW}return gX},replaceSelection:function(gW,gY,gU){var gX=[];for(var gV=0;gV<this.sel.ranges.length;gV++){gX[gV]=gW}this.replaceSelections(gX,gY,gU||"+input")},replaceSelections:cR(function(gV,g1,g3){var gZ=this;var g2=[],gX=this.sel;for(var gY=0;gY<gX.ranges.length;gY++){var g0=gX.ranges[gY];g2[gY]={from:g0.from(),to:g0.to(),text:gZ.splitLines(gV[gY]),origin:g3}}var gU=g1&&g1!="end"&&ah(this,g2,g1);for(var gW=g2.length-1;gW>=0;gW--){bj(gZ,g2[gW])}if(gU){fz(this,gU)}else{if(this.cm){f8(this.cm)}}}),undo:cR(function(){ci(this,"undo")}),redo:cR(function(){ci(this,"redo")}),undoSelection:cR(function(){ci(this,"undo",true)}),redoSelection:cR(function(){ci(this,"redo",true)}),setExtending:function(i){this.extend=i},getExtending:function(){return this.extend},historySize:function(){var gX=this.history,gU=0,gW=0;for(var gV=0;gV<gX.done.length;gV++){if(!gX.done[gV].ranges){++gU}}for(var gY=0;gY<gX.undone.length;gY++){if(!gX.undone[gY].ranges){++gW}}return{undo:gU,redo:gW}},clearHistory:function(){this.history=new gr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(true)},changeGeneration:function(i){if(i){this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null}return this.history.generation},isClean:function(i){return this.history.generation==(i||this.cleanGeneration)},getHistory:function(){return{done:bY(this.history.done),undone:bY(this.history.undone)}},setHistory:function(gU){var i=this.history=new gr(this.history.maxGeneration);i.done=bY(gU.done.slice(0),null,true);i.undone=bY(gU.undone.slice(0),null,true)},setGutterMarker:cR(function(i,gU,gV){return eV(this,i,"gutter",function(gW){var gX=gW.gutterMarkers||(gW.gutterMarkers={});gX[gU]=gV;if(!gV&&fl(gX)){gW.gutterMarkers=null}return true})}),clearGutter:cR(function(i){var gU=this;this.iter(function(gV){if(gV.gutterMarkers&&gV.gutterMarkers[i]){eV(gU,gV,"gutter",function(){gV.gutterMarkers[i]=null;if(fl(gV.gutterMarkers)){gV.gutterMarkers=null}return true})}})}),lineInfo:function(i){var gU;if(typeof i=="number"){if(!cj(this,i)){return null}gU=i;i=fG(this,i);if(!i){return null}}else{gU=bW(i);if(gU==null){return null}}return{line:gU,handle:i,text:i.text,gutterMarkers:i.gutterMarkers,textClass:i.textClass,bgClass:i.bgClass,wrapClass:i.wrapClass,widgets:i.widgets}},addLineClass:cR(function(gV,gU,i){return eV(this,gV,gU=="gutter"?"gutter":"class",function(gW){var gX=gU=="text"?"textClass":gU=="background"?"bgClass":gU=="gutter"?"gutterClass":"wrapClass";if(!gW[gX]){gW[gX]=i}else{if(T(i).test(gW[gX])){return false}else{gW[gX]+=" "+i}}return true})}),removeLineClass:cR(function(gV,gU,i){return eV(this,gV,gU=="gutter"?"gutter":"class",function(gX){var g0=gU=="text"?"textClass":gU=="background"?"bgClass":gU=="gutter"?"gutterClass":"wrapClass";var gZ=gX[g0];if(!gZ){return false}else{if(i==null){gX[g0]=null}else{var gY=gZ.match(T(i));if(!gY){return false}var gW=gY.index+gY[0].length;gX[g0]=gZ.slice(0,gY.index)+(!gY.index||gW==gZ.length?"":" ")+gZ.slice(gW)||null}}return true})}),addLineWidget:cR(function(gV,gU,i){return bP(this,gV,gU,i)}),removeLineWidget:function(i){i.clear()},markText:function(gV,gU,i){return e3(this,ge(this,gV),ge(this,gU),i,i&&i.type||"range")},setBookmark:function(gV,i){var gU={replacedWith:i&&(i.nodeType==null?i.widget:i),insertLeft:i&&i.insertLeft,clearWhenEmpty:false,shared:i&&i.shared,handleMouseEvents:i&&i.handleMouseEvents};gV=ge(this,gV);return e3(this,gV,gV,gU,"bookmark")},findMarksAt:function(gY){gY=ge(this,gY);var gX=[],gV=fG(this,gY.line).markedSpans;if(gV){for(var gU=0;gU<gV.length;++gU){var gW=gV[gU];if((gW.from==null||gW.from<=gY.ch)&&(gW.to==null||gW.to>=gY.ch)){gX.push(gW.marker.parent||gW.marker)}}}return gX},findMarks:function(gX,gW,i){gX=ge(this,gX);gW=ge(this,gW);var gU=[],gV=gX.line;this.iter(gX.line,gW.line+1,function(gY){var g0=gY.markedSpans;if(g0){for(var gZ=0;gZ<g0.length;gZ++){var g1=g0[gZ];if(!(g1.to!=null&&gV==gX.line&&gX.ch>=g1.to||g1.from==null&&gV!=gX.line||g1.from!=null&&gV==gW.line&&g1.from>=gW.ch)&&(!i||i(g1.marker))){gU.push(g1.marker.parent||g1.marker)}}}++gV});return gU},getAllMarks:function(){var i=[];this.iter(function(gV){var gU=gV.markedSpans;if(gU){for(var gW=0;gW<gU.length;++gW){if(gU[gW].from!=null){i.push(gU[gW].marker)}}}});return i},posFromIndex:function(gV){var i,gW=this.first,gU=this.lineSeparator().length;this.iter(function(gX){var gY=gX.text.length+gU;if(gY>gV){i=gV;return true}gV-=gY;++gW});return ge(this,X(gW,i))},indexFromPos:function(gV){gV=ge(this,gV);var i=gV.ch;if(gV.line<this.first||gV.ch<0){return 0}var gU=this.lineSeparator().length;this.iter(this.first,gV.line,function(gW){i+=gW.text.length+gU});return i},copy:function(i){var gU=new av(a5(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);gU.scrollTop=this.scrollTop;gU.scrollLeft=this.scrollLeft;gU.sel=this.sel;gU.extend=false;if(i){gU.history.undoDepth=this.history.undoDepth;gU.setHistory(this.getHistory())}return gU},linkedDoc:function(i){if(!i){i={}}var gW=this.first,gV=this.first+this.size;if(i.from!=null&&i.from>gW){gW=i.from}if(i.to!=null&&i.to<gV){gV=i.to}var gU=new av(a5(this,gW,gV),i.mode||this.modeOption,gW,this.lineSep,this.direction);if(i.sharedHist){gU.history=this.history}(this.linked||(this.linked=[])).push({doc:gU,sharedHist:i.sharedHist});gU.linked=[{doc:this,isParent:true,sharedHist:i.sharedHist}];dT(gU,fe(this));return gU},unlinkDoc:function(gV){var gY=this;if(gV instanceof H){gV=gV.doc}if(this.linked){for(var gW=0;gW<this.linked.length;++gW){var gX=gY.linked[gW];if(gX.doc!=gV){continue}gY.linked.splice(gW,1);gV.unlinkDoc(gY);eI(fe(gY));break}}if(gV.history==this.history){var gU=[gV.id];eo(gV,function(i){return gU.push(i.id)},true);gV.history=new gr(null);gV.history.done=bY(this.history.done,gU);gV.history.undone=bY(this.history.undone,gU)}},iterLinkedDocs:function(i){eo(this,i)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(i){if(this.lineSep){return i.split(this.lineSep)}return go(i)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:cR(function(i){if(i!="rtl"){i="ltr"}if(i==this.direction){return}this.direction=i;this.iter(function(gU){return gU.order=null});if(this.cm){ef(this.cm)}})});av.prototype.eachLine=av.prototype.iter;var ai=0;function bn(g2){var g4=this;dq(g4);if(aU(g4,g2)||be(g4.display,g2)){return}cT(g2);if(dY){ai=+new Date}var g3=cA(g4,g2,true),gV=g2.dataTransfer.files;if(!g3||g4.isReadOnly()){return}if(gV&&gV.length&&window.FileReader&&window.File){var gY=gV.length,g5=Array(gY),gW=0;var g0=function(g8,g7){if(g4.options.allowDropFileTypes&&dy(g4.options.allowDropFileTypes,g8.type)==-1){return}var g6=new FileReader;g6.onload=de(g4,function(){var i=g6.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(i)){i=""}g5[g7]=i;if(++gW==gY){g3=ge(g4.doc,g3);var g9={from:g3,to:g3,text:g4.doc.splitLines(g5.join(g4.doc.lineSeparator())),origin:"paste"};bj(g4.doc,g9);fz(g4.doc,fh(g3,da(g9)))}});g6.readAsText(g8)};for(var g1=0;g1<gY;++g1){g0(gV[g1],g1)}}else{if(g4.state.draggingText&&g4.doc.sel.contains(g3)>-1){g4.state.draggingText(g2);setTimeout(function(){return g4.display.input.focus()},20);return}try{var gU=g2.dataTransfer.getData("Text");if(gU){var gZ;if(g4.state.draggingText&&!g4.state.draggingText.copy){gZ=g4.listSelections()}eJ(g4.doc,fh(g3,g3));if(gZ){for(var gX=0;gX<gZ.length;++gX){a4(g4.doc,"",gZ[gX].anchor,gZ[gX].head,"drag")}}g4.replaceSelection(gU,"around","paste");g4.display.input.focus()}}catch(g2){}}}function Q(i,gV){if(dY&&(!i.state.draggingText||+new Date-ai<100)){eL(gV);return}if(aU(i,gV)||be(i.display,gV)){return}gV.dataTransfer.setData("Text",i.getSelection());gV.dataTransfer.effectAllowed="copyMove";if(gV.dataTransfer.setDragImage&&!aE){var gU=gC("img",null,null,"position: fixed; left: 0; top: 0;");gU.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==";if(ej){gU.width=gU.height=1;i.display.wrapper.appendChild(gU);gU._top=gU.offsetTop}gV.dataTransfer.setDragImage(gU,0,0);if(ej){gU.parentNode.removeChild(gU)}}}function gR(i,gU){var gW=cA(i,gU);if(!gW){return}var gV=document.createDocumentFragment();A(i,gW,gV);if(!i.display.dragCursor){i.display.dragCursor=gC("div",null,"CodeMirror-cursors CodeMirror-dragcursors");i.display.lineSpace.insertBefore(i.display.dragCursor,i.display.cursorDiv)}b1(i.display.dragCursor,gV)}function dq(i){if(i.display.dragCursor){i.display.lineSpace.removeChild(i.display.dragCursor);i.display.dragCursor=null}}function aC(gX){if(!document.body.getElementsByClassName){return}var gW=document.body.getElementsByClassName("CodeMirror");for(var gV=0;gV<gW.length;gV++){var gU=gW[gV].CodeMirror;if(gU){gX(gU)}}}var cQ=false;function bm(){if(cQ){return}f7();cQ=true}function f7(){var i;b6(window,"resize",function(){if(i==null){i=setTimeout(function(){i=null;aC(aW)},100)}});b6(window,"blur",function(){return aC(aY)})}function aW(i){var gU=i.display;if(gU.lastWrapHeight==gU.wrapper.clientHeight&&gU.lastWrapWidth==gU.wrapper.clientWidth){return}gU.cachedCharWidth=gU.cachedTextHeight=gU.cachedPaddingH=null;gU.scrollbarsClipped=false;i.setSize()}var fH={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};for(var fX=0;fX<10;fX++){fH[fX+48]=fH[fX+96]=String(fX)}for(var gq=65;gq<=90;gq++){fH[gq]=String.fromCharCode(gq)}for(var gp=1;gp<=12;gp++){fH[gp+111]=fH[gp+63235]="F"+gp}var fC={};fC.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};fC.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};fC.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"};fC.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};fC["default"]=ch?fC.macDefault:fC.pcDefault;function dI(gV){var g1=gV.split(/-(?!$)/);gV=g1[g1.length-1];var g0,gZ,gU,gY;for(var gX=0;gX<g1.length-1;gX++){var gW=g1[gX];if(/^(cmd|meta|m)$/i.test(gW)){gY=true}else{if(/^a(lt)?$/i.test(gW)){g0=true}else{if(/^(c|ctrl|control)$/i.test(gW)){gZ=true}else{if(/^s(hift)?$/i.test(gW)){gU=true}else{throw new Error("Unrecognized modifier name: "+gW)}}}}}if(g0){gV="Alt-"+gV}if(gZ){gV="Ctrl-"+gV}if(gY){gV="Cmd-"+gV}if(gU){gV="Shift-"+gV}return gV}function cU(g1){var gV={};for(var g0 in g1){if(g1.hasOwnProperty(g0)){var g2=g1[g0];if(/^(name|fallthrough|(de|at)tach)$/.test(g0)){continue}if(g2=="..."){delete g1[g0];continue}var g3=b2(g0.split(" "),dI);for(var gZ=0;gZ<g3.length;gZ++){var gX=(void 0),gW=(void 0);if(gZ==g3.length-1){gW=g3.join(" ");gX=g2}else{gW=g3.slice(0,gZ+1).join(" ");gX="..."}var gY=gV[gW];if(!gY){gV[gW]=gX}else{if(gY!=gX){throw new Error("Inconsistent bindings for "+gW)}}}delete g1[g0]}}for(var gU in gV){g1[gU]=gV[gU]}return g1}function j(gX,g0,gZ,gW){g0=gv(g0);var gY=g0.call?g0.call(gX,gW):g0[gX];if(gY===false){return"nothing"}if(gY==="..."){return"multi"}if(gY!=null&&gZ(gY)){return"handled"}if(g0.fallthrough){if(Object.prototype.toString.call(g0.fallthrough)!="[object Array]"){return j(gX,g0.fallthrough,gZ,gW)}for(var gV=0;gV<g0.fallthrough.length;gV++){var gU=j(gX,g0.fallthrough[gV],gZ,gW);if(gU){return gU}}}}function eX(gU){var i=typeof gU=="string"?gU:fH[gU.keyCode];return i=="Ctrl"||i=="Alt"||i=="Shift"||i=="Mod"}function fR(gU,gW){if(ej&&gU.keyCode==34&&gU["char"]){return false}var gV=fH[gU.keyCode],i=gV;if(i==null||gU.altGraphKey){return false}if(gU.altKey&&gV!="Alt"){i="Alt-"+i}if((bZ?gU.metaKey:gU.ctrlKey)&&gV!="Ctrl"){i="Ctrl-"+i}if((bZ?gU.ctrlKey:gU.metaKey)&&gV!="Cmd"){i="Cmd-"+i}if(!gW&&gU.shiftKey&&gV!="Shift"){i="Shift-"+i}return i}function gv(i){return typeof i=="string"?fC[i]:i}function fo(gU,g0){var gV=gU.doc.sel.ranges,gY=[];for(var gX=0;gX<gV.length;gX++){var gW=g0(gV[gX]);while(gY.length&&cq(gW.from,f9(gY).to)<=0){var gZ=gY.pop();if(cq(gZ.from,gW.from)<0){gW.from=gZ.from;break}}gY.push(gW)}c0(gU,function(){for(var g1=gY.length-1;g1>=0;g1--){a4(gU.doc,"",gY[g1].from,gY[g1].to,"+delete")}f8(gU)})}var e0={selectAll:an,singleSelection:function(i){return i.setSelection(i.getCursor("anchor"),i.getCursor("head"),ab)},killLine:function(i){return fo(i,function(gV){if(gV.empty()){var gU=fG(i.doc,gV.head.line).text.length;if(gV.head.ch==gU&&gV.head.line<i.lastLine()){return{from:gV.head,to:X(gV.head.line+1,0)}}else{return{from:gV.head,to:X(gV.head.line,gU)}}}else{return{from:gV.from(),to:gV.to()}}})},deleteLine:function(i){return fo(i,function(gU){return({from:X(gU.from().line,0),to:ge(i.doc,X(gU.to().line+1,0))})})},delLineLeft:function(i){return fo(i,function(gU){return({from:X(gU.from().line,0),to:gU.from()})})},delWrappedLineLeft:function(i){return fo(i,function(gU){var gW=i.charCoords(gU.head,"div").top+5;var gV=i.coordsChar({left:0,top:gW},"div");return{from:gV,to:gU.from()}})},delWrappedLineRight:function(i){return fo(i,function(gU){var gW=i.charCoords(gU.head,"div").top+5;var gV=i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gW},"div");return{from:gU.from(),to:gV}})},undo:function(i){return i.undo()},redo:function(i){return i.redo()},undoSelection:function(i){return i.undoSelection()},redoSelection:function(i){return i.redoSelection()},goDocStart:function(i){return i.extendSelection(X(i.firstLine(),0))},goDocEnd:function(i){return i.extendSelection(X(i.lastLine()))},goLineStart:function(i){return i.extendSelectionsBy(function(gU){return bB(i,gU.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(i){return i.extendSelectionsBy(function(gU){return dW(i,gU.head)},{origin:"+move",bias:1})},goLineEnd:function(i){return i.extendSelectionsBy(function(gU){return d4(i,gU.head.line)},{origin:"+move",bias:-1})},goLineRight:function(i){return i.extendSelectionsBy(function(gU){var gV=i.charCoords(gU.head,"div").top+5;return i.coordsChar({left:i.display.lineDiv.offsetWidth+100,top:gV},"div")},c9)},goLineLeft:function(i){return i.extendSelectionsBy(function(gU){var gV=i.charCoords(gU.head,"div").top+5;return i.coordsChar({left:0,top:gV},"div")},c9)},goLineLeftSmart:function(i){return i.extendSelectionsBy(function(gU){var gV=i.charCoords(gU.head,"div").top+5;var gW=i.coordsChar({left:0,top:gV},"div");if(gW.ch<i.getLine(gW.line).search(/\S/)){return dW(i,gU.head)}return gW},c9)},goLineUp:function(i){return i.moveV(-1,"line")},goLineDown:function(i){return i.moveV(1,"line")},goPageUp:function(i){return i.moveV(-1,"page")},goPageDown:function(i){return i.moveV(1,"page")},goCharLeft:function(i){return i.moveH(-1,"char")},goCharRight:function(i){return i.moveH(1,"char")},goColumnLeft:function(i){return i.moveH(-1,"column")},goColumnRight:function(i){return i.moveH(1,"column")},goWordLeft:function(i){return i.moveH(-1,"word")},goGroupRight:function(i){return i.moveH(1,"group")},goGroupLeft:function(i){return i.moveH(-1,"group")},goWordRight:function(i){return i.moveH(1,"word")},delCharBefore:function(i){return i.deleteH(-1,"char")},delCharAfter:function(i){return i.deleteH(1,"char")},delWordBefore:function(i){return i.deleteH(-1,"word")},delWordAfter:function(i){return i.deleteH(1,"word")},delGroupBefore:function(i){return i.deleteH(-1,"group")},delGroupAfter:function(i){return i.deleteH(1,"group")},indentAuto:function(i){return i.indentSelection("smart")},indentMore:function(i){return i.indentSelection("add")},indentLess:function(i){return i.indentSelection("subtract")},insertTab:function(i){return i.replaceSelection("\t")},insertSoftTab:function(gU){var gW=[],gV=gU.listSelections(),gZ=gU.options.tabSize;for(var gY=0;gY<gV.length;gY++){var g0=gV[gY].from();var gX=b0(gU.getLine(g0.line),g0.ch,gZ);gW.push(cC(gZ-gX%gZ))}gU.replaceSelections(gW)},defaultTab:function(i){if(i.somethingSelected()){i.indentSelection("add")}else{i.execCommand("insertTab")}},transposeChars:function(i){return c0(i,function(){var gW=i.listSelections(),gV=[];for(var gX=0;gX<gW.length;gX++){if(!gW[gX].empty()){continue}var gZ=gW[gX].head,gU=fG(i.doc,gZ.line).text;if(gU){if(gZ.ch==gU.length){gZ=new X(gZ.line,gZ.ch-1)}if(gZ.ch>0){gZ=new X(gZ.line,gZ.ch+1);i.replaceRange(gU.charAt(gZ.ch-1)+gU.charAt(gZ.ch-2),X(gZ.line,gZ.ch-2),gZ,"+transpose")}else{if(gZ.line>i.doc.first){var gY=fG(i.doc,gZ.line-1).text;if(gY){gZ=new X(gZ.line,1);i.replaceRange(gU.charAt(0)+i.doc.lineSeparator()+gY.charAt(gY.length-1),X(gZ.line-1,gY.length-1),gZ,"+transpose")}}}}gV.push(new ec(gZ,gZ))}i.setSelections(gV)})},newlineAndIndent:function(i){return c0(i,function(){var gU=i.listSelections();for(var gV=gU.length-1;gV>=0;gV--){i.replaceRange(i.doc.lineSeparator(),gU[gV].anchor,gU[gV].head,"+input")}gU=i.listSelections();for(var gW=0;gW<gU.length;gW++){i.indentLine(gU[gW].from().line,null,true)}f8(i)})},openLine:function(i){return i.replaceSelection("\n","start")},toggleOverwrite:function(i){return i.toggleOverwrite()}};function bB(i,gV){var gU=fG(i.doc,gV);var gW=y(gU);if(gW!=gU){gV=bW(gW)}return eW(true,i,gW,gV,1)}function d4(i,gV){var gU=fG(i.doc,gV);var gW=cv(gU);if(gW!=gU){gV=bW(gW)}return eW(true,i,gU,gV,-1)}function dW(gU,gZ){var gY=bB(gU,gZ.line);var gV=fG(gU.doc,gY.line);var i=a(gV,gU.doc.direction);if(!i||i[0].level==0){var gX=Math.max(0,gV.text.search(/\S/));var gW=gZ.line==gY.line&&gZ.ch<=gX&&gZ.ch;return X(gY.line,gW?0:gX,gY.sticky)}return gY}function gn(gU,gX,i){if(typeof gX=="string"){gX=e0[gX];if(!gX){return false}}gU.display.input.ensurePolled();var gW=gU.display.shift,gV=false;try{if(gU.isReadOnly()){gU.state.suppressEdits=true}if(i){gU.display.shift=false}gV=gX(gU)!=cm}finally{gU.display.shift=gW;gU.state.suppressEdits=false}return gV}function ep(gV,gW,gY){for(var gX=0;gX<gV.state.keyMaps.length;gX++){var gU=j(gW,gV.state.keyMaps[gX],gY,gV);if(gU){return gU}}return(gV.options.extraKeys&&j(gW,gV.options.extraKeys,gY,gV))||j(gW,gV.options.keyMap,gY,gV)}var d0=new gT;function bg(gU,gW,gY,gX){var gV=gU.state.keySeq;if(gV){if(eX(gW)){return"handled"}d0.set(50,function(){if(gU.state.keySeq==gV){gU.state.keySeq=null;gU.display.input.reset()}});gW=gV+" "+gW}var i=ep(gU,gW,gX);if(i=="multi"){gU.state.keySeq=gW}if(i=="handled"){ag(gU,"keyHandled",gU,gW,gY)}if(i=="handled"||i=="multi"){cT(gY);p(gU)}if(gV&&!i&&/\'$/.test(gW)){cT(gY);return true}return !!i}function fJ(i,gV){var gU=fR(gV,true);if(!gU){return false}if(gV.shiftKey&&!i.state.keySeq){return bg(i,"Shift-"+gU,gV,function(gW){return gn(i,gW,true)})||bg(i,gU,gV,function(gW){if(typeof gW=="string"?/^go[A-Z]/.test(gW):gW.motion){return gn(i,gW)}})}else{return bg(i,gU,gV,function(gW){return gn(i,gW)})}}function eA(i,gV,gU){return bg(i,"'"+gU+"'",gV,function(gW){return gn(i,gW,true)})}var dD=null;function q(gW){var i=this;i.curOp.focus=d2();if(aU(i,gW)){return}if(dY&&l<11&&gW.keyCode==27){gW.returnValue=false}var gU=gW.keyCode;i.display.shift=gU==16||gW.shiftKey;var gV=fJ(i,gW);if(ej){dD=gV?gU:null;if(!gV&&gU==88&&!dp&&(ch?gW.metaKey:gW.ctrlKey)){i.replaceSelection("",null,"cut")}}if(gU==18&&!/\bCodeMirror-crosshair\b/.test(i.display.lineDiv.className)){au(i)}}function au(gU){var gV=gU.display.lineDiv;f3(gV,"CodeMirror-crosshair");function i(gW){if(gW.keyCode==18||!gW.altKey){h(gV,"CodeMirror-crosshair");ex(document,"keyup",i);ex(document,"mouseover",i)}}b6(document,"keyup",i);b6(document,"mouseover",i)}function bk(i){if(i.keyCode==16){this.doc.sel.shift=false}aU(this,i)}function cK(gX){var i=this;if(be(i.display,gX)||aU(i,gX)||gX.ctrlKey&&!gX.altKey||ch&&gX.metaKey){return}var gW=gX.keyCode,gU=gX.charCode;if(ej&&gW==dD){dD=null;cT(gX);return}if((ej&&(!gX.which||gX.which<10))&&fJ(i,gX)){return}var gV=String.fromCharCode(gU==null?gW:gU);if(gV=="\x08"){return}if(eA(i,gX,gV)){return}i.display.input.onKeyPress(gX)}function eP(gV){var i=this,gU=i.display;if(aU(i,gV)||gU.activeTouch&&gU.input.supportsTouch()){return}gU.input.ensurePolled();gU.shift=gV.shiftKey;if(be(gU,gV)){if(!dd){gU.scroller.draggable=false;setTimeout(function(){return gU.scroller.draggable=true},100)}return}if(m(i,gV)){return}var gW=cA(i,gV);window.focus();switch(gj(gV)){case 1:if(i.state.selectingText){i.state.selectingText(gV)}else{if(gW){ay(i,gV,gW)}else{if(M(gV)==gU.scroller){cT(gV)}}}break;case 2:if(dd){i.state.lastMiddleDown=+new Date}if(gW){gw(i.doc,gW)}setTimeout(function(){return gU.input.focus()},20);cT(gV);break;case 3:if(gK){az(i,gV)}else{am(i)}break}}var dC;var dt;function ay(gU,gZ,g0){if(dY){setTimeout(cI(s,gU),0)}else{gU.curOp.focus=d2()}var gV=+new Date,gX;if(dt&&dt.time>gV-400&&cq(dt.pos,g0)==0){gX="triple"}else{if(dC&&dC.time>gV-400&&cq(dC.pos,g0)==0){gX="double";dt={time:gV,pos:g0}}else{gX="single";dC={time:gV,pos:g0}}}var gY=gU.doc.sel,i=ch?gZ.metaKey:gZ.ctrlKey,gW;if(gU.options.dragDrop&&fb&&!gU.isReadOnly()&&gX=="single"&&(gW=gY.contains(g0))>-1&&(cq((gW=gY.ranges[gW]).from(),g0)<0||g0.xRel>0)&&(cq(gW.to(),g0)>0||g0.xRel<0)){a6(gU,gZ,g0,i)}else{n(gU,gZ,g0,gX,i)}}function a6(gV,gY,gZ,gU){var gX=gV.display,gW=+new Date;var i=de(gV,function(g0){if(dd){gX.scroller.draggable=false}gV.state.draggingText=false;ex(document,"mouseup",i);ex(gX.scroller,"drop",i);if(Math.abs(gY.clientX-g0.clientX)+Math.abs(gY.clientY-g0.clientY)<10){cT(g0);if(!gU&&+new Date-200<gW){gw(gV.doc,gZ)}if(dd||dY&&l==9){setTimeout(function(){document.body.focus();gX.input.focus()},20)}else{gX.input.focus()}}});if(dd){gX.scroller.draggable=true}gV.state.draggingText=i;i.copy=ch?gY.altKey:gY.ctrlKey;if(gX.scroller.dragDrop){gX.scroller.dragDrop()}b6(document,"mouseup",i);b6(gX.scroller,"drop",i)}function n(gX,hb,gW,gU,gZ){var g8=gX.display,hd=gX.doc;cT(hb);var gV,hc,gY=hd.sel,i=gY.ranges;if(gZ&&!hb.shiftKey){hc=hd.sel.contains(gW);if(hc>-1){gV=i[hc]}else{gV=new ec(gW,gW)}}else{gV=hd.sel.primary();hc=hd.sel.primIndex}if(gd?hb.shiftKey&&hb.metaKey:hb.altKey){gU="rect";if(!gZ){gV=new ec(gW,gW)}gW=cA(gX,hb,true,true);hc=-1}else{if(gU=="double"){var g9=gX.findWordAt(gW);if(gX.display.shift||hd.extend){gV=fV(hd,gV,g9.anchor,g9.head)}else{gV=g9}}else{if(gU=="triple"){var g2=new ec(X(gW.line,0),ge(hd,X(gW.line+1,0)));if(gX.display.shift||hd.extend){gV=fV(hd,gV,g2.anchor,g2.head)}else{gV=g2}}else{gV=fV(hd,gV,gW)}}}if(!gZ){hc=0;b3(hd,new gB([gV],0),N);gY=hd.sel}else{if(hc==-1){hc=i.length;b3(hd,cJ(i.concat([gV]),hc),{scroll:false,origin:"*mouse"})}else{if(i.length>1&&i[hc].empty()&&gU=="single"&&!hb.shiftKey){b3(hd,cJ(i.slice(0,hc).concat(i.slice(hc+1)),0),{scroll:false,origin:"*mouse"});gY=hd.sel}else{e(hd,hc,gV,N)}}}var g7=gW;function g6(hp){if(cq(g7,hp)==0){return}g7=hp;if(gU=="rect"){var hg=[],hm=gX.options.tabSize;var hf=b0(fG(hd,gW.line).text,gW.ch,hm);var hs=b0(fG(hd,hp.line).text,hp.ch,hm);var hh=Math.min(hf,hs),hq=Math.max(hf,hs);for(var ht=Math.min(gW.line,hp.line),hj=Math.min(gX.lastLine(),Math.max(gW.line,hp.line));ht<=hj;ht++){var hr=fG(hd,ht).text,hi=eK(hr,hh,hm);if(hh==hq){hg.push(new ec(X(ht,hi),X(ht,hi)))}else{if(hr.length>hi){hg.push(new ec(X(ht,hi),X(ht,eK(hr,hq,hm))))}}}if(!hg.length){hg.push(new ec(gW,gW))}b3(hd,cJ(gY.ranges.slice(0,hc).concat(hg),hc),{origin:"*mouse",scroll:false});gX.scrollIntoView(hp)}else{var hn=gV;var hk=hn.anchor,ho=hp;if(gU!="single"){var hl;if(gU=="double"){hl=gX.findWordAt(hp)}else{hl=new ec(X(hp.line,0),ge(hd,X(hp.line+1,0)))}if(cq(hl.anchor,hk)>0){ho=hl.head;hk=at(hn.from(),hl.anchor)}else{ho=hl.anchor;hk=bG(hn.to(),hl.head)}}var he=gY.ranges.slice(0);he[hc]=new ec(ge(hd,hk),ho);b3(hd,cJ(he,hc),N)}}var g4=g8.wrapper.getBoundingClientRect();var g0=0;function ha(hg){var he=++g0;var hi=cA(gX,hg,true,gU=="rect");if(!hi){return}if(cq(hi,g7)!=0){gX.curOp.focus=d2();g6(hi);var hh=cg(g8,hd);if(hi.line>=hh.to||hi.line<hh.from){setTimeout(de(gX,function(){if(g0==he){ha(hg)}}),150)}}else{var hf=hg.clientY<g4.top?-20:hg.clientY>g4.bottom?20:0;if(hf){setTimeout(de(gX,function(){if(g0!=he){return}g8.scroller.scrollTop+=hf;ha(hg)}),50)}}}function g3(he){gX.state.selectingText=false;g0=Infinity;cT(he);g8.input.focus();ex(document,"mousemove",g5);ex(document,"mouseup",g1);hd.history.lastSelOrigin=null}var g5=de(gX,function(he){if(!gj(he)){g3(he)}else{ha(he)}});var g1=de(gX,g3);gX.state.selectingText=g1;b6(document,"mousemove",g5);b6(document,"mouseup",g1)}function gS(g4,g0,g2,g3){var gV,gU;try{gV=g0.clientX;gU=g0.clientY}catch(g0){return false}if(gV>=Math.floor(g4.display.gutters.getBoundingClientRect().right)){return false}if(g3){cT(g0)}var g1=g4.display;var gZ=g1.lineDiv.getBoundingClientRect();if(gU>gZ.bottom||!fL(g4,g2)){return bU(g0)}gU-=gZ.top-g1.viewOffset;for(var gX=0;gX<g4.options.gutters.length;++gX){var gY=g1.gutters.childNodes[gX];if(gY&&gY.getBoundingClientRect().right>=gV){var g5=bQ(g4.doc,gU);var gW=g4.options.gutters[gX];aG(g4,g2,g4,g5,gW,g0);return bU(g0)}}}function m(i,gU){return gS(i,gU,"gutterClick",true)}function az(i,gU){if(be(i.display,gU)||dw(i,gU)){return}if(aU(i,gU,"contextmenu")){return}i.display.input.onContextMenu(gU)}function dw(i,gU){if(!fL(i,"gutterContextMenu")){return false}return gS(i,gU,"gutterContextMenu",false)}function c1(i){i.display.wrapper.className=i.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+i.options.theme.replace(/(^|\s)\s*/g," cm-s-");al(i)}var cn={toString:function(){return"CodeMirror.Init"}};var ft={};var bi={};function e5(i){var gV=i.optionHandlers;function gU(gW,gZ,gY,gX){i.defaults[gW]=gZ;if(gY){gV[gW]=gX?function(g0,g2,g1){if(g1!=cn){gY(g0,g2,g1)}}:gY}}i.defineOption=gU;i.Init=cn;gU("value","",function(gW,gX){return gW.setValue(gX)},true);gU("mode",null,function(gW,gX){gW.doc.modeOption=gX;bz(gW)},true);gU("indentUnit",2,bz,true);gU("indentWithTabs",false);gU("smartIndent",true);gU("tabSize",4,function(gW){eF(gW);al(gW);aj(gW)},true);gU("lineSeparator",null,function(gW,gZ){gW.doc.lineSep=gZ;if(!gZ){return}var gY=[],g0=gW.doc.first;gW.doc.iter(function(g1){for(var g3=0;;){var g2=g1.text.indexOf(gZ,g3);if(g2==-1){break}g3=g2+gZ.length;gY.push(X(g0,g2))}g0++});for(var gX=gY.length-1;gX>=0;gX--){a4(gW.doc,gZ,gY[gX],X(gY[gX].line,gY[gX].ch+gZ.length))}});gU("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(gW,gY,gX){gW.state.specialChars=new RegExp(gY.source+(gY.test("\t")?"":"|\t"),"g");if(gX!=cn){gW.refresh()}});gU("specialCharPlaceholder",fF,function(gW){return gW.refresh()},true);gU("electricChars",true);gU("inputStyle",ey?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},true);gU("spellcheck",false,function(gW,gX){return gW.getInputField().spellcheck=gX},true);gU("rtlMoveVisually",!aS);gU("wholeLineUpdateBefore",true);gU("theme","default",function(gW){c1(gW);dL(gW)},true);gU("keyMap","default",function(gW,g0,gX){var gY=gv(g0);var gZ=gX!=cn&&gv(gX);if(gZ&&gZ.detach){gZ.detach(gW,gY)}if(gY.attach){gY.attach(gW,gZ||null)}});gU("extraKeys",null);gU("lineWrapping",false,e4,true);gU("gutters",[],function(gW){cp(gW.options);dL(gW)},true);gU("fixedGutter",true,function(gW,gX){gW.display.gutters.style.left=gX?ed(gW.display)+"px":"0";gW.refresh()},true);gU("coverGutterNextToScrollbar",false,function(gW){return fp(gW)},true);gU("scrollbarStyle","native",function(gW){aF(gW);fp(gW);gW.display.scrollbars.setScrollTop(gW.doc.scrollTop);gW.display.scrollbars.setScrollLeft(gW.doc.scrollLeft)},true);gU("lineNumbers",false,function(gW){cp(gW.options);dL(gW)},true);gU("firstLineNumber",1,dL,true);gU("lineNumberFormatter",function(gW){return gW},dL,true);gU("showCursorWhenSelecting",false,bL,true);gU("resetSelectionOnContextMenu",true);gU("lineWiseCopyCut",true);gU("readOnly",false,function(gW,gX){if(gX=="nocursor"){aY(gW);gW.display.input.blur();gW.display.disabled=true}else{gW.display.disabled=false}gW.display.input.readOnlyChanged(gX)});gU("disableInput",false,function(gW,gX){if(!gX){gW.display.input.reset()}},true);gU("dragDrop",true,gz);gU("allowDropFileTypes",null);gU("cursorBlinkRate",530);gU("cursorScrollMargin",0);gU("cursorHeight",1,bL,true);gU("singleCursorHeightPerLine",true,bL,true);gU("workTime",100);gU("workDelay",100);gU("flattenSpans",true,eF,true);gU("addModeClass",false,eF,true);gU("pollInterval",100);gU("undoDepth",200,function(gW,gX){return gW.doc.history.undoDepth=gX});gU("historyEventDelay",1250);gU("viewportMargin",10,function(gW){return gW.refresh()},true);gU("maxHighlightLength",10000,eF,true);gU("moveInputWithCursor",true,function(gW,gX){if(!gX){gW.display.input.resetPosition()}});gU("tabindex",null,function(gW,gX){return gW.display.input.getField().tabIndex=gX||""});gU("autofocus",null);gU("direction","ltr",function(gW,gX){return gW.doc.setDirection(gX)},true)}function dL(i){eu(i);aj(i);e2(i)}function gz(gU,gX,gV){var gY=gV&&gV!=cn;if(!gX!=!gY){var gW=gU.display.dragFunctions;var i=gX?b6:ex;i(gU.display.scroller,"dragstart",gW.start);i(gU.display.scroller,"dragenter",gW.enter);i(gU.display.scroller,"dragover",gW.over);i(gU.display.scroller,"dragleave",gW.leave);i(gU.display.scroller,"drop",gW.drop)}}function e4(i){if(i.options.lineWrapping){f3(i.display.wrapper,"CodeMirror-wrap");i.display.sizer.style.minWidth="";i.display.sizerWidth=null}else{h(i.display.wrapper,"CodeMirror-wrap");f(i)}aa(i);aj(i);al(i);setTimeout(function(){return fp(i)},100)}function H(gU,gW){var g1=this;if(!(this instanceof H)){return new H(gU,gW)}this.options=gW=gW?aQ(gW):{};aQ(ft,gW,false);cp(gW);var g0=gW.value;if(typeof g0=="string"){g0=new av(g0,gW.mode,null,gW.lineSeparator,gW.direction)}this.doc=g0;var gV=new H.inputStyles[gW.inputStyle](this);var gZ=this.display=new e7(gU,g0,gV);gZ.wrapper.CodeMirror=this;eu(this);c1(this);if(gW.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap"}aF(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:false,delayingBlurEvent:false,focused:false,suppressEdits:false,pasteIncoming:false,cutIncoming:false,selectingText:false,draggingText:false,highlight:new gT(),keySeq:null,specialChars:null};if(gW.autofocus&&!ey){gZ.input.focus()}if(dY&&l<11){setTimeout(function(){return g1.display.input.reset(true)},20)}gm(this);bm();cW(this);this.curOp.forceUpdate=true;et(this,g0);if((gW.autofocus&&!ey)||this.hasFocus()){setTimeout(cI(cO,this),20)}else{aY(this)}for(var gY in bi){if(bi.hasOwnProperty(gY)){bi[gY](g1,gW[gY],cn)}}em(this);if(gW.finishInit){gW.finishInit(this)}for(var gX=0;gX<bb.length;++gX){bb[gX](g1)}ao(this);if(dd&&gW.lineWrapping&&getComputedStyle(gZ.lineDiv).textRendering=="optimizelegibility"){gZ.lineDiv.style.textRendering="auto"}}H.defaults=ft;H.optionHandlers=bi;function gm(gU){var gY=gU.display;b6(gY.scroller,"mousedown",de(gU,eP));if(dY&&l<11){b6(gY.scroller,"dblclick",de(gU,function(g2){if(aU(gU,g2)){return}var g3=cA(gU,g2);if(!g3||m(gU,g2)||be(gU.display,g2)){return}cT(g2);var g1=gU.findWordAt(g3);gw(gU.doc,g1.anchor,g1.head)}))}else{b6(gY.scroller,"dblclick",function(g1){return aU(gU,g1)||cT(g1)})}if(!gK){b6(gY.scroller,"contextmenu",function(g1){return az(gU,g1)})}var g0,i={end:0};function gZ(){if(gY.activeTouch){g0=setTimeout(function(){return gY.activeTouch=null},1000);i=gY.activeTouch;i.end=+new Date}}function gW(g1){if(g1.touches.length!=1){return false}var g2=g1.touches[0];return g2.radiusX<=1&&g2.radiusY<=1}function gV(g4,g1){if(g1.left==null){return true}var g3=g1.left-g4.left,g2=g1.top-g4.top;return g3*g3+g2*g2>20*20}b6(gY.scroller,"touchstart",function(g2){if(!aU(gU,g2)&&!gW(g2)){gY.input.ensurePolled();clearTimeout(g0);var g1=+new Date;gY.activeTouch={start:g1,moved:false,prev:g1-i.end<=300?i:null};if(g2.touches.length==1){gY.activeTouch.left=g2.touches[0].pageX;gY.activeTouch.top=g2.touches[0].pageY}}});b6(gY.scroller,"touchmove",function(){if(gY.activeTouch){gY.activeTouch.moved=true}});b6(gY.scroller,"touchend",function(g2){var g4=gY.activeTouch;if(g4&&!be(gY,g2)&&g4.left!=null&&!g4.moved&&new Date-g4.start<300){var g3=gU.coordsChar(gY.activeTouch,"page"),g1;if(!g4.prev||gV(g4,g4.prev)){g1=new ec(g3,g3)}else{if(!g4.prev.prev||gV(g4,g4.prev.prev)){g1=gU.findWordAt(g3)}else{g1=new ec(X(g3.line,0),ge(gU.doc,X(g3.line+1,0)))}}gU.setSelection(g1.anchor,g1.head);gU.focus();cT(g2)}gZ()});b6(gY.scroller,"touchcancel",gZ);b6(gY.scroller,"scroll",function(){if(gY.scroller.clientHeight){P(gU,gY.scroller.scrollTop);bN(gU,gY.scroller.scrollLeft,true);aG(gU,"scroll",gU)}});b6(gY.scroller,"mousewheel",function(g1){return c(gU,g1)});b6(gY.scroller,"DOMMouseScroll",function(g1){return c(gU,g1)});b6(gY.wrapper,"scroll",function(){return gY.wrapper.scrollTop=gY.wrapper.scrollLeft=0});gY.dragFunctions={enter:function(g1){if(!aU(gU,g1)){eL(g1)}},over:function(g1){if(!aU(gU,g1)){gR(gU,g1);eL(g1)}},start:function(g1){return Q(gU,g1)},drop:de(gU,bn),leave:function(g1){if(!aU(gU,g1)){dq(gU)}}};var gX=gY.input.getField();b6(gX,"keyup",function(g1){return bk.call(gU,g1)});b6(gX,"keydown",de(gU,q));b6(gX,"keypress",de(gU,cK));b6(gX,"focus",function(g1){return cO(gU,g1)});b6(gX,"blur",function(g1){return aY(gU,g1)})}var bb=[];H.defineInitHook=function(i){return bb.push(i)};function ae(g9,gY,g8,gW){var g7=g9.doc,gV;if(g8==null){g8="add"}if(g8=="smart"){if(!g7.mode.indent){g8="prev"}else{gV=dQ(g9,gY)}}var g2=g9.options.tabSize;var ha=fG(g7,gY),g1=b0(ha.text,null,g2);if(ha.stateAfter){ha.stateAfter=null}var gU=ha.text.match(/^\s*/)[0],g5;if(!gW&&!/\S/.test(ha.text)){g5=0;g8="not"}else{if(g8=="smart"){g5=g7.mode.indent(gV,ha.text.slice(gU.length),ha.text);if(g5==cm||g5>150){if(!gW){return}g8="prev"}}}if(g8=="prev"){if(gY>g7.first){g5=b0(fG(g7,gY-1).text,null,g2)}else{g5=0}}else{if(g8=="add"){g5=g1+g9.options.indentUnit}else{if(g8=="subtract"){g5=g1-g9.options.indentUnit}else{if(typeof g8=="number"){g5=g1+g8}}}}g5=Math.max(0,g5);var g6="",g4=0;if(g9.options.indentWithTabs){for(var gZ=Math.floor(g5/g2);gZ;--gZ){g4+=g2;g6+="\t"}}if(g4<g5){g6+=cC(g5-g4)}if(g6!=gU){a4(g7,g6,X(gY,0),X(gY,gU.length),"+input");ha.stateAfter=null;return true}else{for(var gX=0;gX<g7.sel.ranges.length;gX++){var g0=g7.sel.ranges[gX];if(g0.head.line==gY&&g0.head.ch<gU.length){var g3=X(gY,gU.length);e(g7,gX,new ec(g3,g3));break}}}}var bp=null;function dj(i){bp=i}function gx(g9,gZ,gX,gW,g8){var g7=g9.doc;g9.display.shift=false;if(!gW){gW=g7.sel}var gY=g9.state.pasteIncoming||g8=="paste";var g2=go(gZ),gU=null;if(gY&&gW.ranges.length>1){if(bp&&bp.text.join("\n")==gZ){if(gW.ranges.length%bp.text.length==0){gU=[];for(var g0=0;g0<bp.text.length;g0++){gU.push(g7.splitLines(bp.text[g0]))}}}else{if(g2.length==gW.ranges.length){gU=b2(g2,function(i){return[i]})}}}var g3;for(var gV=gW.ranges.length-1;gV>=0;gV--){var g1=gW.ranges[gV];var g6=g1.from(),g5=g1.to();if(g1.empty()){if(gX&&gX>0){g6=X(g6.line,g6.ch-gX)}else{if(g9.state.overwrite&&!gY){g5=X(g5.line,Math.min(fG(g7,g5.line).text.length,g5.ch+f9(g2).length))}else{if(bp&&bp.lineWise&&bp.text.join("\n")==gZ){g6=g5=X(g6.line,0)}}}}g3=g9.curOp.updateInput;var g4={from:g6,to:g5,text:gU?gU[gV%gU.length]:g2,origin:g8||(gY?"paste":g9.state.cutIncoming?"cut":"+input")};bj(g9.doc,g4);ag(g9,"inputRead",g9,g4)}if(gZ&&!gY){gu(g9,gZ)}f8(g9);g9.curOp.updateInput=g3;g9.curOp.typing=true;g9.state.pasteIncoming=g9.state.cutIncoming=false}function bd(gV,i){var gU=gV.clipboardData&&gV.clipboardData.getData("Text");if(gU){gV.preventDefault();if(!i.isReadOnly()&&!i.options.disableInput){c0(i,function(){return gx(i,gU,0,null,"paste")})}return true}}function gu(gU,gY){if(!gU.options.electricChars||!gU.options.smartIndent){return}var gZ=gU.doc.sel;for(var gX=gZ.ranges.length-1;gX>=0;gX--){var gV=gZ.ranges[gX];if(gV.head.ch>100||(gX&&gZ.ranges[gX-1].head.line==gV.head.line)){continue}var g0=gU.getModeAt(gV.head);var g1=false;if(g0.electricChars){for(var gW=0;gW<g0.electricChars.length;gW++){if(gY.indexOf(g0.electricChars.charAt(gW))>-1){g1=ae(gU,gV.head.line,"smart");break}}}else{if(g0.electricInput){if(g0.electricInput.test(fG(gU.doc,gV.head.line).text.slice(0,gV.head.ch))){g1=ae(gU,gV.head.line,"smart")}}}if(g1){ag(gU,"electricInput",gU,gV.head.line)}}}function dx(gU){var gZ=[],gW=[];for(var gX=0;gX<gU.doc.sel.ranges.length;gX++){var gV=gU.doc.sel.ranges[gX].head.line;var gY={anchor:X(gV,0),head:X(gV+1,0)};gW.push(gY);gZ.push(gU.getRange(gY.anchor,gY.head))}return{text:gZ,ranges:gW}}function gk(gU,i){gU.setAttribute("autocorrect","off");gU.setAttribute("autocapitalize","off");gU.setAttribute("spellcheck",!!i)}function a0(){var i=gC("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none");var gU=gC("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");if(dd){i.style.width="1000px"}else{i.setAttribute("wrap","off")}if(fs){i.style.border="1px solid black"}gk(i);return gU}function d3(i){var gU=i.optionHandlers;var gV=i.helpers={};i.prototype={constructor:i,focus:function(){window.focus();this.display.input.focus()},setOption:function(gY,gZ){var gX=this.options,gW=gX[gY];if(gX[gY]==gZ&&gY!="mode"){return}gX[gY]=gZ;if(gU.hasOwnProperty(gY)){de(this,gU[gY])(this,gZ,gW)}aG(this,"optionChange",this,gY)},getOption:function(gW){return this.options[gW]},getDoc:function(){return this.doc},addKeyMap:function(gX,gW){this.state.keyMaps[gW?"push":"unshift"](gv(gX))},removeKeyMap:function(gX){var gY=this.state.keyMaps;for(var gW=0;gW<gY.length;++gW){if(gY[gW]==gX||gY[gW].name==gX){gY.splice(gW,1);return true}}},addOverlay:dn(function(gW,gX){var gY=gW.token?gW:i.getMode(this.options,gW);if(gY.startState){throw new Error("Overlays may not be stateful.")}ck(this.state.overlays,{mode:gY,modeSpec:gW,opaque:gX&&gX.opaque,priority:(gX&&gX.priority)||0},function(gZ){return gZ.priority});this.state.modeGen++;aj(this)}),removeOverlay:dn(function(gW){var g0=this;var gY=this.state.overlays;for(var gX=0;gX<gY.length;++gX){var gZ=gY[gX].modeSpec;if(gZ==gW||typeof gW=="string"&&gZ.name==gW){gY.splice(gX,1);g0.state.modeGen++;aj(g0);return}}}),indentLine:dn(function(gY,gW,gX){if(typeof gW!="string"&&typeof gW!="number"){if(gW==null){gW=this.options.smartIndent?"smart":"prev"}else{gW=gW?"add":"subtract"}}if(cj(this.doc,gY)){ae(this,gY,gW,gX)}}),indentSelection:dn(function(g6){var g2=this;var gW=this.doc.sel.ranges,gZ=-1;for(var g1=0;g1<gW.length;g1++){var g3=gW[g1];if(!g3.empty()){var g4=g3.from(),g5=g3.to();var gX=Math.max(gZ,g4.line);gZ=Math.min(g2.lastLine(),g5.line-(g5.ch?0:1))+1;for(var g0=gX;g0<gZ;++g0){ae(g2,g0,g6)}var gY=g2.doc.sel.ranges;if(g4.ch==0&&gW.length==gY.length&&gY[g1].from().ch>0){e(g2.doc,g1,new ec(g4,gY[g1].to()),ab)}}else{if(g3.head.line>gZ){ae(g2,g3.head.line,g6,true);gZ=g3.head.line;if(g1==g2.doc.sel.primIndex){f8(g2)}}}}}),getTokenAt:function(gX,gW){return cD(this,gX,gW)},getLineTokens:function(gX,gW){return cD(this,X(gX),gW,true)},getTokenTypeAt:function(g3){g3=ge(this.doc,g3);var gZ=dl(this,fG(this.doc,g3.line));var g1=0,g2=(gZ.length-1)/2,gY=g3.ch;var gX;if(gY==0){gX=gZ[2]}else{for(;;){var gW=(g1+g2)>>1;if((gW?gZ[gW*2-1]:0)>=gY){g2=gW}else{if(gZ[gW*2+1]<gY){g1=gW+1}else{gX=gZ[gW*2+2];break}}}}var g0=gX?gX.indexOf("overlay "):-1;return g0<0?gX:g0==0?null:gX.slice(0,g0-1)},getModeAt:function(gX){var gW=this.doc.mode;if(!gW.innerMode){return gW}return i.innerMode(gW,this.getTokenAt(gX).state).mode},getHelper:function(gX,gW){return this.getHelpers(gX,gW)[0]},getHelpers:function(g3,g2){var g0=this;var g5=[];if(!gV.hasOwnProperty(g2)){return g5}var gY=gV[g2],g1=this.getModeAt(g3);if(typeof g1[g2]=="string"){if(gY[g1[g2]]){g5.push(gY[g1[g2]])}}else{if(g1[g2]){for(var gZ=0;gZ<g1[g2].length;gZ++){var gX=gY[g1[g2][gZ]];if(gX){g5.push(gX)}}}else{if(g1.helperType&&gY[g1.helperType]){g5.push(gY[g1.helperType])}else{if(gY[g1.name]){g5.push(gY[g1.name])}}}}for(var gW=0;gW<gY._global.length;gW++){var g4=gY._global[gW];if(g4.pred(g1,g0)&&dy(g5,g4.val)==-1){g5.push(g4.val)}}return g5},getStateAfter:function(gX,gW){var gY=this.doc;gX=di(gY,gX==null?gY.first+gY.size-1:gX);return dQ(this,gX+1,gW)},cursorCoords:function(gZ,gX){var gY,gW=this.doc.sel.primary();if(gZ==null){gY=gW.head}else{if(typeof gZ=="object"){gY=ge(this.doc,gZ)}else{gY=gZ?gW.from():gW.to()}}return d9(this,gY,gX||"page")},charCoords:function(gX,gW){return cX(this,ge(this.doc,gX),gW||"page")},coordsChar:function(gW,gX){gW=gP(this,gW,gX||"page");return gl(this,gW.left,gW.top)},lineAtHeight:function(gW,gX){gW=gP(this,{top:gW,left:0},gX||"page").top;return bQ(this.doc,gW+this.display.viewOffset)},heightAtLine:function(gX,g1,g0){var gW=false,gY;if(typeof gX=="number"){var gZ=this.doc.first+this.doc.size-1;if(gX<this.doc.first){gX=this.doc.first}else{if(gX>gZ){gX=gZ;gW=true}}gY=fG(this.doc,gX)}else{gY=gX}return fg(this,gY,{top:0,left:0},g1||"page",g0||gW).top+(gW?this.doc.height-bV(gY):0)},defaultTextHeight:function(){return a1(this.display)},defaultCharWidth:function(){return dR(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(g1,gY,g3,gZ,g5){var g0=this.display;g1=d9(this,ge(this.doc,g1));var g2=g1.bottom,gX=g1.left;gY.style.position="absolute";gY.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(gY);g0.sizer.appendChild(gY);if(gZ=="over"){g2=g1.top}else{if(gZ=="above"||gZ=="near"){var gW=Math.max(g0.wrapper.clientHeight,this.doc.height),g4=Math.max(g0.sizer.clientWidth,g0.lineSpace.clientWidth);if((gZ=="above"||g1.bottom+gY.offsetHeight>gW)&&g1.top>gY.offsetHeight){g2=g1.top-gY.offsetHeight}else{if(g1.bottom+gY.offsetHeight<=gW){g2=g1.bottom}}if(gX+gY.offsetWidth>g4){gX=g4-gY.offsetWidth}}}gY.style.top=g2+"px";gY.style.left=gY.style.right="";if(g5=="right"){gX=g0.sizer.clientWidth-gY.offsetWidth;gY.style.right="0px"}else{if(g5=="left"){gX=0}else{if(g5=="middle"){gX=(g0.sizer.clientWidth-gY.offsetWidth)/2}}gY.style.left=gX+"px"}if(g3){F(this,{left:gX,top:g2,right:gX+gY.offsetWidth,bottom:g2+gY.offsetHeight})}},triggerOnKeyDown:dn(q),triggerOnKeyPress:dn(cK),triggerOnKeyUp:bk,execCommand:function(gW){if(e0.hasOwnProperty(gW)){return e0[gW].call(null,this)}},triggerElectric:dn(function(gW){gu(this,gW)}),findPosH:function(g3,gZ,g0,gX){var g2=this;var gW=1;if(gZ<0){gW=-1;gZ=-gZ}var g1=ge(this.doc,g3);for(var gY=0;gY<gZ;++gY){g1=bE(g2.doc,g1,gW,g0,gX);if(g1.hitSide){break}}return g1},moveH:dn(function(gW,gX){var gY=this;this.extendSelectionsBy(function(gZ){if(gY.display.shift||gY.doc.extend||gZ.empty()){return bE(gY.doc,gZ.head,gW,gX,gY.options.rtlMoveVisually)}else{return gW<0?gZ.from():gZ.to()}},c9)}),deleteH:dn(function(gW,gX){var gY=this.doc.sel,gZ=this.doc;if(gY.somethingSelected()){gZ.replaceSelection("",null,"+delete")}else{fo(this,function(g1){var g0=bE(gZ,g1.head,gW,gX,false);return gW<0?{from:g0,to:g1.head}:{from:g1.head,to:g0}})}}),findPosV:function(g2,gZ,g3,g5){var gY=this;var gW=1,g1=g5;if(gZ<0){gW=-1;gZ=-gZ}var g4=ge(this.doc,g2);for(var gX=0;gX<gZ;++gX){var g0=d9(gY,g4,"div");if(g1==null){g1=g0.left}else{g0.left=g1}g4=by(gY,g0,gW,g3);if(g4.hitSide){break}}return g4},moveV:dn(function(gW,gY){var g2=this;var g0=this.doc,gZ=[];var g1=!this.display.shift&&!g0.extend&&g0.sel.somethingSelected();g0.extendSelectionsBy(function(g3){if(g1){return gW<0?g3.from():g3.to()}var g5=d9(g2,g3.head,"div");if(g3.goalColumn!=null){g5.left=g3.goalColumn}gZ.push(g5.left);var g4=by(g2,g5,gW,gY);if(gY=="page"&&g3==g0.sel.primary()){cZ(g2,null,cX(g2,g4,"div").top-g5.top)}return g4},c9);if(gZ.length){for(var gX=0;gX<g0.sel.ranges.length;gX++){g0.sel.ranges[gX].goalColumn=gZ[gX]}}}),findWordAt:function(g3){var g1=this.doc,gZ=fG(g1,g3.line).text;var g2=g3.ch,gY=g3.ch;if(gZ){var g0=this.getHelper(g3,"wordChars");if((g3.sticky=="before"||gY==gZ.length)&&g2){--g2}else{++gY}var gX=gZ.charAt(g2);var gW=cN(gX,g0)?function(g4){return cN(g4,g0)}:/\s/.test(gX)?function(g4){return/\s/.test(g4)}:function(g4){return(!/\s/.test(g4)&&!cN(g4))};while(g2>0&&gW(gZ.charAt(g2-1))){--g2}while(gY<gZ.length&&gW(gZ.charAt(gY))){++gY}}return new ec(X(g3.line,g2),X(g3.line,gY))},toggleOverwrite:function(gW){if(gW!=null&&gW==this.state.overwrite){return}if(this.state.overwrite=!this.state.overwrite){f3(this.display.cursorDiv,"CodeMirror-overwrite")}else{h(this.display.cursorDiv,"CodeMirror-overwrite")}aG(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==d2()},isReadOnly:function(){return !!(this.options.readOnly||this.doc.cantEdit)},scrollTo:dn(function(gW,gX){if(gW!=null||gX!=null){f5(this)}if(gW!=null){this.curOp.scrollLeft=gW}if(gX!=null){this.curOp.scrollTop=gX}}),getScrollInfo:function(){var gW=this.display.scroller;return{left:gW.scrollLeft,top:gW.scrollTop,height:gW.scrollHeight-c6(this)-this.display.barHeight,width:gW.scrollWidth-c6(this)-this.display.barWidth,clientHeight:c8(this),clientWidth:dB(this)}},scrollIntoView:dn(function(gX,gY){if(gX==null){gX={from:this.doc.sel.primary().head,to:null};if(gY==null){gY=this.options.cursorScrollMargin}}else{if(typeof gX=="number"){gX={from:X(gX,0),to:null}}else{if(gX.from==null){gX={from:gX,to:null}}}}if(!gX.to){gX.to=gX.from}gX.margin=gY||0;if(gX.from.line!=null){f5(this);this.curOp.scrollToPos=gX}else{var gW=I(this,{left:Math.min(gX.from.left,gX.to.left),top:Math.min(gX.from.top,gX.to.top)-gX.margin,right:Math.max(gX.from.right,gX.to.right),bottom:Math.max(gX.from.bottom,gX.to.bottom)+gX.margin});this.scrollTo(gW.scrollLeft,gW.scrollTop)}}),setSize:dn(function(gY,gW){var g0=this;var gX=function(g1){return typeof g1=="number"||/^\d+$/.test(String(g1))?g1+"px":g1};if(gY!=null){this.display.wrapper.style.width=gX(gY)}if(gW!=null){this.display.wrapper.style.height=gX(gW)}if(this.options.lineWrapping){aR(this)}var gZ=this.display.viewFrom;this.doc.iter(gZ,this.display.viewTo,function(g1){if(g1.widgets){for(var g2=0;g2<g1.widgets.length;g2++){if(g1.widgets[g2].noHScroll){S(g0,gZ,"widget");break}}}++gZ});this.curOp.forceUpdate=true;aG(this,"refresh",this)}),operation:function(gW){return c0(this,gW)},refresh:dn(function(){var gW=this.display.cachedTextHeight;aj(this);this.curOp.forceUpdate=true;al(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);dh(this);if(gW==null||Math.abs(gW-a1(this.display))>0.5){aa(this)}aG(this,"refresh",this)}),swapDoc:dn(function(gX){var gW=this.doc;gW.cm=null;et(this,gX);al(this);this.display.input.reset();this.scrollTo(gX.scrollLeft,gX.scrollTop);this.curOp.forceScroll=true;ag(this,"swapDoc",this,gW);return gW}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};bI(i);i.registerHelper=function(gX,gW,gY){if(!gV.hasOwnProperty(gX)){gV[gX]=i[gX]={_global:[]}}gV[gX][gW]=gY};i.registerGlobalHelper=function(gY,gX,gW,gZ){i.registerHelper(gY,gX,gZ);gV[gY]._global.push({pred:gW,val:gZ})}}function bE(g5,g4,gW,g6,gU){var gX=g4;var g1=gW;var g0=fG(g5,g4.line);function i(){var ha=g4.line+gW;if(ha<g5.first||ha>=g5.first+g5.size){return false}g4=new X(ha,g4.ch,g4.sticky);return g0=fG(g5,ha)}function gY(hb){var ha;if(gU){ha=u(g5.cm,g0,g4,gW)}else{ha=ak(g0,g4,gW)}if(ha==null){if(!hb&&i()){g4=eW(gU,g5.cm,g0,g4.line,gW)}else{return false}}else{g4=ha}return true}if(g6=="char"){gY()}else{if(g6=="column"){gY(true)}else{if(g6=="word"||g6=="group"){var g3=null,g8=g6=="group";var gV=g5.cm&&g5.cm.getHelper(g4,"wordChars");for(var gZ=true;;gZ=false){if(gW<0&&!gY(!gZ)){break}var g7=g0.text.charAt(g4.ch)||"\n";var g2=cN(g7,gV)?"w":g8&&g7=="\n"?"n":!g8||/\s/.test(g7)?null:"p";if(g8&&!gZ&&!g2){g2="s"}if(g3&&g3!=g2){if(gW<0){gW=1;gY();g4.sticky="after"}break}if(g2){g3=g2}if(gW>0&&!gY(!gZ)){break}}}}}var g9=b4(g5,g4,gX,g1,true);if(Y(gX,g9)){g9.hitSide=true}return g9}function by(g2,gX,gU,g1){var g0=g2.doc,gZ=gX.left,gY;if(g1=="page"){var gW=Math.min(g2.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);var i=Math.max(gW-0.5*a1(g2.display),3);gY=(gU>0?gX.bottom:gX.top)+gU*i}else{if(g1=="line"){gY=gU>0?gX.bottom+3:gX.top-3}}var gV;for(;;){gV=gl(g2,gZ,gY);if(!gV.outside){break}if(gU<0?gY<=0:gY>=g0.height){gV.hitSide=true;break}gY+=gU*5}return gV}var dJ=function(i){this.cm=i;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new gT();this.composing=null;this.gracePeriod=false;this.readDOMTimeout=null};dJ.prototype.init=function(gW){var gY=this;var gV=this,i=gV.cm;var gX=gV.div=gW.lineDiv;gk(gX,i.options.spellcheck);b6(gX,"paste",function(gZ){if(aU(i,gZ)||bd(gZ,i)){return}if(l<=11){setTimeout(de(i,function(){return gY.updateFromDOM()}),20)}});b6(gX,"compositionstart",function(gZ){gY.composing={data:gZ.data,done:false}});b6(gX,"compositionupdate",function(gZ){if(!gY.composing){gY.composing={data:gZ.data,done:false}}});b6(gX,"compositionend",function(gZ){if(gY.composing){if(gZ.data!=gY.composing.data){gY.readFromDOMSoon()}gY.composing.done=true}});b6(gX,"touchstart",function(){return gV.forceCompositionEnd()});b6(gX,"input",function(){if(!gY.composing){gY.readFromDOMSoon()}});function gU(g3){if(aU(i,g3)){return}if(i.somethingSelected()){dj({lineWise:false,text:i.getSelections()});if(g3.type=="cut"){i.replaceSelection("",null,"cut")}}else{if(!i.options.lineWiseCopyCut){return}else{var g0=dx(i);dj({lineWise:true,text:g0.text});if(g3.type=="cut"){i.operation(function(){i.setSelections(g0.ranges,0,ab);i.replaceSelection("",null,"cut")})}}}if(g3.clipboardData){g3.clipboardData.clearData();var g2=bp.text.join("\n");g3.clipboardData.setData("Text",g2);if(g3.clipboardData.getData("Text")==g2){g3.preventDefault();return}}var g1=a0(),g4=g1.firstChild;i.display.lineSpace.insertBefore(g1,i.display.lineSpace.firstChild);g4.value=bp.text.join("\n");var gZ=document.activeElement;dZ(g4);setTimeout(function(){i.display.lineSpace.removeChild(g1);gZ.focus();if(gZ==gX){gV.showPrimarySelection()}},50)}b6(gX,"copy",gU);b6(gX,"cut",gU)};dJ.prototype.prepareSelection=function(){var i=gc(this.cm,false);i.focus=this.cm.state.focused;return i};dJ.prototype.showSelection=function(gU,i){if(!gU||!this.cm.display.view.length){return}if(gU.focus||i){this.showPrimarySelection()}this.showMultipleSelections(gU)};dJ.prototype.showPrimarySelection=function(){var gX=window.getSelection(),g0=this.cm.doc.sel.primary();var gY=aA(this.cm,gX.anchorNode,gX.anchorOffset);var g2=aA(this.cm,gX.focusNode,gX.focusOffset);if(gY&&!gY.bad&&g2&&!g2.bad&&cq(at(gY,g2),g0.from())==0&&cq(bG(gY,g2),g0.to())==0){return}var gW=cM(this.cm,g0.from());var g1=cM(this.cm,g0.to());if(!gW&&!g1){gX.removeAllRanges();return}var g4=this.cm.display.view;var gZ=gX.rangeCount&&gX.getRangeAt(0);if(!gW){gW={node:g4[0].measure.map[2],offset:0}}else{if(!g1){var gV=g4[g4.length-1].measure;var gU=gV.maps?gV.maps[gV.maps.length-1]:gV.map;g1={node:gU[gU.length-1],offset:gU[gU.length-2]-gU[gU.length-3]}}}var i;try{i=cy(gW.node,gW.offset,g1.offset,g1.node)}catch(g3){}if(i){if(!cB&&this.cm.state.focused){gX.collapse(gW.node,gW.offset);if(!i.collapsed){gX.removeAllRanges();gX.addRange(i)}}else{gX.removeAllRanges();gX.addRange(i)}if(gZ&&gX.anchorNode==null){gX.addRange(gZ)}else{if(cB){this.startGracePeriod()}}}this.rememberSelection()};dJ.prototype.startGracePeriod=function(){var i=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){i.gracePeriod=false;if(i.selectionChanged()){i.cm.operation(function(){return i.cm.curOp.selectionChanged=true})}},20)};dJ.prototype.showMultipleSelections=function(i){b1(this.cm.display.cursorDiv,i.cursors);b1(this.cm.display.selectionDiv,i.selection)};dJ.prototype.rememberSelection=function(){var i=window.getSelection();this.lastAnchorNode=i.anchorNode;this.lastAnchorOffset=i.anchorOffset;this.lastFocusNode=i.focusNode;this.lastFocusOffset=i.focusOffset};dJ.prototype.selectionInEditor=function(){var gU=window.getSelection();if(!gU.rangeCount){return false}var i=gU.getRangeAt(0).commonAncestorContainer;return gL(this.div,i)};dJ.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"){if(!this.selectionInEditor()){this.showSelection(this.prepareSelection(),true)}this.div.focus()}};dJ.prototype.blur=function(){this.div.blur()};dJ.prototype.getField=function(){return this.div};dJ.prototype.supportsTouch=function(){return true};dJ.prototype.receivedFocus=function(){var i=this;if(this.selectionInEditor()){this.pollSelection()}else{c0(this.cm,function(){return i.cm.curOp.selectionChanged=true})}function gU(){if(i.cm.state.focused){i.pollSelection();i.polling.set(i.cm.options.pollInterval,gU)}}this.polling.set(this.cm.options.pollInterval,gU)};dJ.prototype.selectionChanged=function(){var i=window.getSelection();return i.anchorNode!=this.lastAnchorNode||i.anchorOffset!=this.lastAnchorOffset||i.focusNode!=this.lastFocusNode||i.focusOffset!=this.lastFocusOffset};dJ.prototype.pollSelection=function(){if(this.readDOMTimeout!=null||this.gracePeriod||!this.selectionChanged()){return}var gW=window.getSelection(),i=this.cm;if(aP&&ds&&this.cm.options.gutters.length&&gD(gW.anchorNode)){this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs});this.blur();this.focus();return}if(this.composing){return}this.rememberSelection();var gU=aA(i,gW.anchorNode,gW.anchorOffset);var gV=aA(i,gW.focusNode,gW.focusOffset);if(gU&&gV){c0(i,function(){b3(i.doc,fh(gU,gV),ab);if(gU.bad||gV.bad){i.curOp.selectionChanged=true}})}};dJ.prototype.pollContent=function(){if(this.readDOMTimeout!=null){clearTimeout(this.readDOMTimeout);this.readDOMTimeout=null}var g3=this.cm,hd=g3.display,hb=g3.doc.sel.primary();var hc=hb.from(),gX=hb.to();if(hc.ch==0&&hc.line>g3.firstLine()){hc=X(hc.line-1,fG(g3.doc,hc.line-1).length)}if(gX.ch==fG(g3.doc,gX.line).text.length&&gX.line<g3.lastLine()){gX=X(gX.line+1,0)}if(hc.line<hd.viewFrom||gX.line>hd.viewTo-1){return false}var g0,gY,g2;if(hc.line==hd.viewFrom||(g0=dG(g3,hc.line))==0){gY=bW(hd.view[0].line);g2=hd.view[0].node}else{gY=bW(hd.view[g0].line);g2=hd.view[g0-1].node.nextSibling}var ha=dG(g3,gX.line);var g5,g8;if(ha==hd.view.length-1){g5=hd.viewTo-1;g8=hd.lineDiv.lastChild}else{g5=bW(hd.view[ha+1].line)-1;g8=hd.view[ha+1].node.previousSibling}if(!g2){return false}var he=g3.doc.splitLines(gy(g3,g2,g8,gY,g5));var g7=gE(g3.doc,X(gY,0),X(g5,fG(g3.doc,g5).text.length));while(he.length>1&&g7.length>1){if(f9(he)==f9(g7)){he.pop();g7.pop();g5--}else{if(he[0]==g7[0]){he.shift();g7.shift();gY++}else{break}}}var g9=0,gV=0;var g4=he[0],gU=g7[0],i=Math.min(g4.length,gU.length);while(g9<i&&g4.charCodeAt(g9)==gU.charCodeAt(g9)){++g9}var g1=f9(he),hf=f9(g7);var gW=Math.min(g1.length-(he.length==1?g9:0),hf.length-(g7.length==1?g9:0));while(gV<gW&&g1.charCodeAt(g1.length-gV-1)==hf.charCodeAt(hf.length-gV-1)){++gV}if(he.length==1&&g7.length==1&&gY==hc.line){while(g9&&g9>hc.ch&&g1.charCodeAt(g1.length-gV-1)==hf.charCodeAt(hf.length-gV-1)){g9--;gV++}}he[he.length-1]=g1.slice(0,g1.length-gV).replace(/^\u200b+/,"");he[0]=he[0].slice(g9).replace(/\u200b+$/,"");var gZ=X(gY,g9);var g6=X(g5,g7.length?f9(g7).length-gV:0);if(he.length>1||he[0]||cq(gZ,g6)){a4(g3.doc,he,gZ,g6,"+input");return true}};dJ.prototype.ensurePolled=function(){this.forceCompositionEnd()};dJ.prototype.reset=function(){this.forceCompositionEnd()};dJ.prototype.forceCompositionEnd=function(){if(!this.composing){return}clearTimeout(this.readDOMTimeout);this.composing=null;this.updateFromDOM();this.div.blur();this.div.focus()};dJ.prototype.readFromDOMSoon=function(){var i=this;if(this.readDOMTimeout!=null){return}this.readDOMTimeout=setTimeout(function(){i.readDOMTimeout=null;if(i.composing){if(i.composing.done){i.composing=null}else{return}}i.updateFromDOM()},80)};dJ.prototype.updateFromDOM=function(){var i=this;if(this.cm.isReadOnly()||!this.pollContent()){c0(this.cm,function(){return aj(i.cm)})}};dJ.prototype.setUneditable=function(i){i.contentEditable="false"};dJ.prototype.onKeyPress=function(i){if(i.charCode==0){return}i.preventDefault();if(!this.cm.isReadOnly()){de(this.cm,gx)(this.cm,String.fromCharCode(i.charCode==null?i.keyCode:i.charCode),0)}};dJ.prototype.readOnlyChanged=function(i){this.div.contentEditable=String(i!="nocursor")};dJ.prototype.onContextMenu=function(){};dJ.prototype.resetPosition=function(){};dJ.prototype.needsContentAttribute=true;function cM(gZ,gX){var gY=fD(gZ,gX.line);if(!gY||gY.hidden){return null}var g1=fG(gZ.doc,gX.line);var gU=cG(gY,g1,gX.line);var gV=a(g1,gZ.doc.direction),gW="left";if(gV){var i=aJ(gV,gX.ch);gW=i%2?"right":"left"}var g0=aM(gU.map,gX.ch,gW);g0.offset=g0.collapse=="right"?g0.end:g0.start;return g0}function gD(gU){for(var i=gU;i;i=i.parentNode){if(/CodeMirror-gutter-wrapper/.test(i.className)){return true}}return false}function eM(gU,i){if(i){gU.bad=true}return gU}function gy(g1,gZ,g0,gW,gU){var g3="",gV=false,i=g1.doc.lineSeparator();function gX(g5){return function(g6){return g6.id==g5}}function g4(){if(gV){g3+=i;gV=false}}function g2(g5){if(g5){g4();g3+=g5}}function gY(ha){if(ha.nodeType==1){var g7=ha.getAttribute("cm-text");if(g7!=null){g2(g7||ha.textContent.replace(/\u200b/g,""));return}var g9=ha.getAttribute("cm-marker"),g6;if(g9){var hb=g1.findMarks(X(gW,0),X(gU+1,0),gX(+g9));if(hb.length&&(g6=hb[0].find())){g2(gE(g1.doc,g6.from,g6.to).join(i))}return}if(ha.getAttribute("contenteditable")=="false"){return}var g5=/^(pre|div|p)$/i.test(ha.nodeName);if(g5){g4()}for(var g8=0;g8<ha.childNodes.length;g8++){gY(ha.childNodes[g8])}if(g5){gV=true}}else{if(ha.nodeType==3){g2(ha.nodeValue)}}}for(;;){gY(gZ);if(gZ==g0){break}gZ=gZ.nextSibling}return g3}function aA(gU,gX,gZ){var gY;if(gX==gU.display.lineDiv){gY=gU.display.lineDiv.childNodes[gZ];if(!gY){return eM(gU.clipPos(X(gU.display.viewTo-1)),true)}gX=null;gZ=0}else{for(gY=gX;;gY=gY.parentNode){if(!gY||gY==gU.display.lineDiv){return null}if(gY.parentNode&&gY.parentNode==gU.display.lineDiv){break}}}for(var gW=0;gW<gU.display.view.length;gW++){var gV=gU.display.view[gW];if(gV.node==gY){return ac(gV,gX,gZ)}}}function ac(g2,gY,g0){var gV=g2.text.firstChild,gX=false;if(!gY||!gL(gV,gY)){return eM(X(bW(g2.line),0),true)}if(gY==gV){gX=true;gY=gV.childNodes[g0];g0=0;if(!gY){var g8=g2.rest?f9(g2.rest):g2.line;return eM(X(bW(g8),g8.text.length),gX)}}var gZ=gY.nodeType==3?gY:null,g6=gY;if(!gZ&&gY.childNodes.length==1&&gY.firstChild.nodeType==3){gZ=gY.firstChild;if(g0){g0=gZ.nodeValue.length}}while(g6.parentNode!=gV){g6=g6.parentNode}var gU=g2.measure,g4=gU.maps;function g1(hb,hg,hd){for(var hf=-1;hf<(g4?g4.length:0);hf++){var ha=hf<0?gU.map:g4[hf];for(var he=0;he<ha.length;he+=3){var hc=ha[he+2];if(hc==hb||hc==hg){var hh=bW(hf<0?g2.line:g2.rest[hf]);var g9=ha[he]+hd;if(hd<0||hc!=hb){g9=ha[he+(hd?1:0)]}return X(hh,g9)}}}}var g7=g1(gZ,g6,g0);if(g7){return eM(g7,gX)}for(var i=g6.nextSibling,g3=gZ?gZ.nodeValue.length-g0:0;i;i=i.nextSibling){g7=g1(i,i.firstChild,0);if(g7){return eM(X(g7.line,g7.ch-g3),gX)}else{g3+=i.textContent.length}}for(var g5=g6.previousSibling,gW=g0;g5;g5=g5.previousSibling){g7=g1(g5,g5.firstChild,-1);if(g7){return eM(X(g7.line,g7.ch+gW),gX)}else{gW+=g5.textContent.length}}}var Z=function(i){this.cm=i;this.prevInput="";this.pollingFast=false;this.polling=new gT();this.inaccurateSelection=false;this.hasSelection=false;this.composing=null};Z.prototype.init=function(gV){var gZ=this;var gU=this,i=this.cm;var gY=this.wrapper=a0();var gW=this.textarea=gY.firstChild;gV.wrapper.insertBefore(gY,gV.wrapper.firstChild);if(fs){gW.style.width="0px"}b6(gW,"input",function(){if(dY&&l>=9&&gZ.hasSelection){gZ.hasSelection=null}gU.poll()});b6(gW,"paste",function(g0){if(aU(i,g0)||bd(g0,i)){return}i.state.pasteIncoming=true;gU.fastPoll()});function gX(g1){if(aU(i,g1)){return}if(i.somethingSelected()){dj({lineWise:false,text:i.getSelections()});if(gU.inaccurateSelection){gU.prevInput="";gU.inaccurateSelection=false;gW.value=bp.text.join("\n");dZ(gW)}}else{if(!i.options.lineWiseCopyCut){return}else{var g0=dx(i);dj({lineWise:true,text:g0.text});if(g1.type=="cut"){i.setSelections(g0.ranges,null,ab)}else{gU.prevInput="";gW.value=g0.text.join("\n");dZ(gW)}}}if(g1.type=="cut"){i.state.cutIncoming=true}}b6(gW,"cut",gX);b6(gW,"copy",gX);b6(gV.scroller,"paste",function(g0){if(be(gV,g0)||aU(i,g0)){return}i.state.pasteIncoming=true;gU.focus()});b6(gV.lineSpace,"selectstart",function(g0){if(!be(gV,g0)){cT(g0)}});b6(gW,"compositionstart",function(){var g0=i.getCursor("from");if(gU.composing){gU.composing.range.clear()}gU.composing={start:g0,range:i.markText(g0,i.getCursor("to"),{className:"CodeMirror-composing"})}});b6(gW,"compositionend",function(){if(gU.composing){gU.poll();gU.composing.range.clear();gU.composing=null}})};Z.prototype.prepareSelection=function(){var gU=this.cm,gY=gU.display,gX=gU.doc;var i=gc(gU);if(gU.options.moveInputWithCursor){var gZ=d9(gU,gX.sel.primary().head,"div");var gV=gY.wrapper.getBoundingClientRect(),gW=gY.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(gY.wrapper.clientHeight-10,gZ.top+gW.top-gV.top));i.teLeft=Math.max(0,Math.min(gY.wrapper.clientWidth-10,gZ.left+gW.left-gV.left))}return i};Z.prototype.showSelection=function(gV){var i=this.cm,gU=i.display;b1(gU.cursorDiv,gV.cursors);b1(gU.selectionDiv,gV.selection);if(gV.teTop!=null){this.wrapper.style.top=gV.teTop+"px";this.wrapper.style.left=gV.teLeft+"px"}};Z.prototype.reset=function(gX){if(this.contextMenuPending){return}var gU,gW,i=this.cm,gZ=i.doc;if(i.somethingSelected()){this.prevInput="";var gV=gZ.sel.primary();gU=dp&&(gV.to().line-gV.from().line>100||(gW=i.getSelection()).length>1000);var gY=gU?"-":gW||i.getSelection();this.textarea.value=gY;if(i.state.focused){dZ(this.textarea)}if(dY&&l>=9){this.hasSelection=gY}}else{if(!gX){this.prevInput=this.textarea.value="";if(dY&&l>=9){this.hasSelection=null}}}this.inaccurateSelection=gU};Z.prototype.getField=function(){return this.textarea};Z.prototype.supportsTouch=function(){return false};Z.prototype.focus=function(){if(this.cm.options.readOnly!="nocursor"&&(!ey||d2()!=this.textarea)){try{this.textarea.focus()}catch(i){}}};Z.prototype.blur=function(){this.textarea.blur()};Z.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0};Z.prototype.receivedFocus=function(){this.slowPoll()};Z.prototype.slowPoll=function(){var i=this;if(this.pollingFast){return}this.polling.set(this.cm.options.pollInterval,function(){i.poll();if(i.cm.state.focused){i.slowPoll()}})};Z.prototype.fastPoll=function(){var gU=false,i=this;i.pollingFast=true;function gV(){var gW=i.poll();if(!gW&&!gU){gU=true;i.polling.set(60,gV)}else{i.pollingFast=false;i.slowPoll()}}i.polling.set(20,gV)};Z.prototype.poll=function(){var g0=this;var i=this.cm,gV=this.textarea,gW=this.prevInput;if(this.contextMenuPending||!i.state.focused||(bA(gV)&&!gW&&!this.composing)||i.isReadOnly()||i.options.disableInput||i.state.keySeq){return false}var gY=gV.value;if(gY==gW&&!i.somethingSelected()){return false}if(dY&&l>=9&&this.hasSelection===gY||ch&&/[\uf700-\uf7ff]/.test(gY)){i.display.input.reset();return false}if(i.doc.sel==i.display.selForContextMenu){var gX=gY.charCodeAt(0);if(gX==8203&&!gW){gW="\u200b"}if(gX==8666){this.reset();return this.cm.execCommand("undo")}}var gZ=0,gU=Math.min(gW.length,gY.length);while(gZ<gU&&gW.charCodeAt(gZ)==gY.charCodeAt(gZ)){++gZ}c0(i,function(){gx(i,gY.slice(gZ),gW.length-gZ,null,g0.composing?"*compose":null);if(gY.length>1000||gY.indexOf("\n")>-1){gV.value=g0.prevInput=""}else{g0.prevInput=gY}if(g0.composing){g0.composing.range.clear();g0.composing.range=i.markText(g0.composing.start,i.getCursor("to"),{className:"CodeMirror-composing"})}});return true};Z.prototype.ensurePolled=function(){if(this.pollingFast&&this.poll()){this.pollingFast=false}};Z.prototype.onKeyPress=function(){if(dY&&l>=9){this.hasSelection=null}this.fastPoll()};Z.prototype.onContextMenu=function(gY){var g3=this,g4=g3.cm,g0=g4.display,gU=g3.textarea;var g2=cA(g4,gY),i=g0.scroller.scrollTop;if(!g2||ej){return}var gX=g4.options.resetSelectionOnContextMenu;if(gX&&g4.doc.sel.contains(g2)==-1){de(g4,b3)(g4.doc,fh(g2),ab)}var gZ=gU.style.cssText,g7=g3.wrapper.style.cssText;g3.wrapper.style.cssText="position: absolute";var g6=g3.wrapper.getBoundingClientRect();gU.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(gY.clientY-g6.top-5)+"px; left: "+(gY.clientX-g6.left-5)+"px;\n      z-index: 1000; background: "+(dY?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var g5;if(dd){g5=window.scrollY}g0.input.focus();if(dd){window.scrollTo(null,g5)}g0.input.reset();if(!g4.somethingSelected()){gU.value=g3.prevInput=" "}g3.contextMenuPending=true;g0.selForContextMenu=g4.doc.sel;clearTimeout(g0.detectingSelectAll);function gW(){if(gU.selectionStart!=null){var g8=g4.somethingSelected();var g9="\u200b"+(g8?gU.value:"");gU.value="\u21da";gU.value=g9;g3.prevInput=g8?"":"\u200b";gU.selectionStart=1;gU.selectionEnd=g9.length;g0.selForContextMenu=g4.doc.sel}}function g1(){g3.contextMenuPending=false;g3.wrapper.style.cssText=g7;gU.style.cssText=gZ;if(dY&&l<9){g0.scrollbars.setScrollTop(g0.scroller.scrollTop=i)}if(gU.selectionStart!=null){if(!dY||(dY&&l<9)){gW()}var g8=0,g9=function(){if(g0.selForContextMenu==g4.doc.sel&&gU.selectionStart==0&&gU.selectionEnd>0&&g3.prevInput=="\u200b"){de(g4,an)(g4)}else{if(g8++<10){g0.detectingSelectAll=setTimeout(g9,500)}else{g0.selForContextMenu=null;g0.input.reset()}}};g0.detectingSelectAll=setTimeout(g9,200)}}if(dY&&l>=9){gW()}if(gK){eL(gY);var gV=function(){ex(window,"mouseup",gV);setTimeout(g1,20)};b6(window,"mouseup",gV)}else{setTimeout(g1,50)}};Z.prototype.readOnlyChanged=function(i){if(!i){this.reset()}};Z.prototype.setUneditable=function(){};Z.prototype.needsContentAttribute=false;function ga(g0,g1){g1=g1?aQ(g1):{};g1.value=g0.value;if(!g1.tabindex&&g0.tabIndex){g1.tabindex=g0.tabIndex}if(!g1.placeholder&&g0.placeholder){g1.placeholder=g0.placeholder}if(g1.autofocus==null){var i=d2();g1.autofocus=i==g0||g0.getAttribute("autofocus")!=null&&i==document.body}function gX(){g0.value=gZ.getValue()}var gY;if(g0.form){b6(g0.form,"submit",gX);if(!g1.leaveSubmitMethodAlone){var gU=g0.form;gY=gU.submit;try{var gW=gU.submit=function(){gX();gU.submit=gY;gU.submit();gU.submit=gW}}catch(gV){}}}g1.finishInit=function(g2){g2.save=gX;g2.getTextArea=function(){return g0};g2.toTextArea=function(){g2.toTextArea=isNaN;gX();g0.parentNode.removeChild(g2.getWrapperElement());g0.style.display="";if(g0.form){ex(g0.form,"submit",gX);if(typeof g0.form.submit=="function"){g0.form.submit=gY}}}};g0.style.display="none";var gZ=H(function(g2){return g0.parentNode.insertBefore(g2,g0.nextSibling)},g1);return gZ}function gf(i){i.off=ex;i.on=b6;i.wheelEventPixels=aB;i.Doc=av;i.splitLines=go;i.countColumn=b0;i.findColumn=eK;i.isWordChar=f6;i.Pass=cm;i.signal=aG;i.Line=gG;i.changeEnd=da;i.scrollbarModel=bq;i.Pos=X;i.cmpPos=cq;i.modes=dH;i.mimeModes=aV;i.resolveMode=gM;i.getMode=f2;i.modeExtensions=dE;i.extendMode=e1;i.copyState=cd;i.startState=ca;i.innerMode=gI;i.commands=e0;i.keyMap=fC;i.keyName=fR;i.isModifierKey=eX;i.lookupKey=j;i.normalizeKeyMap=cU;i.StringStream=fk;i.SharedTextMarker=x;i.TextMarker=R;i.LineWidget=dP;i.e_preventDefault=cT;i.e_stopPropagation=dF;i.e_stop=eL;i.addClass=f3;i.contains=gL;i.rmClass=h;i.keyNames=fH}e5(H);d3(H);var d="iter insert remove copy getEditor constructor".split(" ");for(var bT in av.prototype){if(av.prototype.hasOwnProperty(bT)&&dy(d,bT)<0){H.prototype[bT]=(function(i){return function(){return i.apply(this.doc,arguments)}})(av.prototype[bT])}}bI(av);H.inputStyles={textarea:Z,contenteditable:dJ};H.defineMode=function(i){if(!H.defaults.mode&&i!="null"){H.defaults.mode=i}eO.apply(this,arguments)};H.defineMIME=bt;H.defineMode("null",function(){return({token:function(i){return i.skipToEnd()}})});H.defineMIME("text/plain","null");H.defineExtension=function(i,gU){H.prototype[i]=gU};H.defineDocExtension=function(i,gU){av.prototype[i]=gU};H.fromTextArea=ga;gf(H);H.version="5.24.3";return H})));
